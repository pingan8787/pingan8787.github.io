<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><meta name="description" content="王平安个人博客,pingan8787,前端开发,人工智能,AI,深度学习,前端框架vue,angular,react,nodejs,python,numpy,pandas,anaconda,Tensorflow,高等数学,概率论,统计学神经网络,"><title>141-【Nodejs】Nodejs文件管理模块fs · pingan8787</title><meta name="description" content="阅读原文   
一、fs 基础方法：
fs.stat 检测是文件还是目录。   
fs.mkdir 创建目录。   
fs.writeFile 创建写入文件。   
fs.appendFile 追加文件。   
fs.readFile 读取文件（异步）。   
fs.readFileSync 读取文"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script type="text/javascript" src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js"></script><script type="text/javascript" src="https://hm.baidu.com/hm.js?de7c89214c05d551ef3ec12341cd0b9e"></script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;border-radius:15px;"><h3 title=""><a href="/">pingan8787</a></h3></div></div><ul class="my_tages_ul clearfix"><li class="my_tages_li next pagbuttons"><a class="btn" target="_blank" rel="noopener" href="http://www.pingan8787.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"> 前端开发</a></li><li class="my_tages_li next pagbuttons"><a class="btn btn" target="_blank" rel="noopener" href="http://www.pingan8787.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"> 人工智能</a></li><li class="my_tages_li next pagbuttons"><a class="btn btn" target="_blank" rel="noopener" href="http://www.pingan8787.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"> 深度学习</a></li></ul><ul class="my_icon"><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://github.com/pingan8787" title="github"><img src="http://images.pingan8787.com/assets/icon_26_github.png" alt="github"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://www.yuque.com/wangpingan/cute-frontend" title="语雀"><img src="http://images.pingan8787.com/assets/icon_26_yuque.png" alt="语雀"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/cute-javascript" title="知乎"><img src="http://images.pingan8787.com/icon_zhihu.png" alt="知乎"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://juejin.im/user/586fc337a22b9d0058807d53/posts" title="掘金"><img src="http://images.pingan8787.com/icon_juejin.png" alt="掘金"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://segmentfault.com/blog/pingan8787" title="思否"><img src="http://images.pingan8787.com/icon_sf.png" alt="思否"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36380426" title="CSDN"><img src="http://images.pingan8787.com/icon_csdn.png" alt="CSDN"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/2ec5d94afd60" title="简书"><img src="http://images.pingan8787.com/icon_jianshu.png" alt="简书"></a></li></ul><div style="text-align:center;"><wb:follow-button uid="1689651205" type="red_1" style="margin-top:10px;width:67px;height:24px;display: inline-block;"></wb:follow-button></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>博客作者：</span></a><a href="https://github.com/pingan8787" target="_blank"> pingan8787（leo）</a><div class="by_farbox"> <a href="https://beian.miit.gov.cn/" target="_blank">备案编号：闽ICP备17012095号-1</a></div></div></div><s></s><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/leo">关于Leo</a></li><li><a href="/production">作品</a></li><li><a href="/Catalog">目录</a></li><li><a href="http://js.pingan8787.com" target="_blank">Cute-JavaScript</a></li><li><a href="https://github.com/pingan8787" target="_blank">Github</a></li></div><!--.information//.back_btn
  //li
    //if is_post()
      //a.fa.fa-chevron-left(onclick="window.history.go(-1)") 
    //else
      //a.fa.fa-chevron-left(onclick="window.history.go(-1)",style="display:none;") 
//.avatar
//  img(src= url_for('images/logo@2x.png'))--></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>141-【Nodejs】Nodejs文件管理模块fs</a></h3></div><div class="post-content"><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5c676ba3e51d45798b51d65c#comment">阅读原文</a>   </p>
<h2 id="一、fs-基础方法："><a href="#一、fs-基础方法：" class="headerlink" title="一、fs 基础方法："></a>一、fs 基础方法：</h2><ul>
<li><code>fs.stat</code> 检测是文件还是目录。   </li>
<li><code>fs.mkdir</code> 创建目录。   </li>
<li><code>fs.writeFile</code> 创建写入文件。   </li>
<li><code>fs.appendFile</code> 追加文件。   </li>
<li><code>fs.readFile</code> 读取文件（异步）。   </li>
<li><code>fs.readFileSync</code> 读取文件（同步）。   </li>
<li><code>fs.readdir</code> 读取目录。   </li>
<li><code>fs.rename</code> 重命名。   </li>
<li><code>fs.rmdir</code> 删除目录。   </li>
<li><code>fs.unlink</code> 删除文件。   </li>
</ul>
<h3 id="1、fs-stat：检测是文件还是目录"><a href="#1、fs-stat：检测是文件还是目录" class="headerlink" title="1、fs.stat：检测是文件还是目录"></a>1、fs.stat：检测是文件还是目录</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.stat(<span class="string">&#x27;fs.js&#x27;</span>, <span class="function">(<span class="params">error, stats</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(stats);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`文件：<span class="subst">$&#123;stats.isFile()&#125;</span>`</span>); <span class="comment">// 文件：true</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`目录：<span class="subst">$&#123;stats.isDirectory()&#125;</span>`</span>); <span class="comment">// 目录：false</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 node fs.js。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(stats)：</span><br><span class="line">&#123; <span class="attr">dev</span>: <span class="number">636204</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">33206</span>,</span><br><span class="line">  <span class="attr">nlink</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">uid</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">gid</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">rdev</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">blksize</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">ino</span>: <span class="number">1407374883609714</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="number">242</span>,</span><br><span class="line">  <span class="attr">blocks</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">atime</span>: <span class="number">2018</span>-<span class="number">12</span>-25T09:<span class="number">14</span>:<span class="number">40.</span>866Z,</span><br><span class="line">  <span class="attr">mtime</span>: <span class="number">2019</span>-<span class="number">01</span>-15T09:<span class="number">18</span>:<span class="number">06</span>.561Z,</span><br><span class="line">  <span class="attr">ctime</span>: <span class="number">2019</span>-<span class="number">01</span>-15T09:<span class="number">18</span>:<span class="number">06</span>.561Z,</span><br><span class="line">  <span class="attr">birthtime</span>: <span class="number">2018</span>-<span class="number">12</span>-25T09:<span class="number">14</span>:<span class="number">40.</span>866Z &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`文件：<span class="subst">$&#123;stats.isFile()&#125;</span>`</span>); <span class="comment">// 文件：true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`目录：<span class="subst">$&#123;stats.isDirectory()&#125;</span>`</span>); <span class="comment">// 目录：false</span></span><br></pre></td></tr></table></figure>

<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><ul>
<li><code>stats.isFile()</code>  如果是文件返回 <code>true</code>，否则返回 <code>false</code>。   </li>
<li><code>stats.isDirectory()</code> 如果是目录返回 <code>true</code>，否则返回 <code>false</code>。  </li>
<li><code>stats.isBlockDevice()</code> 如果是块设备返回 <code>true</code>，否则返回 <code>false</code>。   </li>
<li><code>stats.isCharacterDevice()</code> 如果是字符设备返回 <code>true</code>，否则返回 <code>false</code>。   </li>
<li><code>stats.isSymbolicLink()</code>  如果是软链接返回 <code>true</code>，否则返回 <code>false</code>。   </li>
<li><code>stats.isFIFO()</code>  如果是<code>FIFO</code>，返回<code>true</code>，否则返回 <code>false</code>，<code>FIFO</code>是<code>UNIX</code>中的一种特殊类型的命令管道。   </li>
<li><code>stats.isSocket()</code>  如果是 Socket 返回 <code>true</code>，否则返回 <code>false</code>。   </li>
</ul>
<h3 id="2、fs-mkdir：创建目录"><a href="#2、fs-mkdir：创建目录" class="headerlink" title="2、fs.mkdir：创建目录"></a>2、fs.mkdir：创建目录</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.mkdir(<span class="string">&#x27;images&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;目录创建成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>接收参数：</p>
<ul>
<li><code>path</code>：将创建的目录路径。   </li>
<li><code>mode</code>：目录权限（读写权限），默认 0777。   </li>
<li><code>callback</code>：回调，传递异常参数 err。   </li>
</ul>
<p>执行 <code>node fs.js</code>。<br>会发现目录下多了一个 images 文件夹。   </p>
<h3 id="3、fs-rmdir：删除目录"><a href="#3、fs-rmdir：删除目录" class="headerlink" title="3、fs.rmdir：删除目录"></a>3、fs.rmdir：删除目录</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.rmdir(<span class="string">&#x27;images&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;目录删除成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行<code> node fs.js</code>。<br>会发现目录下 images 文件夹被删除。   </p>
<h3 id="4、fs-writeFile：创建写入文件"><a href="#4、fs-writeFile：创建写入文件" class="headerlink" title="4、fs.writeFile：创建写入文件"></a>4、fs.writeFile：创建写入文件</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.writeFile(<span class="string">&quot;index.js&quot;</span>, <span class="string">&quot;hello NodeJS！&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;文件写入成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>接收参数：</p>
<ul>
<li>``filename` (String) 文件名称。   </li>
<li>``data` (String | Buffer) 将要写入的内容，可以是字符串或者 buffer 数据。   </li>
<li>``encoding<code>(String) 可选。默认</code>‘utf-8’`，当 data 是 buffer 时，该值应该为 ignored。   </li>
<li>``mode<code>(Number) 文件读写权限，默认</code>438`。   </li>
<li>``flag<code>(String) 默认值</code>‘w’`。   </li>
<li>``callback<code> &#123; Function &#125; 回调，传递一个异常参数</code> err`。   </li>
</ul>
<p>执行 <code>node fs.js</code>。<br>会发现目录下多了一个 index.js 文件夹，并且添加了“hello NodeJS！”的内容。   </p>
<p>注意，这样的写入，是清空原文件中的所有数据，然后添加“hello NodeJS！”这句话，即：存在即覆盖，不存在即创建。   </p>
<h3 id="5、fs-unlink：删除文件"><a href="#5、fs-unlink：删除文件" class="headerlink" title="5、fs.unlink：删除文件"></a>5、fs.unlink：删除文件</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.unlink(<span class="string">&quot;index.js&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;删除成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 <code>node fs.js</code>。<br>会发现目录下 index.js 文件被删除。   </p>
<h3 id="6、fs-appendFile：追加文件"><a href="#6、fs-appendFile：追加文件" class="headerlink" title="6、fs.appendFile：追加文件"></a>6、fs.appendFile：追加文件</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.appendFile(<span class="string">&quot;index.js&quot;</span>, <span class="string">&quot;追加的内容&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;追加成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 <code>node fs.js</code>。<br>会发现目录下 index.js 文件后有追加了一段话“追加的内容”。   </p>
<h3 id="7、fs-readFile：读取文件"><a href="#7、fs-readFile：读取文件" class="headerlink" title="7、fs.readFile：读取文件"></a>7、fs.readFile：读取文件</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.readFile(<span class="string">&quot;index.js&quot;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;读取文件成功！&quot;</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(data); <span class="comment">// &lt;Buffer 68 65 6c 6c 6f 20 4e 6f 64 65 4a 53 ef bc 81 e8 bf bd e5 8a a0 e7 9a 84 e5 86 85 e5 ae b9&gt;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 <code>node fs.js</code>。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(data)</span><br><span class="line">&lt;Buffer <span class="number">68</span> <span class="number">65</span> 6c 6c 6f <span class="number">20</span> 4e 6f <span class="number">64</span> <span class="number">65</span> 4a <span class="number">53</span> ef bc <span class="number">81</span> e8 bf bd e5 8a a0 e7 9a <span class="number">84</span> e5 <span class="number">86</span> <span class="number">85</span> e5 ae b9&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8、fs-readdir：读取目录"><a href="#8、fs-readdir：读取目录" class="headerlink" title="8、fs.readdir：读取目录"></a>8、fs.readdir：读取目录</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.readdir(<span class="string">&quot;node_modules&quot;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;读取目录成功！&quot;</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(data); <span class="comment">// [ &#x27;03_tool_multiply.js&#x27;, &#x27;my_module&#x27; ]</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 <code>node fs.js</code>。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(data) </span><br><span class="line">[ <span class="string">&#x27;03_tool_multiply.js&#x27;</span>, <span class="string">&#x27;my_module&#x27;</span> ]</span><br></pre></td></tr></table></figure>

<h3 id="9、fs-rename：重命名"><a href="#9、fs-rename：重命名" class="headerlink" title="9、fs.rename：重命名"></a>9、fs.rename：重命名</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.rename(<span class="string">&quot;index.js&quot;</span>, <span class="string">&quot;new_index.js&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;重命名成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 <code>node fs.js</code>。<br>会发现目录下 index.js 文件被修改为 new_index.js。   </p>
<h3 id="10、补充：fs-rename-还可以剪切"><a href="#10、补充：fs-rename-还可以剪切" class="headerlink" title="10、补充：fs.rename 还可以剪切"></a>10、补充：fs.rename 还可以剪切</h3><p>fs.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.rename(<span class="string">&quot;new_index.js&quot;</span>, <span class="string">&quot;node_modules/new_index.js&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;剪切成功！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 <code>node fs.js</code>。<br>会发现目录下 new_index.js 文件被移动到了 node_modules 目录下。   </p>
<h2 id="二、fs-案例"><a href="#二、fs-案例" class="headerlink" title="二、fs 案例"></a>二、fs 案例</h2><h3 id="1、判断是否有-upload-目录"><a href="#1、判断是否有-upload-目录" class="headerlink" title="1、判断是否有 upload 目录"></a>1、判断是否有 upload 目录</h3><p>fsDemo.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.stat(<span class="string">&quot;upload&quot;</span>, <span class="function">(<span class="params">err, stats</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="comment">// 如果没有，创建 upload 目录</span></span><br><span class="line">        fs.mkdir(<span class="string">&quot;upload&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(err);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;创建成功！&quot;</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(stats.isDirectory()); <span class="comment">// true</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;有 upload 目录，你可以做更多操作！&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 fsDemo.js。<br>打印结果：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(stats.isDirectory()); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>有 upload 目录，你可以做更多操作！   </p>
<h3 id="2、读取目录全部文件"><a href="#2、读取目录全部文件" class="headerlink" title="2、读取目录全部文件"></a>2、读取目录全部文件</h3><p>fsDemo.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.readdir(<span class="string">&quot;../05fs/&quot;</span>, <span class="function">(<span class="params">err, files</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(files);</span><br><span class="line">        <span class="keyword">let</span> filesArr = [];</span><br><span class="line"></span><br><span class="line">        (<span class="function"><span class="keyword">function</span> <span class="title">getFile</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 循环结束</span></span><br><span class="line">            <span class="keyword">if</span> (i == files.length) &#123;</span><br><span class="line">                <span class="comment">// 打印出所有目录</span></span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;目录&quot;</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(filesArr);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 判断目录是文件还是文件夹</span></span><br><span class="line">            fs.stat(<span class="string">&quot;../05fs/&quot;</span> + files[i], <span class="function">(<span class="params">err, stats</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (stats.isDirectory()) &#123;</span><br><span class="line">                    filesArr.push(files[i]);</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="comment">// 递归调用</span></span><br><span class="line">                getFile(i + <span class="number">1</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)(<span class="number">0</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>执行 fsDemo.js。<br>打印结果：   </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ &#x27;fs.js&#x27;, &#x27;fsDemo.js&#x27;, &#x27;fsStream.js&#x27;, &#x27;upload&#x27; ]</span><br><span class="line">目录</span><br><span class="line">[ &#x27;upload&#x27; ]</span><br></pre></td></tr></table></figure>

<h2 id="三、fs-流"><a href="#三、fs-流" class="headerlink" title="三、fs 流"></a>三、fs 流</h2><h3 id="1、fs-流及其读取"><a href="#1、fs-流及其读取" class="headerlink" title="1、fs 流及其读取"></a>1、fs 流及其读取</h3><p>首先创建一个 index.js 文件，并添加测试文本。<br>fsStream.js   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">// 流的方式读取文件</span></span><br><span class="line"><span class="keyword">const</span> fileReadStream = fs.createReadStream(<span class="string">&quot;index.js&quot;</span>);</span><br><span class="line"><span class="comment">// 读取次数</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 保存数据</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="comment">// 开始读取</span></span><br><span class="line">fileReadStream.on(<span class="string">&quot;data&quot;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;++count&#125;</span> 接收到：<span class="subst">$&#123;chunk.length&#125;</span>`</span>);</span><br><span class="line">    str += chunk;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 读取完成</span></span><br><span class="line">fileReadStream.on(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;结束&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(count);</span><br><span class="line">    <span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 读取失败</span></span><br><span class="line">fileReadStream.on(<span class="string">&quot;err&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 fsStream.js。<br>打印结果：   </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 接收到：18</span><br><span class="line">结束</span><br><span class="line">1</span><br><span class="line">fs 流及其读取</span><br></pre></td></tr></table></figure>

<h3 id="2、流的写入"><a href="#2、流的写入" class="headerlink" title="2、流的写入"></a>2、流的写入</h3><p>fsStream.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> data = <span class="string">&quot;存入数据...&quot;</span>;</span><br><span class="line"><span class="comment">// 创建一个可以写入的流，写入到 index.js</span></span><br><span class="line"><span class="keyword">let</span> fileWriteStream = fs.createWriteStream(<span class="string">&quot;index.js&quot;</span>);</span><br><span class="line"><span class="comment">// 开始写入</span></span><br><span class="line">fileWriteStream.write(data, <span class="string">&quot;utf8&quot;</span>);</span><br><span class="line"><span class="comment">// 写入完成</span></span><br><span class="line">fileWriteStream.end();</span><br><span class="line">fileWriteStream.on(<span class="string">&quot;finish&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;写入完成！&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>执行 fsStream.js。<br>打开 index.js 文件，发现里面内容变成了“存入数据…”。<br>打印结果：   </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">写入完成！   </span><br></pre></td></tr></table></figure>

<p>以上我们就通过流的形式进行了读取和写入的操作。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-02-18</span><i class="fa fa-tag"></i><a class="tag" href="/tags/前端开发/" title="前端开发">前端开发 </a><a class="tag" href="/tags/JavaScript/" title="JavaScript">JavaScript </a><a class="tag" href="/tags/Nodejs/" title="Nodejs">Nodejs </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://pingan8787.github.io/2019/02/18/141-【Nodejs】Nodejs文件管理模块fs/,pingan8787,141-【Nodejs】Nodejs文件管理模块fs,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2019/02/23/142-%E3%80%90CuteJavaScript%E3%80%91Angular6%E5%85%A5%E9%97%A8%E9%A1%B9%E7%9B%AE%EF%BC%881-%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%92%8C%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1%EF%BC%89/" title="142-【CuteJavaScript】Angular6入门项目（1.构建项目和创建路由）">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/02/16/140-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9122-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" title="140-【JavaScript】【重温基础】22.内存管理">Próximo post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>
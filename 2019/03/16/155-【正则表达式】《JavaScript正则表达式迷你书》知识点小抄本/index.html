<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><meta name="description" content="王平安个人博客,pingan8787,前端开发,人工智能,AI,深度学习,前端框架vue,angular,react,nodejs,python,numpy,pandas,anaconda,Tensorflow,高等数学,概率论,统计学神经网络,"><title>155-【正则表达式】《JavaScript正则表达式迷你书》知识点小抄本 · pingan8787</title><meta name="description" content="介绍这周开始学习老姚大佬的《JavaScript 正则表达式迷你书》 ， 然后习惯性的看完一遍后，整理一下知识点，便于以后自己重新复习。   
我个人觉得：自己整理下来的资料，对于知识重现，效果不错。   
感谢原书作者老姚，本文无意抄袭，只是作为自己知识点的整理，后续也会整理到自己的 JavaSc"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script type="text/javascript" src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js"></script><script type="text/javascript" src="https://hm.baidu.com/hm.js?de7c89214c05d551ef3ec12341cd0b9e"></script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;border-radius:15px;"><h3 title=""><a href="/">pingan8787</a></h3></div></div><ul class="my_tages_ul clearfix"><li class="my_tages_li next pagbuttons"><a class="btn" target="_blank" rel="noopener" href="http://www.pingan8787.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"> 前端开发</a></li><li class="my_tages_li next pagbuttons"><a class="btn btn" target="_blank" rel="noopener" href="http://www.pingan8787.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"> 人工智能</a></li><li class="my_tages_li next pagbuttons"><a class="btn btn" target="_blank" rel="noopener" href="http://www.pingan8787.com/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"> 深度学习</a></li></ul><ul class="my_icon"><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://github.com/pingan8787" title="github"><img src="http://images.pingan8787.com/assets/icon_26_github.png" alt="github"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://www.yuque.com/wangpingan/cute-frontend" title="语雀"><img src="http://images.pingan8787.com/assets/icon_26_yuque.png" alt="语雀"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/cute-javascript" title="知乎"><img src="http://images.pingan8787.com/icon_zhihu.png" alt="知乎"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://juejin.im/user/586fc337a22b9d0058807d53/posts" title="掘金"><img src="http://images.pingan8787.com/icon_juejin.png" alt="掘金"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://segmentfault.com/blog/pingan8787" title="思否"><img src="http://images.pingan8787.com/icon_sf.png" alt="思否"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36380426" title="CSDN"><img src="http://images.pingan8787.com/icon_csdn.png" alt="CSDN"></a></li><li class="my_icon_li"><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/2ec5d94afd60" title="简书"><img src="http://images.pingan8787.com/icon_jianshu.png" alt="简书"></a></li></ul><div style="text-align:center;"><wb:follow-button uid="1689651205" type="red_1" style="margin-top:10px;width:67px;height:24px;display: inline-block;"></wb:follow-button></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>博客作者：</span></a><a href="https://github.com/pingan8787" target="_blank"> pingan8787（leo）</a><div class="by_farbox"> <a href="https://beian.miit.gov.cn/" target="_blank">备案编号：闽ICP备17012095号-1</a></div></div></div><s></s><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/leo">关于Leo</a></li><li><a href="/production">作品</a></li><li><a href="/Catalog">目录</a></li><li><a href="http://js.pingan8787.com" target="_blank">Cute-JavaScript</a></li><li><a href="https://github.com/pingan8787" target="_blank">Github</a></li></div><!--.information//.back_btn
  //li
    //if is_post()
      //a.fa.fa-chevron-left(onclick="window.history.go(-1)") 
    //else
      //a.fa.fa-chevron-left(onclick="window.history.go(-1)",style="display:none;") 
//.avatar
//  img(src= url_for('images/logo@2x.png'))--></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>155-【正则表达式】《JavaScript正则表达式迷你书》知识点小抄本</a></h3></div><div class="post-content"><p><img src="http://images.pingan8787.com/cutejavascript-reg.png" alt="reg"></p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>这周开始学习<strong>老姚</strong>大佬的<a target="_blank" rel="noopener" href="https://github.com/qdlaoyao/js-regex-mini-book">《JavaScript 正则表达式迷你书》</a> ， 然后习惯性的看完一遍后，整理一下知识点，便于以后自己重新复习。   </p>
<p>我个人觉得：自己整理下来的资料，对于知识重现，效果不错。   </p>
<p>感谢原书作者<strong>老姚</strong>，本文无意抄袭，只是作为自己知识点的整理，后续也会整理到自己的 JavaScript知识库——<a target="_blank" rel="noopener" href="http://js.pingan8787.com/">《Cute-JavaScript》</a> 网站中。 </p>
<p><strong>另外，请读者们注意，这篇文章是知识点的整理，方便复习，所以不会介绍太详细，因为毕竟原书写得非常棒，刚入门的朋友，我还是建议看下原书。</strong>   </p>
<p><strong>然后可以看看这篇文章，来回顾重要知识点。</strong>   </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/qdlaoyao/js-regex-mini-book">《JavaScript 正则表达式迷你书》</a></li>
<li><a target="_blank" rel="noopener" href="http://js.pingan8787.com/">《Cute-JavaScript》</a></li>
</ul>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ul>
<li>一、正则表达式字符匹配</li>
<li>二、正则表达式位置匹配</li>
<li>三、正则表达式括号的使用</li>
<li>四、正则表达式回溯法原理</li>
<li>五、正则表达式的拆分</li>
<li>六、正则表达式的构建</li>
<li>七、正则表达式编程</li>
</ul>
<h3 id="文章推荐（补充中）"><a href="#文章推荐（补充中）" class="headerlink" title="文章推荐（补充中）"></a>文章推荐（补充中）</h3><ul>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5965943ff265da6c30653879">老姚 —— JS正则表达式完整教程</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/entry/581efdb7da2f60005d00ed65">常见的正则表达式可视化描述</a></li>
</ul>
<h3 id="工具推荐"><a href="#工具推荐" class="headerlink" title="工具推荐"></a>工具推荐</h3><ul>
<li><a target="_blank" rel="noopener" href="https://jex.im/regulex/#!flags=&re=%5E(a%7Cb)*%3F%24">Regulex</a></li>
<li><a target="_blank" rel="noopener" href="https://rubular.com/r/xfQHocREGj">Rubular</a></li>
</ul>
<h2 id="一、正则表达式字符匹配"><a href="#一、正则表达式字符匹配" class="headerlink" title="一、正则表达式字符匹配"></a>一、正则表达式字符匹配</h2><p>原书这么一句话，特别棒：<strong>正则表达式是匹配模式，要么匹配字符，要么匹配位置</strong>，要记住。   </p>
<h3 id="1-两种模糊匹配"><a href="#1-两种模糊匹配" class="headerlink" title="1. 两种模糊匹配"></a>1. 两种模糊匹配</h3><p>正则表达式的强大在于它的<strong>模糊匹配</strong>，这里介绍两个方向上的“模糊”：横向模糊和纵向模糊。   </p>
<ul>
<li>横向模糊匹配</li>
</ul>
<p>即一个正则可匹配的字符串长度不固定，可以是多种情况。   </p>
<p>如 <code>/ab&#123;2,5&#125;c/</code> 表示匹配： 第一个字符是 <code>&quot;a&quot;</code> ，然后是 2 - 5 个字符 <code>&quot;b&quot;</code> ，最后是字符 <code>&quot;c&quot;</code> ：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/ab&#123;2,5&#125;c/g</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;abc abbc abbbc abbbbbbc&quot;</span>;</span><br><span class="line">s.match(r); <span class="comment">// [&quot;abbc&quot;, &quot;abbbc&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>纵向模糊匹配</li>
</ul>
<p>即一个正则可匹配某个不确定的字符，可以有多种可能。   </p>
<p>如 <code>/[abc]/</code> 表示匹配 <code>&quot;a&quot;, &quot;b&quot;, &quot;c&quot;</code> 中任意一个。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/a[123]b/g</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;a0b a1b a4b&quot;</span>;</span><br><span class="line">s.match(r); <span class="comment">// [&quot;a1b&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-字符组"><a href="#2-字符组" class="headerlink" title="2. 字符组"></a>2. 字符组</h3><ul>
<li>范围表示法</li>
</ul>
<p>可以指定字符范围，比如 <code>[1234abcdUVWXYZ]</code> 就可以表示成 <code>[1-4a-dU-Z]</code> ，使用 <code>-</code> 来进行缩写。   </p>
<p>如果要匹配 <code>&quot;a&quot;, &quot;-&quot;, &quot;z&quot;</code> 中任意一个字符，可以这么写： <code>[-az]</code> 或 <code>[a\-z]</code> 或 <code>[az-]</code> 。   </p>
<ul>
<li>排除字符组</li>
</ul>
<p>即需要排除某些字符时使用，通过在字符组第一个使用 <code>^</code> 来表示取反，如 <code>[^abc]</code> 就表示匹配除了 <code>&quot;a&quot;, &quot;b&quot;, &quot;c&quot;</code> 的任意一个字符。   </p>
<ul>
<li>常见简写形式</li>
</ul>
<table>
<thead>
<tr>
<th align="center">字符组</th>
<th>具体含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>\d</code></td>
<td>表示 <code>[0-9]</code>，表示一位数字。</td>
</tr>
<tr>
<td align="center"><code>\D</code></td>
<td>表示 <code>[^0-9]</code>，表示除数字外的任意字符。</td>
</tr>
<tr>
<td align="center"><code>\w</code></td>
<td>表示 <code>[0-9a-zA-Z_]</code>，表示数字、大小写字母和下划线。</td>
</tr>
<tr>
<td align="center"><code>\W</code></td>
<td>表示 <code>[^0-9a-zA-Z_]</code>，表示非单词字符。</td>
</tr>
<tr>
<td align="center"><code>\s</code></td>
<td>表示 <code>[\t\v\n\r\f]</code>，表示空白符，包含空格、水平制表符、垂直制表符、换行符、回车符、换页符。</td>
</tr>
<tr>
<td align="center"><code>\S</code></td>
<td>表示 <code>[^\t\v\n\r\f]</code>，表示非空白字符。</td>
</tr>
<tr>
<td align="center"><code>.</code></td>
<td>表示 <code>[^\n\r\u2028\u2029]</code> 。通配符，表示几乎任意字符。换行符、回车符、行分隔符和段分隔符除外。</td>
</tr>
</tbody></table>
<p>然后表示<strong>任意字符</strong>，就可以使用 <code>[\d\D]</code>、<code>[\w\W]</code>、<code>[\s\S]</code> 和 <code>[^]</code> 任意一个。   </p>
<h3 id="3-量词"><a href="#3-量词" class="headerlink" title="3. 量词"></a>3. 量词</h3><p>量词也称重复，常用简写如下：</p>
<table>
<thead>
<tr>
<th align="center">量词</th>
<th>具体含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>&#123;m,&#125;</code></td>
<td>表示至少出现 m 次。</td>
</tr>
<tr>
<td align="center"><code>&#123;m&#125;</code></td>
<td>等价于 <code>&#123;m, m&#125;</code> ，表示出现 m 次。</td>
</tr>
<tr>
<td align="center"><code>?</code></td>
<td>等价于 <code>&#123;0, 1&#125;</code> ，表示出现或不出现。</td>
</tr>
<tr>
<td align="center"><code>+</code></td>
<td>等价于 <code>&#123;1, &#125;</code> ，表示至少出现1次。</td>
</tr>
<tr>
<td align="center"><code>*</code></td>
<td>等价于 <code>&#123;0, &#125;</code> ，表示出现任意次，也有可能不出现。</td>
</tr>
</tbody></table>
<ul>
<li>贪婪匹配和惰性匹配</li>
</ul>
<p>在正则 <code>/\d&#123;2,4&#125;/</code> ，表示数字连续出现 2 - 4 次，可以匹配到 2 位、 3 位、4 位连续数字。   </p>
<p>但是在 <strong>贪婪匹配</strong> 如 <code>/\d&#123;2,4&#125;/g</code> ，会<strong>尽可能多</strong>匹配，如超过 4 个，就只匹配 4 个，如有 3 个，就匹配 3 位。   </p>
<p>而在 <strong>惰性匹配</strong> 如 <code>/\d&#123;2,4&#125;?/g</code> ，会 <strong>尽可能少</strong> 匹配，如超过 2 个，就只匹配 2 个，不会继续匹配下去。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r1 = <span class="regexp">/\d&#123;2,4&#125;/g</span>;</span><br><span class="line"><span class="keyword">let</span> r2 = <span class="regexp">/\d&#123;2,4&#125;?/g</span>;</span><br><span class="line"><span class="keyword">let</span> s  = <span class="string">&quot;123 1234 12345&quot;</span>; </span><br><span class="line">s.match(r1); <span class="comment">// [&quot;123&quot;, &quot;1234&quot;, &quot;1234&quot;]</span></span><br><span class="line">s.match(r2); <span class="comment">// [&quot;12&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;]</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">惰性量词</th>
<th align="center">贪婪量词</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>&#123;m,m&#125;?</code></td>
<td align="center"><code>&#123;m,m&#125;</code></td>
</tr>
<tr>
<td align="center"><code>&#123;m,&#125;?</code></td>
<td align="center"><code>&#123;m,&#125;</code></td>
</tr>
<tr>
<td align="center"><code>??</code></td>
<td align="center"><code>?</code></td>
</tr>
<tr>
<td align="center"><code>+?</code></td>
<td align="center"><code>+</code></td>
</tr>
<tr>
<td align="center"><code>*?</code></td>
<td align="center"><code>*</code></td>
</tr>
</tbody></table>
<h3 id="4-多选分支"><a href="#4-多选分支" class="headerlink" title="4. 多选分支"></a>4. 多选分支</h3><p>即提供多个子匹配模式任选一个，使用 <code>|</code>(管道符)分隔，由于分支结构也是惰性，即匹配上一个后，就不会继续匹配后续的。   </p>
<p>格式如：<code>(r1|r2|r3)</code>，我们就可以使用 <code>/leo|pingan/</code> 来匹配 <code>&quot;leo&quot;</code> 和 <code>&quot;pingan&quot;</code>。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/leo|pingan/g</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;leo cool,pingan good.&quot;</span>;</span><br><span class="line">s.match(r);<span class="comment">// [&quot;leo&quot;, &quot;pingan&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多选分支的惰性表现</span></span><br><span class="line"><span class="keyword">let</span> r1 = <span class="regexp">/leo|leooo/g</span>;</span><br><span class="line"><span class="keyword">let</span> r2 = <span class="regexp">/leooo|leo/g</span>;</span><br><span class="line"><span class="keyword">let</span> s  = <span class="string">&quot;leooo&quot;</span>;</span><br><span class="line">s.match(r1);<span class="comment">// [&quot;leo&quot;]</span></span><br><span class="line">s.match(r2);<span class="comment">// [&quot;leooo&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="5-案例分析"><a href="#5-案例分析" class="headerlink" title="5. 案例分析"></a>5. 案例分析</h3><p>匹配字符，无非就是字符组、量词和分支结构的组合使用。   </p>
<ul>
<li>十六进制颜色值匹配</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/#[0-9a-fA-F]&#123;6&#125;|#[0-9a-fA-F]&#123;3&#125;/g</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;#ffaacc #Ff00DD #fFF #01d #9Gd&quot;</span>;</span><br><span class="line">s.match(r); <span class="comment">// [&quot;#ffaacc&quot;, &quot;#Ff00DD&quot;, &quot;#fFF&quot;, &quot;#01d&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>时间和日期匹配</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时间 12:23 或 01:09</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^([01][0-9]|[2][0-3]):[0-5][0-9]$/</span>;  </span><br><span class="line">r.test(<span class="string">&quot;23:25&quot;</span>); <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;03:05&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间 12:23 或 1:9</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^(0?[0-9]|1[0-9]|[2][0-3]):(0?[0-9]|[1-5][0-9])$/</span>;  </span><br><span class="line">r.test(<span class="string">&quot;23:25&quot;</span>); <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;03:05&quot;</span>); <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;3:5&quot;</span>);   <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期 yyyy-mm-dd</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^[0-9]&#123;4&#125;-(0[1-9]|[1][0-2])-(0[1-9]|[12][0-9]|3[01])$/</span>;</span><br><span class="line">r.test(<span class="string">&quot;2019-09-19&quot;</span>); <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;2019-09-32&quot;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Windows操作系统文件路径匹配</li>
</ul>
<p>盘符使用 <code>[a-zA-Z]:\\</code> ，这里需要注意 <code>\</code> 字符需要转义，并且盘符不区分大小写；<br>文件名或文件夹名，不能包含特殊字符，使用 <code>[^\\:*&lt;&gt;|&quot;?\r\n/]</code> 表示合法字符；<br>并且至少有一个字符，还有可以出现任意次，就可以使用 <code>([^\\:*&lt;&gt;|&quot;?\r\n/]+\\)*</code> 匹配任意个 <code>文件夹\</code>；<br>还有路径最后一部分可以是 <code>文件夹</code> ，即没有 <code>\</code> 于是表示成 <code>([^\\:*&lt;&gt;|&quot;?\r\n/]+)?</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^[a-zA-Z]:\\([^\\:*&lt;&gt;|&quot;?\r\n/]+\\)*([^\\:*&lt;&gt;|&quot;?\r\n/]+)?$/</span>;</span><br><span class="line">r.test(<span class="string">&quot;C:\\document\\leo\\a.png&quot;</span>); <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;C:\\document\\leo\\&quot;</span>);      <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;C:\\document&quot;</span>);             <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;C:\\&quot;</span>);                     <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>id匹配</li>
</ul>
<p>如提取 <code>&lt;div id=&quot;leo&quot; class=&quot;good&quot;&gt;&lt;/id&gt;</code> 中的 <code>id=&quot;leo&quot;</code> ：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r1 = <span class="regexp">/id=&quot;.*&quot;/</span>;    <span class="comment">// tips1</span></span><br><span class="line"><span class="keyword">let</span> r2 = <span class="regexp">/id=&quot;.*?&quot;/</span>;   <span class="comment">// tips2</span></span><br><span class="line"><span class="keyword">let</span> r3 = <span class="regexp">/id=&quot;[^&quot;]*&quot;/</span>; <span class="comment">// tips3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s  = <span class="string">&#x27;&lt;div id=&quot;leo&quot; class=&quot;good&quot;&gt;&lt;/id&gt;&#x27;</span>;</span><br><span class="line">s.match(r1)[<span class="number">0</span>];  <span class="comment">// id=&quot;leo&quot; class=&quot;good&quot;</span></span><br><span class="line">s.match(r2)[<span class="number">0</span>];  <span class="comment">// id=&quot;leo&quot;</span></span><br><span class="line">s.match(r3)[<span class="number">0</span>];  <span class="comment">// id=&quot;leo&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>tips1</strong>：由于 <code>.</code> 匹配双引号，且 <code>*</code> 贪婪，就会持续匹配到最后一个双引号结束。<br><strong>tips2</strong>：使用惰性匹配，但效率低，有<strong>回溯</strong>问题。<br><strong>tips3</strong>：最终优化。   </p>
<h2 id="二、正则表达式位置匹配"><a href="#二、正则表达式位置匹配" class="headerlink" title="二、正则表达式位置匹配"></a>二、正则表达式位置匹配</h2><p>位置匹配，就是要匹配每个字符两边的位置。    </p>
<p>在 <code>ES5</code> 中有6个位置： <code>^</code>，<code>$</code>，<code>\b</code>，<code>\B</code>，<code>(?=p)</code> 和 <code>(?!p)</code>。  </p>
<p>另外把位置理解成空字符是非常有用的：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/^^hello$$/.test(<span class="string">&#x27;hello&#x27;</span>);  <span class="comment">// true</span></span><br><span class="line"><span class="regexp">/^^^hello$$/</span>.test(<span class="string">&#x27;hello&#x27;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="1-和"><a href="#1-和" class="headerlink" title="1. ^ 和 $"></a>1. ^ 和 $</h3><p><code>^</code> 匹配开头，多行中匹配行开头。<br><code>$</code> 匹配结尾，多行中匹配行结尾。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello&quot;</span>.replace(<span class="regexp">/^|$/g</span>, <span class="string">&quot;#&quot;</span>); <span class="comment">// &quot;#hello#&quot;</span></span><br><span class="line"><span class="string">&quot;hello\nleo\nhaha&quot;</span>.replace(<span class="regexp">/^|$/gm</span>, <span class="string">&quot;#&quot;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#hello#</span></span><br><span class="line"><span class="comment">#leo#</span></span><br><span class="line"><span class="comment">#haha#</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>多行匹配模式使用 <code>m</code> 修饰符。  </p>
<h3 id="2-b-和-B"><a href="#2-b-和-B" class="headerlink" title="2. \b 和 \B"></a>2. <code>\b</code> 和 <code>\B</code></h3><p><code>\b</code> 匹配单词边界，即 <code>\w</code> 和 <code>\W</code> 之间的位置，包括 <code>\w</code> 和 <code>^</code> 之间的位置，和 <code>\w</code> 和 <code>$</code> 之间的位置。<br><code>\B</code> 和  <code>\b</code> 相反，即非单词边界，匹配中除去 <code>\b</code>，剩下的都是 <code>\B</code> 的。<br>也就是 <code>\w</code> 与 <code>\w</code>、 <code>\W</code> 与 <code>\W</code>、<code>^</code> 与 <code>\W</code>，<code>\W</code> 与 <code>$</code> 之间的位置。。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;[HI] Leo_1.mp4&quot;</span>.replace(<span class="regexp">/\b/g</span>,<span class="string">&quot;#&quot;</span>);</span><br><span class="line"><span class="comment">// &quot;[#HI#] #Leo_1#.#mp4#&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;[HI] Leo_1.mp4&quot;</span>.replace(<span class="regexp">/\B/g</span>,<span class="string">&quot;#&quot;</span>);</span><br><span class="line"><span class="comment">// &quot;#[H#I]# L#e#o#_#1.m#p#4&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-p-和-p"><a href="#3-p-和-p" class="headerlink" title="3. (?=p) 和 (?!p)"></a>3. <code>(?=p)</code> 和 <code>(?!p)</code></h3><p><code>p</code> 为一个子模式，即 <code>(?=p)</code> 匹配前面是 <code>p</code> 的位置，而 <code>(?!p)</code> 则匹配前面不是 <code>p</code> 的位置。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello&quot;</span>.replace(<span class="regexp">/(?=l)/g</span>, <span class="string">&quot;#&quot;</span>);</span><br><span class="line"><span class="comment">// &quot;he#l#lo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;hello&quot;</span>.replace(<span class="regexp">/(?!l)/g</span>, <span class="string">&quot;#&quot;</span>);</span><br><span class="line"><span class="comment">// &quot;#h#ell#o#&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-相关案例"><a href="#4-相关案例" class="headerlink" title="4. 相关案例"></a>4. 相关案例</h3><ul>
<li>匹配数字千位分隔符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配最后一个逗号</span></span><br><span class="line"><span class="string">&quot;12345678&quot;</span>.replace(<span class="regexp">/(?=\d&#123;3&#125;$)/g</span>, <span class="string">&quot;,&quot;</span>); <span class="comment">// &quot;12345,678&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配所有逗号</span></span><br><span class="line"><span class="string">&quot;12345678&quot;</span>.replace(<span class="regexp">/(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">&quot;,&quot;</span>); <span class="comment">// &quot;12,345,678&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配其余</span></span><br><span class="line"><span class="string">&quot;123456789&quot;</span>.replace(<span class="regexp">/(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">&quot;,&quot;</span>); <span class="comment">// &quot;,123,456,789&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改</span></span><br><span class="line"><span class="string">&quot;123456789&quot;</span>.replace(<span class="regexp">/(?!^)(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">&quot;,&quot;</span>); <span class="comment">// &quot;12,345,678&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他形式</span></span><br><span class="line"><span class="string">&quot;12345678 123456789&quot;</span>.replace(<span class="regexp">/(?!\b)(?=(\d&#123;3&#125;)+\b)/g</span>, <span class="string">&quot;,&quot;</span>); </span><br><span class="line"><span class="comment">// (?!\b) 等于 \B ，要求当前是一个位置，但不是 \b 前面的位置</span></span><br><span class="line"><span class="comment">// &quot;12,345,678 123,456,789&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数据格式化</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">1888</span>;</span><br><span class="line">num.toFixed(<span class="number">2</span>).replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+\b)/g</span>, <span class="string">&quot;,&quot;</span>).replace(<span class="regexp">/^/</span>,<span class="string">&quot;$$ &quot;</span>);</span><br><span class="line"><span class="comment">// &quot;$ 1,888.00&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>验证密码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 密码长度 6-12 位数字或字母</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^[0-9A-Za-z]&#123;6,12&#125;$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 必须包含一个字符（数字） + 密码长度 6-12 位数字或字母</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/(?=.*[0-9])^[0-9A-Za-z]&#123;6,12&#125;$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 必须包含两个个字符（数字和小写字符）  + 密码长度 6-12 位数字或字母</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/(?=.*[0-9])(?=.*[a-z])^[0-9A-Za-z]&#123;6,12&#125;$/</span>;</span><br><span class="line"></span><br><span class="line">r.test(<span class="string">&quot;aa1234566&quot;</span>); <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;1234566&quot;</span>);   <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码长度 6-12 位数字或字母 </span></span><br><span class="line"><span class="comment">// 即 不能全是数字 或 不能全是大写或小写字母</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/(?!^[0-9]&#123;6,12&#125;$)(?!^[a-z]&#123;6,12&#125;$)(?!^[A-Z]&#123;6,12&#125;$)^[0-9A-Za-z]&#123;6,12&#125;$/</span>;</span><br></pre></td></tr></table></figure>

<h2 id="三、正则表达式括号的使用"><a href="#三、正则表达式括号的使用" class="headerlink" title="三、正则表达式括号的使用"></a>三、正则表达式括号的使用</h2><p>简单理解：括号提供了分组，便于我们使用它。   </p>
<p>通常有两种引用情况：在<strong>JS代码中引入</strong>，和<strong>在正则表达式中引入</strong>。   </p>
<p>分组和分支结构，主要是强调括号内是一个整体，即提供子表达式。   </p>
<ul>
<li>分组如 <code>/(ab)+/g</code> 匹配连续出现的 <code>ab</code>  。  </li>
<li>分支结构如 <code>/(a|b)+/g</code> 匹配出现的 <code>a</code> 或 <code>b</code> 表达式。  </li>
</ul>
<h3 id="1-分组引用"><a href="#1-分组引用" class="headerlink" title="1.分组引用"></a>1.分组引用</h3><p>如在日期匹配的时候，就可以这么改造：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原来</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>提取数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;2019-03-14&quot;</span>.match(r);</span><br><span class="line">r.exec(<span class="string">&quot;2019-03-14&quot;</span>);</span><br><span class="line"><span class="comment">// [&quot;2019-03-14&quot;, &quot;2019&quot;, &quot;03&quot;, &quot;14&quot;, index: 0, input: &quot;2019-03-14&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">RegExp</span>.$1; <span class="comment">// &quot;2019&quot;</span></span><br><span class="line"><span class="built_in">RegExp</span>.$2; <span class="comment">// &quot;03&quot;</span></span><br><span class="line"><span class="built_in">RegExp</span>.$3; <span class="comment">// &quot;14&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>替换</li>
</ul>
<p>将 <code>yyyy-mm-dd</code> 转成 <code>mm/dd/yyyy</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;2019-03-14&quot;</span>.replace(r, <span class="string">&quot;$2/$3/$1&quot;</span>);</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="string">&quot;2019-03-14&quot;</span>.replace(r, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">RegExp</span>.$2 + <span class="string">&#x27;/&#x27;</span> + <span class="built_in">RegExp</span>.$3 + <span class="string">&#x27;/&#x27;</span> + <span class="built_in">RegExp</span>.$1;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-反向引用"><a href="#2-反向引用" class="headerlink" title="2. 反向引用"></a>2. 反向引用</h3><p>使用 <code>\n</code> 表示第 <code>n</code> 个分组，比如 <code>\1</code> 表示第 <code>1</code> 个分组：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/\d&#123;4&#125;(-|\/|\.)\d&#123;2&#125;\1\d&#123;2&#125;/</span>;</span><br><span class="line">r.test(<span class="string">&quot;2019-03-15&quot;</span>);</span><br><span class="line">r.test(<span class="string">&quot;2019/03/15&quot;</span>);</span><br><span class="line">r.test(<span class="string">&quot;2019.03.15&quot;</span>);</span><br><span class="line">r.test(<span class="string">&quot;2019-03/15&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>多个括号嵌套</li>
</ul>
<p>按照开括号的顺序：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^((\d)(\d(\d)))\1\2\3\4$/</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;1231231233&quot;</span>;</span><br><span class="line">r.test(s);</span><br><span class="line"><span class="built_in">console</span>.log([<span class="built_in">RegExp</span>.$1,<span class="built_in">RegExp</span>.$2,<span class="built_in">RegExp</span>.$3,<span class="built_in">RegExp</span>.$4]);</span><br><span class="line"><span class="comment">// [&quot;123&quot;, &quot;1&quot;, &quot;23&quot;, &quot;3&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>特殊情况</li>
</ul>
<p><code>\10</code> 表示的是第 10 个分组，若要匹配 <code>\</code> 和 <code>0</code> 时，使用 <code>(?:\1)0</code> 或 <code>\1(?:0)</code>。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/(1)(2)(3)(4)(5)(6)(7)(8)(9)(#) \10+/</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;123456789# #####&quot;</span>;</span><br><span class="line">r.test(s);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>当引用不存在的分组</li>
</ul>
<p>如匹配 <code>\2</code> 是前面不存在，则匹配 <code>\2</code> 本身，即对 <code>2</code> 的转义，不同浏览器可能不同：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/\1\2\3\4/</span>;</span><br><span class="line">r.test(<span class="string">&quot;\1\2\3\4&quot;</span>);  <span class="comment">// true</span></span><br><span class="line"><span class="string">&quot;\1\2\3\4&quot;</span>.split(<span class="string">&#x27;&#x27;</span>);<span class="comment">// [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>分组后面有量词</li>
</ul>
<p>当分组后面有量词的话，则捕获的是最后一次的匹配：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;12345&quot;</span>.match(<span class="regexp">/(\d)+/</span>); <span class="comment">// [&quot;12345&quot;, &quot;5&quot;, index: 0, input: &quot;12345&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">/(\d)+ \1/</span>.test(<span class="string">&quot;12345 1&quot;</span>); <span class="comment">// false</span></span><br><span class="line"><span class="regexp">/(\d)+ \1/</span>.test(<span class="string">&quot;12345 5&quot;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="3-相关案例"><a href="#3-相关案例" class="headerlink" title="3. 相关案例"></a>3. 相关案例</h3><p>这里只写出核心代码。 </p>
<ul>
<li>模拟字符串 <code>trim</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 匹配首尾空白符，替换成空字符</span></span><br><span class="line"><span class="string">&quot;  aaa   &quot;</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">&quot;&quot;</span>);      <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 匹配整个字符串，再用引用提取对应数据</span></span><br><span class="line"><span class="string">&quot;  aaa   &quot;</span>.replace(<span class="regexp">/^\s*(.*?)\s*$/g</span>, <span class="string">&quot;$1&quot;</span>);<span class="comment">// &quot;aaa&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>每个单词首字母大写</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hi leo hi boy!&quot;</span>.toLowerCase().replace(</span><br><span class="line">    <span class="regexp">/(?:^|\s)\w/g</span>, </span><br><span class="line">    <span class="function"><span class="params">c</span> =&gt;</span> c.toUpperCase()</span><br><span class="line">);</span><br><span class="line"><span class="comment">// &quot;Hi Leo Hi Boy!&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>驼峰化 和 中划线化</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;-leo-and-pingan&quot;</span>.replace(<span class="regexp">/[-_\s]+(.)?/g</span>,</span><br><span class="line">    <span class="function">(<span class="params">match, c</span>) =&gt;</span> c ? c.toUpperCase() : <span class="string">&#x27;&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// &quot;LeoAndPingan&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;LeoAndPingan&quot;</span>.replace(<span class="regexp">/([A-Z])/g</span>, <span class="string">&quot;-$1&quot;</span>).replace(</span><br><span class="line">    <span class="regexp">/[-_\s]+g/</span>,<span class="string">&quot;-&quot;</span></span><br><span class="line">).toLowerCase();</span><br><span class="line"><span class="comment">// &quot;-leo-and-pingan&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>匹配成对HTML标签</li>
</ul>
<p>匹配成对标签 <code>&lt;h1&gt;leo&lt;\h1&gt;</code>，而不匹配不成对标签 <code>&lt;h1&gt;leo&lt;\h2&gt;</code>。 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/&lt;([^&gt;]+)&gt;[\d\D]*&lt;\/\1&gt;/</span>;</span><br><span class="line">r.test(<span class="string">&quot;&lt;h1&gt;leo leo leo&lt;/h1&gt;&quot;</span>);  <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;&lt;a&gt;leo leo leo&lt;/a&gt;&quot;</span>);    <span class="comment">// true</span></span><br><span class="line">r.test(<span class="string">&quot;&lt;h1&gt;leo leo leo&lt;/h2&gt;&quot;</span>);  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>


<h2 id="四、正则表达式回溯法原理"><a href="#四、正则表达式回溯法原理" class="headerlink" title="四、正则表达式回溯法原理"></a>四、正则表达式回溯法原理</h2><p>概念理解起来比较容易。<br>比如用 <code>/ab&#123;1,3&#125;c/</code> 去匹配下面两个字符串。   </p>
<ul>
<li><p>当匹配 <code>abbbc</code>，按顺序匹配，到了第 3 个 <code>b</code> 后，直接匹配 <code>c</code>，这样就没有回溯。   </p>
</li>
<li><p>当匹配 <code>abbc</code>，按顺序匹配，到了第 2 个 <code>b</code> 后，由于规则是 <code>b&#123;1,3&#125;</code> ，则会继续往下匹配，然后发现下一位是 <code>c</code>，于是回退到前一个位置，重新匹配，这就是回溯。   </p>
</li>
</ul>
<p>另外像 <code>/&quot;.*&quot;/</code> 来匹配 <code>&quot;abc&quot;de</code> 的话，就会有三个回溯情况，为了减少不必要的回溯，我们可以把正则修改为 <code>/&quot;[^&quot;]*&quot;/</code>。</p>
<p><strong>介绍</strong>   </p>
<p>回溯法，也称试探法，本质上是深度优先探索算法，基本思路是：匹配过程中后退到之前某一步重新探索的过程。</p>
<h3 id="1-常见的回溯形式"><a href="#1-常见的回溯形式" class="headerlink" title="1. 常见的回溯形式"></a>1. 常见的回溯形式</h3><ul>
<li>贪婪量词</li>
</ul>
<p>多个贪婪量词挨着存在，并相互冲突时，会看匹配顺序，深度优先搜索：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;12345&quot;</span>.match(<span class="regexp">/(\d&#123;1,3&#125;)(\d&#123;1,3&#125;)/</span>);</span><br><span class="line"><span class="comment">//  [&quot;12345&quot;, &quot;123&quot;, &quot;45&quot;, index: 0, input: &quot;12345&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>惰性量词</li>
</ul>
<p>有时候会因为回溯，导致实际惰性量词匹配到的不是最少的数量：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;12345&quot;</span>.match(<span class="regexp">/(\d&#123;1,3&#125;?)(\d&#123;1,3&#125;)/</span>);</span><br><span class="line"><span class="comment">// 没有回溯的情况 [&quot;1234&quot;, &quot;1&quot;, &quot;234&quot;, index: 0, input: &quot;12345&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;12345&quot;</span>.match(<span class="regexp">/^\d&#123;1,3&#125;?\d&#123;1,3&#125;$/</span>);</span><br><span class="line"><span class="comment">// 有回溯的情况 [&quot;12345&quot;, index: 0, input: &quot;12345&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>分支结构</li>
</ul>
<p>分支机构，如果一个分支整体不匹配，会继续尝试剩下分支，也可以看成一种回溯。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;candy&quot;</span>.match(<span class="regexp">/can|candy/</span>); <span class="comment">// [&quot;can&quot;, index: 0, input: &quot;candy&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;candy&quot;</span>.match(<span class="regexp">/^(?:can|candy)$/</span>); <span class="comment">// [&quot;candy&quot;, index: 0, input: &quot;candy&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-本章小结"><a href="#2-本章小结" class="headerlink" title="2. 本章小结"></a>2. 本章小结</h3><p>简单总结：一个个尝试，直到，要么后退某一步整体匹配成功，要么最后试完发现整体不匹配。   </p>
<ul>
<li><p>贪婪量词：买衣服砍价，价格高了，便宜点，再便宜点。  </p>
</li>
<li><p>懒惰量词：卖衣服加价，价格低了，多给点，再多给点。</p>
</li>
<li><p>分支结构：货比三家，一家不行换一家，不行再换。</p>
</li>
</ul>
<h2 id="五、正则表达式的拆分"><a href="#五、正则表达式的拆分" class="headerlink" title="五、正则表达式的拆分"></a>五、正则表达式的拆分</h2><p>拆分正则代码块，是理解正则的关键。   </p>
<p>在 JavaScrip 正则表达式有以下结构：   </p>
<ul>
<li>字面量： 匹配一个具体字符，如 <code>a</code> 匹配字符 <code>a</code>。</li>
<li>字符组： 匹配一个有多种可能性的字符，如 <code>[0-9]</code> 匹配任意一个数字。  </li>
<li>量词： 匹配一个连续出现的字符，如 <code>a&#123;1,3&#125;</code> 匹配连续最多出现 3 次的<code>a</code>字符。  </li>
<li>锚： 匹配一个位置，如 <code>^</code> 匹配字符串的开头。  </li>
<li>分组： 匹配一个整体，如 <code>(ab)</code> 匹配 <code>ab</code> 两个字符连续出现。   </li>
<li>分支： 匹配一个或多个表达式，如 <code>ab|bc</code> 匹配 <code>ab</code> 或 <code>bc</code> 字符。   </li>
</ul>
<p>另外还有以下操作符：   </p>
<table>
<thead>
<tr>
<th align="center">优先级</th>
<th align="center">操作符描述</th>
<th>操作符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">转义符</td>
<td><code>\</code></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">括号和方括号</td>
<td><code>(...)</code>/<code>(?:...)</code>/<code>(?=...)</code>/<code>(?!...)</code>/<code>[...]</code></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">量词限定符</td>
<td><code>&#123;m&#125;</code>/<code>&#123;m,n&#125;</code>/<code>&#123;m,&#125;</code>/<code>?</code>/<code>*</code>/<code>+</code></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">位置和序列</td>
<td><code>^</code>/<code>$</code>/<code>\元字符</code>/<code>一般字符</code></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">管道符</td>
<td>`</td>
</tr>
</tbody></table>
<p><strong>Tips</strong>：优先级从上到下，由高到低。  </p>
<h3 id="1-注意要点"><a href="#1-注意要点" class="headerlink" title="1. 注意要点"></a>1. 注意要点</h3><ul>
<li>匹配字符串整体</li>
</ul>
<p>不能写成 <code>/^abc|bcd$/</code> ，而是要写成 <code>/^(abc|bcd)$/</code>。</p>
<ul>
<li>量词连缀问题</li>
</ul>
<p>需要匹配：每个字符是 <code>a</code>/<code>b</code>/<code>c</code> 中其中一个，并且字符串长度是 3 的倍数：   </p>
<p>不能写成 <code>/^[abc]&#123;3&#125;+$/</code> ，而是要写成 <code>/([abc]&#123;3&#125;)+/</code>。  </p>
<ul>
<li>元字符转义问题</li>
</ul>
<p>元字符就是正则中的特殊字符，当匹配元字符就需要转义，如：    </p>
<p><code>^</code>、<code>$</code>、<code>.</code>、<code>*</code>、<code>+</code>、<code>?</code>、<code>|</code>、<code>\</code>、<code>/</code>、<code>(</code>、<code>)</code>、<code>[</code>、<code>]</code>、<code>&#123;</code>、<code>&#125;</code>、<code>=</code>、<code>!</code>、<code>:</code>、<code>-</code> 。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;[abc]&quot;  =&gt; /\[abc\]/ 或者 /\[abc]/ </span></span><br><span class="line"><span class="comment">// &quot;&#123;1,3&#125;&quot;  =&gt; /\&#123;1\&#125;/ 或者 /\&#123;1&#125;/ 因为不构成字符组</span></span><br></pre></td></tr></table></figure>

<h3 id="2-案例分析"><a href="#2-案例分析" class="headerlink" title="2. 案例分析"></a>2. 案例分析</h3><ul>
<li>身份证号码</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^(\d&#123;<span class="number">15</span>&#125;|\d&#123;<span class="number">17</span>&#125;)[\dxX]$/.test(<span class="string">&quot;390999199999999999&quot;</span>);<span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>IPV4地址</li>
</ul>
<p>需要好好分析：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^((0&#123;0,2&#125;\d|0?\d&#123;2&#125;|1\d&#123;2&#125;|2[0-4]\d|25[0-5])\.)&#123;3&#125;(0&#123;0,2&#125;\d|0?\d&#123;2&#125;|1\d&#123;2&#125;|2[0-4]\d|25[0-5])$/</span></span><br></pre></td></tr></table></figure>


<h2 id="六、正则表达式的构建"><a href="#六、正则表达式的构建" class="headerlink" title="六、正则表达式的构建"></a>六、正则表达式的构建</h2><p>正则的构建需要考虑以下几点的平衡：  </p>
<ul>
<li>匹配预期的字符串</li>
<li>不匹配非预期的字符串</li>
<li>可读性和可维护性</li>
<li>效率</li>
</ul>
<p>我们还需要考虑这么几个问题：  </p>
<ul>
<li>是否需要使用正则  </li>
</ul>
<p>如能使用其他 API 简单快速解决问题就不需要使用正则：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;2019-03-16&quot;</span>.match(<span class="regexp">/^(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span>); <span class="comment">// 间接获取 [&quot;2019&quot;, &quot;03&quot;, &quot;16&quot;]</span></span><br><span class="line"><span class="string">&quot;2019-03-16&quot;</span>.split(<span class="string">&quot;-&quot;</span>); <span class="comment">//  [&quot;2019&quot;, &quot;03&quot;, &quot;16&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;?id=leo&quot;</span>.search(<span class="regexp">/\?/</span>); <span class="comment">// 0</span></span><br><span class="line"><span class="string">&quot;?id=leo&quot;</span>.indexOf(<span class="string">&quot;?&quot;</span>); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;JavaScript&quot;</span>.match(<span class="regexp">/.&#123;4&#125;(.+)/</span>)[<span class="number">1</span>];  <span class="comment">// &quot;Script&quot;</span></span><br><span class="line"><span class="string">&quot;JavaScript&quot;</span>.substring(<span class="number">4</span>);          <span class="comment">// &quot;Script&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>是否需要使用复杂正则</li>
</ul>
<p><code>/(?!^[0-9]&#123;6,12&#125;$)(?!^[a-z]&#123;6,12&#125;$)(?!^[A-Z]&#123;6,12&#125;$)^[0-9A-Za-z]&#123;6,12&#125;$/</code> </p>
<p>将这个正则拆分成多个小块，如下：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex1 = <span class="regexp">/^[0-9A-Za-z]&#123;6,12&#125;$/</span>;</span><br><span class="line"><span class="keyword">var</span> regex2 = <span class="regexp">/^[0-9]&#123;6,12&#125;$/</span>;</span><br><span class="line"><span class="keyword">var</span> regex3 = <span class="regexp">/^[A-Z]&#123;6,12&#125;$/</span>;</span><br><span class="line"><span class="keyword">var</span> regex4 = <span class="regexp">/^[a-z]&#123;6,12&#125;$/</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkPassword</span> (<span class="params">string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!regex1.test(string)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (regex2.test(string)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (regex3.test(string)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (regex4.test(string)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-准确性"><a href="#1-准确性" class="headerlink" title="1. 准确性"></a>1. 准确性</h3><p>即需要匹配到预期目标，且不匹配非预期的目标。</p>
<ul>
<li>匹配固定电话</li>
</ul>
<p>如需要匹配下面固定电话号码，可以分别写出对应正则： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">055188888888     =&gt; /^0\d&#123;2,3&#125;[1-9]\d&#123;6,7&#125;$/</span><br><span class="line">0551-88888888    =&gt; /^0\d&#123;2,3&#125;-[1-9]\d&#123;6,7&#125;$/</span><br><span class="line">(0551)88888888   =&gt; /^0\d&#123;2,3&#125;-[1-9]\d&#123;6,7&#125;$/</span><br></pre></td></tr></table></figure>

<p>然后合并：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^0\d&#123;2,3&#125;[1-9]\d&#123;6,7&#125;$|^0\d&#123;2,3&#125;-[1-9]\d&#123;6,7&#125;$|^\(0\d&#123;2,3&#125;\)[1-9]\d&#123;6,7&#125;$/</span></span><br></pre></td></tr></table></figure>

<p>然后提取公共部分：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^(0\d&#123;2,3&#125;|0\d&#123;2,3&#125;-|\(0\d&#123;2,3&#125;\))[1-9]\d&#123;6,7&#125;$/</span></span><br></pre></td></tr></table></figure>

<p>再优化：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^(0\d&#123;2,3&#125;-?|\(0\d&#123;2,3&#125;\))[1-9]\d&#123;6,7&#125;$/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>匹配浮点数</li>
</ul>
<p>先确定，符号部分（<code>[+-]</code>）、整数部分（<code>\d+</code>）和小数部分（<code>\.\d+</code>）。   </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.23、+1.23、-1.23  =&gt; /^[+-]?\d+\.\d+$/</span><br><span class="line">10、+10、-10        =&gt; /^[+-]?\d+$/</span><br><span class="line">.2、+.2、-.2        =&gt; /^[+-]?\.\d+$/</span><br></pre></td></tr></table></figure>

<p>整理后：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^[+-]?(\d+\.\d+|\d+|\.\d+)$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 考虑不匹配 +.2 或 -.2</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^([+-])?(\d+\.\d+|\d+|\.\d+)$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 考虑不匹配 012 这类 0 开头的整数</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^[+-]?(\d+)?(\.)?\d+$/</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-效率"><a href="#2-效率" class="headerlink" title="2. 效率"></a>2. 效率</h3><p>正则表达式运行过程：  </p>
<ol>
<li>编译  </li>
<li>设定起始位置  </li>
<li>尝试匹配  </li>
<li>若匹配失败则返回前一步重新匹配  </li>
<li>返回匹配成功失败的结果     </li>
</ol>
<p>我们常常优化对 <code>3 和 4</code> 步进行优化：   </p>
<ul>
<li>使用具体字符组替代通配符，消除回溯</li>
</ul>
<p>如 <code> /&quot;[^&quot;]*&quot;/</code> 代替 <code>/&quot;.*?&quot;/</code>。  </p>
<ul>
<li>使用非捕获型分组</li>
</ul>
<p>当不需要使用分组引用和反向引用时，此时可以使用非捕获分组。</p>
<p>如 <code>/^[-]?(?:\d\.\d+|\d+|\.\d+)$/</code> 代替 <code>/^[-]?(\d\.\d+|\d+|\.\d+)$/</code>。</p>
<ul>
<li>独立出确定字符</li>
</ul>
<p>加快判断是否匹配失败，进而加快移位的速度。</p>
<p>如 <code>/aa*/</code> 代替 <code>/a+/</code>。</p>
<ul>
<li>提取分支公共部分</li>
</ul>
<p>减少匹配过程中可消除的重复。</p>
<p>如 <code>/^(?:abc|def)/</code> 代替 <code>/^abc|^def/</code>。</p>
<ul>
<li>减少分支的数量，缩小它们的范围</li>
</ul>
<p>如 <code>/rea?d/</code> 代替 <code>/red|read/</code>。</p>
<h2 id="七、正则表达式编程"><a href="#七、正则表达式编程" class="headerlink" title="七、正则表达式编程"></a>七、正则表达式编程</h2><p>这里要掌握正则表达式怎么用，通常会有这么四个操作：  </p>
<ul>
<li>验证</li>
<li>切分</li>
<li>提取</li>
<li>替换</li>
</ul>
<h3 id="1-四种操作"><a href="#1-四种操作" class="headerlink" title="1. 四种操作"></a>1. 四种操作</h3><ul>
<li>验证</li>
</ul>
<p><strong>匹配</strong>本质上是<strong>查找</strong>，我们可以借助相关API操作：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查字符串是否包含数字</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/\d/</span>, s = <span class="string">&quot;abc123&quot;</span>;</span><br><span class="line">!!s.search(r); <span class="comment">// true</span></span><br><span class="line">r.test(s);     <span class="comment">// true</span></span><br><span class="line">!!s.match(r);  <span class="comment">// true</span></span><br><span class="line">!!r.exec(s);   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>切分</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;leo,pingan&quot;</span>.split(<span class="regexp">/,/</span>); <span class="comment">// [&quot;leo&quot;, &quot;pingan&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/\D/</span>, s = <span class="string">&quot;2019-03-16&quot;</span>;</span><br><span class="line">s.split(r);   <span class="comment">// [&quot;2019&quot;, &quot;03&quot;, &quot;16&quot;]</span></span><br><span class="line">s.split(r);   <span class="comment">// [&quot;2019&quot;, &quot;03&quot;, &quot;16&quot;]</span></span><br><span class="line">s.split(r);   <span class="comment">// [&quot;2019&quot;, &quot;03&quot;, &quot;16&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>提取</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 提取日期年月日</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="regexp">/^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/</span>;</span><br><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;2019-03-16&quot;</span>;</span><br><span class="line"></span><br><span class="line">s.match(r); <span class="comment">// [&quot;2019-03-16&quot;, &quot;2019&quot;, &quot;03&quot;, &quot;16&quot;, index: 0, input: &quot;2019-03-16&quot;]</span></span><br><span class="line">r.exec(s);  <span class="comment">// [&quot;2019-03-16&quot;, &quot;2019&quot;, &quot;03&quot;, &quot;16&quot;, index: 0, input: &quot;2019-03-16&quot;]</span></span><br><span class="line">r.test(s);  <span class="comment">// RegExp.$1 =&gt; &quot;2019&quot; RegExp.$2 =&gt; &quot;03&quot; RegExp.$3 =&gt; &quot;16&quot;</span></span><br><span class="line">s.search(r);<span class="comment">// RegExp.$1 =&gt; &quot;2019&quot; RegExp.$2 =&gt; &quot;03&quot; RegExp.$3 =&gt; &quot;16&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>替换</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// yyyy-mm-dd 替换成 yyyy/mm/dd</span></span><br><span class="line"><span class="string">&quot;2019-03-16&quot;</span>.replace(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-相关API注意"><a href="#2-相关API注意" class="headerlink" title="2. 相关API注意"></a>2. 相关API注意</h3><ul>
<li><code>search</code> 和 <code>match</code> 参数问题</li>
</ul>
<p>这两个方法会把字符串转换成正则，所以要加转义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;2019.03.16&quot;</span>;</span><br><span class="line">s.search(<span class="string">&#x27;.&#x27;</span>);    <span class="comment">// 0</span></span><br><span class="line">s.search(<span class="string">&#x27;\\.&#x27;</span>);  <span class="comment">// 4</span></span><br><span class="line">s.search(<span class="regexp">/\./</span>);  <span class="comment">// 4</span></span><br><span class="line">s.match(<span class="string">&#x27;.&#x27;</span>);     <span class="comment">// [&quot;2&quot;, index: 0, input: &quot;2019.03.16&quot;]</span></span><br><span class="line">s.match(<span class="string">&#x27;\\.&#x27;</span>);   <span class="comment">// [&quot;.&quot;, index: 4, input: &quot;2019.03.16&quot;]</span></span><br><span class="line">s.match(<span class="regexp">/\./</span>);   <span class="comment">// [&quot;.&quot;, index: 4, input: &quot;2019.03.16&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他不用转义</span></span><br><span class="line">s.split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">s.replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>match</code> 返回结果的格式问题</li>
</ul>
<p><code>match</code> 参数有 <code>g</code> 会返回所有匹配的内容，没有 <code>g</code> 则返回标准匹配格式：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="string">&quot;2019.03.16&quot;</span>;</span><br><span class="line">s.match(<span class="regexp">/\b(\d+)\b/</span>);  <span class="comment">// [&quot;2019&quot;, &quot;2019&quot;, index: 0, input: &quot;2019.03.16&quot;]</span></span><br><span class="line">s.match(<span class="regexp">/\b(\d+)\b/g</span>); <span class="comment">// [&quot;2019&quot;, &quot;03&quot;, &quot;16&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>test</code> 整体匹配时需要使用 <code>^</code> 和 <code>$</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/<span class="number">123</span>/.test(<span class="string">&quot;a123b&quot;</span>);    <span class="comment">// true</span></span><br><span class="line"><span class="regexp">/^123$/</span>.test(<span class="string">&quot;a123b&quot;</span>);  <span class="comment">// false</span></span><br><span class="line"><span class="regexp">/^123$/</span>.test(<span class="string">&quot;123&quot;</span>);    <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>split</code> 的注意点</li>
</ul>
<p><code>split</code> 第二个参数是 <strong>结果数组的最大长度</strong>：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;leo,pingan,pingan8787&quot;</span>.split(<span class="regexp">/,/</span>, <span class="number">2</span>); <span class="comment">// [&quot;leo&quot;, &quot;pingan&quot;]</span></span><br></pre></td></tr></table></figure>

<p>使用正则分组，会包含分隔符：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;leo,pingan,pingan8787&quot;</span>.split(<span class="regexp">/(,)/</span>); <span class="comment">// [&quot;leo&quot;, &quot;,&quot;, &quot;pingan&quot;, &quot;,&quot;, &quot;pingan8787&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>修饰符</li>
</ul>
<table>
<thead>
<tr>
<th align="center">修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>g</code></td>
<td>全局匹配，即找到所有匹配的，单词是<code> global</code>。</td>
</tr>
<tr>
<td align="center"><code>i</code></td>
<td>忽略字母大小写，单词是 <code>ingoreCase</code>。</td>
</tr>
<tr>
<td align="center"><code>m</code></td>
<td>多行匹配，只影响 <code>^</code> 和 <code>$</code>，二者变成行的概念，即行开头和行结尾。单词是 <code>multiline</code>。</td>
</tr>
</tbody></table>
<p><strong>文章到这结束，感谢阅读，也感谢老姚大佬的这本书</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#110;&#x67;&#97;&#x6e;&#x38;&#x37;&#x38;&#55;&#x40;&#x71;&#x71;&#46;&#99;&#111;&#x6d;">&#x70;&#105;&#110;&#x67;&#97;&#x6e;&#x38;&#x37;&#x38;&#55;&#x40;&#x71;&#x71;&#46;&#99;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>ES小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>
<h2 id="微信公众号"><a href="#微信公众号" class="headerlink" title="微信公众号"></a>微信公众号</h2><p><img src="http://images.pingan8787.com/2019_07_12guild_page.png" alt="bg">  </p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-03-16</span><i class="fa fa-tag"></i><a class="tag" href="/tags/前端开发/" title="前端开发">前端开发 </a><a class="tag" href="/tags/JavaScript/" title="JavaScript">JavaScript </a><a class="tag" href="/tags/原创/" title="原创">原创 </a><a class="tag" href="/tags/正则表达式/" title="正则表达式">正则表达式 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://pingan8787.github.io/2019/03/16/155-【正则表达式】《JavaScript正则表达式迷你书》知识点小抄本/,pingan8787,155-【正则表达式】《JavaScript正则表达式迷你书》知识点小抄本,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2019/04/14/156-%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E6%AF%8F%E5%91%A8%E4%B8%80%E7%BB%83%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88Stack%EF%BC%89/" title="156-【算法】每周一练之数据结构与算法（Stack）">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/03/03/154-%E3%80%90CuteJavaScript%E3%80%91%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E2%80%94%E2%80%94%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" title="154-【CuteJavaScript】设计模式——观察者模式">Próximo post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>
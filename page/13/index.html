<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/13/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-107-【JavaScript】创建对象的七种方式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/11/25/107-%E3%80%90JavaScript%E3%80%91%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E7%A7%8D%E6%96%B9%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2018-11-25T13:34:21.000Z" itemprop="datePublished">2018-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/11/25/107-%E3%80%90JavaScript%E3%80%91%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E7%A7%8D%E6%96%B9%E5%BC%8F/">107-【JavaScript】创建对象的七种方式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#110;&#103;&#97;&#x6e;&#x38;&#x37;&#56;&#55;&#x40;&#113;&#x71;&#x2e;&#x63;&#x6f;&#109;">&#x70;&#105;&#110;&#103;&#97;&#x6e;&#x38;&#x37;&#56;&#55;&#x40;&#113;&#x71;&#x2e;&#x63;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>JavaScript创建对象的方式有很多，通过Object构造函数或对象字面量的方式也可以创建单个对象，显然这两种方式会产生大量的重复代码，并不适合量产。接下来介绍七种非常经典的创建对象的方式，他们也各有优缺点。   </p>
<h2 id="1-工厂模式"><a href="#1-工厂模式" class="headerlink" title="1.工厂模式"></a>1.工厂模式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a1 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">    a1.a = a;</span><br><span class="line">    a1.b = b;</span><br><span class="line">    a1.fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f1 = f(<span class="string">&#x27;Leo&#x27;</span>,<span class="string">&#x27;good&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> f2 = f(<span class="string">&#x27;Robin&#x27;</span>,<span class="string">&#x27;nice&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>可以无数次调用这个工厂函数，每次都会返回一个包含两个属性和一个方法的对象。   </p>
<p>工厂模式虽然解决了<strong>创建多个相似对象</strong>的问题，但是没有解决对象识别问题，即不能知道一个对象的类型。   </p>
<h2 id="2-构造函数模式"><a href="#2-构造函数模式" class="headerlink" title="2.构造函数模式"></a>2.构造函数模式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">    <span class="built_in">this</span>.b = b;</span><br><span class="line">    <span class="built_in">this</span>.fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> f1 = <span class="keyword">new</span> f(<span class="string">&#x27;Leo&#x27;</span>,<span class="string">&#x27;good&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> f2 = <span class="keyword">new</span> f(<span class="string">&#x27;Robin&#x27;</span>,<span class="string">&#x27;nice&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>没有显示的创建对象，使用<code>new</code>来调用这个构造函数，使用<code>new</code>后会自动执行如下操作：  </p>
<ul>
<li>创建一个新对象  </li>
<li>这个新对象会被执行[[prototype]]链接  </li>
<li>这个新对象会绑定到函数调用的<code>this</code>  </li>
<li>返回这个对象  </li>
</ul>
<p>使用这个方式创建对象可以检测对象类型  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>; <span class="comment">// true</span></span><br><span class="line">f1 <span class="keyword">instanceof</span> f;      <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>但是使用构造函数创建对象，每个方法都要在每个实例上<strong>重新创建</strong>一次。   </p>
<h2 id="3-原型模式"><a href="#3-原型模式" class="headerlink" title="3.原型模式"></a>3.原型模式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">f.prototype.a = <span class="string">&#x27;Leo&#x27;</span>;</span><br><span class="line">f.prototype.b = <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">f.prototype.fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f1 = <span class="keyword">new</span> f();</span><br></pre></td></tr></table></figure>
<p>将信息直接添加到原型对象上。使用原型的好处是可以让所有的实例对象共享它所包含的属性和方法，不必在构造函数中定义对象实例信息。   </p>
<p><strong>更简单的写法</strong> :  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">f.prototype = &#123;</span><br><span class="line">    <span class="attr">a</span> : <span class="string">&#x27;Leo&#x27;</span>;</span><br><span class="line">    b : <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">    fun : <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f1 = <span class="keyword">new</span> f();</span><br></pre></td></tr></table></figure>
<p>将<code>f.prototype</code>设置为等于一个以对象字面量形式创建的对象，但是会导致<code>.constructor</code>不在指向<code>f</code>了。  </p>
<p>使用这种方式，完全重写了默认的<code>f.prototype</code>对象，因此 <code>.constructor</code>也不会存在这里。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.prototype.constructor === f  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>如果需要这个属性的话，可以手动添加:   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">f.prototype = &#123;</span><br><span class="line">    <span class="attr">constructor</span> : f,</span><br><span class="line">    <span class="attr">a</span> : <span class="string">&#x27;Leo&#x27;</span>;</span><br><span class="line">    b : <span class="string">&#x27;good&#x27;</span>;</span><br><span class="line">    fun : <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f1 = <span class="keyword">new</span> f();</span><br></pre></td></tr></table></figure>
<p>不过这种方式还是不够好，应为<code>constructor</code>属性默认是<strong>不可枚举</strong>的，这样直接设置，它将是可枚举的。所以可以时候，<code>Object.defineProperty</code>方法:   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(f.prototype, <span class="string">&#x27;constructor&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">value</span>: f</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>缺点</strong>  </p>
<p>使用原型，所有的属性都将被共享，这是个很大的优点，同样会带来一些缺点。  </p>
<p>原型中所有属性实例是被很多实例共享的，这种共享对于函数非常合适。对于那些包含基本值的属性也勉强可以，毕竟实例属性可以屏蔽原型属性。但是引用类型值，就会出现问题了。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">f.prototype = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="attr">b</span>: [<span class="string">&#x27;good&#x27;</span>, <span class="string">&#x27;nice&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> f()</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="keyword">new</span> f()</span><br><span class="line">f1.b.push(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(f1.b) <span class="comment">//[&quot;good&quot;, &quot;nice&quot;, &quot;hi&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(f2.b) <span class="comment">//[&quot;good&quot;, &quot;nice&quot;, &quot;hi&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(f1.b === f2.b) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>b</code>存在与原型中，实例f1和f2指向同一个原型，f1修改了引用的数组，也会反应到实例f2中。   </p>
<h2 id="4-组合使用构造函数模式和原型模式"><a href="#4-组合使用构造函数模式和原型模式" class="headerlink" title="4.组合使用构造函数模式和原型模式"></a>4.组合使用构造函数模式和原型模式</h2><p>这是使用最为广泛、认同度最高的一种创建自定义类型的方法。它可以解决上面那些模式的缺点。   </p>
<p>使用此模式可以让每个实例都会有自己的一份实例属性副本，但同时又共享着对方法的引用。   </p>
<p>这样的话，即使实例属性修改引用类型的值，也不会影响其他实例的属性值了。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.a = a</span><br><span class="line">  <span class="built_in">this</span>.friends = [<span class="string">&#x27;good&#x27;</span>, <span class="string">&#x27;nice&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line">f.prototype.fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> f()</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="keyword">new</span> f()</span><br><span class="line">f1.friends.push(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(f1.friends)  <span class="comment">//[&quot;good&quot;, &quot;nice&quot;, &quot;hi&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(f2.friends) <span class="comment">// [&quot;good&quot;, &quot;nice&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(f1.friends === f2.friends) <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h2 id="5-动态原型模式"><a href="#5-动态原型模式" class="headerlink" title="5.动态原型模式"></a>5.动态原型模式</h2><p>动态原型模式将所有信息都封装在了构造函数中，初始化的时候，通过检测某个应该存在的方法时候有效，来决定是否需要初始化原型。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="built_in">this</span>.a = a</span><br><span class="line">  <span class="built_in">this</span>.b = b</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 方法</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">this</span>.fun !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    f.prototype.fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> f(<span class="string">&#x27;good&#x27;</span>, <span class="string">&#x27;nice&#x27;</span>)</span><br><span class="line">f1.fun()</span><br></pre></td></tr></table></figure>
<p>只有在<code>fun</code>方法不存在的时候，才会将它添加到原型中。这段代码只会初次调用构造函数的时候才会执行。</p>
<p>此后原型已经完成初始化，不需要在做什么修改了。  </p>
<p>这里对原型所做的修改，能够立即在所有实例中得到反映。  </p>
<p>其次，if语句检查的可以是初始化之后应该存在的任何属性或方法，所以不必用一大堆的if语句检查每一个属性和方法，只要检查一个就行。  </p>
<h2 id="6-寄生构造函数模式"><a href="#6-寄生构造函数模式" class="headerlink" title="6.寄生构造函数模式"></a>6.寄生构造函数模式</h2><p>这种模式的基本思想就是创建一个函数，该函数的作用仅仅是封装创建对象的代码，然后再返回新建的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">  o.a = a</span><br><span class="line">  o.b = b</span><br><span class="line">  o.fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> f(<span class="string">&#x27;good&#x27;</span>, <span class="string">&#x27;nice&#x27;</span>)</span><br><span class="line">f1.fun()</span><br></pre></td></tr></table></figure>
<p>这个模式，除了使用<code>new</code>操作符并把使用的包装函数叫做构造函数之外，和工厂模式几乎一样。  </p>
<p>构造函数如果不返回对象，默认也会返回一个新的对象，通过在构造函数的末尾添加一个<code>return</code>语句，可以重写调用构造函数时返回的值。  </p>
<h2 id="7-稳妥构造函数模式"><a href="#7-稳妥构造函数模式" class="headerlink" title="7.稳妥构造函数模式"></a>7.稳妥构造函数模式</h2><p>首先明白稳妥对象指的是没有公共属性，而且其方法也不引用<code>this</code>。</p>
<p>稳妥对象最适合在一些安全环境中（这些环境会禁止使用<code>this</code>和<code>new</code>），或防止数据被其他应用程序改动时使用。  </p>
<p>稳妥构造函数模式和寄生模式类似，有两点不同:一是创建对象的实例方法不引用this，而是不使用new操作符调用构造函数。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">  o.a = a</span><br><span class="line">  o.b = b</span><br><span class="line">  o.fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = f(<span class="string">&#x27;good&#x27;</span>, <span class="string">&#x27;nice&#x27;</span>)</span><br><span class="line">f1.fun()</span><br></pre></td></tr></table></figure>
<p>和寄生构造函数模式一样，这样创建出来的对象与构造函数之间没有什么关系，instanceof操作符对他们没有意义。  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/11/25/107-%E3%80%90JavaScript%E3%80%91%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E7%A7%8D%E6%96%B9%E5%BC%8F/" data-id="ckts3ejs5000j4d9kenfp8k67" data-title="107-【JavaScript】创建对象的七种方式" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-106-【CSS】三种文字渐变色的实现" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/11/21/106-%E3%80%90CSS%E3%80%91%E4%B8%89%E7%A7%8D%E6%96%87%E5%AD%97%E6%B8%90%E5%8F%98%E8%89%B2%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="article-date">
  <time class="dt-published" datetime="2018-11-21T13:18:55.000Z" itemprop="datePublished">2018-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/11/21/106-%E3%80%90CSS%E3%80%91%E4%B8%89%E7%A7%8D%E6%96%87%E5%AD%97%E6%B8%90%E5%8F%98%E8%89%B2%E7%9A%84%E5%AE%9E%E7%8E%B0/">106-【CSS】三种文字渐变色的实现</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#x6e;&#x67;&#x61;&#110;&#56;&#x37;&#x38;&#x37;&#x40;&#x71;&#x71;&#46;&#99;&#x6f;&#109;">&#112;&#105;&#x6e;&#x67;&#x61;&#110;&#56;&#x37;&#x38;&#x37;&#x40;&#x71;&#x71;&#46;&#99;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<h2 id="基础样式"><a href="#基础样式" class="headerlink" title="基础样式"></a>基础样式</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient-text</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bolder;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-使用-background-cli和text-fill-color"><a href="#1-使用-background-cli和text-fill-color" class="headerlink" title="1.使用 background-cli和text-fill-color"></a>1.使用 background-cli和text-fill-color</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient-text-one</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, red, <span class="number">#fd8403</span>, yellow);</span><br><span class="line">    -webkit-<span class="attribute">background-clip</span>: text;</span><br><span class="line">    -webkit-text-fill-<span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>background: -webkit-linear-gradient(...)</code> 为文本元素提供渐变背景。<br><code>webkit-text-fill-color: transparent</code> 使用透明颜色填充文本。<br><code>webkit-background-clip: text</code> 用文本剪辑背景，用渐变背景作为颜色填充文本。   </p>
<h2 id="2-使用-mask-image"><a href="#2-使用-mask-image" class="headerlink" title="2.使用 mask-image"></a>2.使用 mask-image</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient-text-two</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.gradient-text-two</span><span class="selector-attr">[data-content]</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-content);</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">color</span>: yellow;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">    -webkit-<span class="attribute">mask</span>-image: <span class="built_in">-webkit-gradient</span>(</span><br><span class="line">        linear, <span class="number">0</span> <span class="number">0</span>, <span class="number">0</span> bottom,</span><br><span class="line">        <span class="built_in">from</span>(yellow), <span class="built_in">to</span>(<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>mask-image</code> 和 <code>background-image</code> 一样，不仅可以取值是 图片路径，也可以是渐变色。</p>
<h2 id="3-使用-linearGradient和fill"><a href="#3-使用-linearGradient和fill" class="headerlink" title="3.使用 linearGradient和fill"></a>3.使用 linearGradient和fill</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient-text-three</span>&#123;</span><br><span class="line">    fill:<span class="built_in">url</span>(<span class="string">#SVGID_1_</span>);</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>:bolder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBoxs</span>=<span class="string">&quot;0 0 500 300&quot;</span> <span class="attr">class</span>=<span class="string">&quot;svgBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defs</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">linearGradient</span> <span class="attr">id</span>=<span class="string">&quot;SVGID_1_&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">gradientUnits</span>=<span class="string">&quot;userSpaceOnUse&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">x1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;10&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;50&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stop</span>  <span class="attr">offset</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stop-color:yellow&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stop</span>  <span class="attr">offset</span>=<span class="string">&quot;0.5&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stop-color:#fd8403&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">stop</span>  <span class="attr">offset</span>=<span class="string">&quot;1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stop-color:red&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">linearGradient</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;gradient-text-three&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">x</span>=<span class="string">&quot;110px&quot;</span> <span class="attr">y</span>=<span class="string">&quot;30%&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>花信年华<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在SVG中，有两种主要的渐变类型：  </p>
<ul>
<li>线性渐变（linearGradient）  </li>
<li>放射性渐变（radialGradient）   </li>
<li>SVG中的渐变不仅可以用于填充图形元素，还可以填充文本元素  </li>
</ul>
<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>CSS3渐变字体<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        * &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.gradient-text</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">text-align</span>: left;</span></span><br><span class="line"><span class="css">            <span class="attribute">text-indent</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-weight</span>: bolder;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.gradient-text-one</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(</span></span><br><span class="line"><span class="css">                bottom, red, <span class="number">#fd8403</span>, yellow</span></span><br><span class="line"><span class="css">            );</span></span><br><span class="line"><span class="css">            -webkit-<span class="attribute">background-clip</span>: text;</span></span><br><span class="line"><span class="css">            -webkit-text-fill-<span class="attribute">color</span>: transparent;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.gradient-text-two</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.gradient-text-two</span><span class="selector-attr">[data-content]</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">content</span>: <span class="built_in">attr</span>(data-content);</span></span><br><span class="line"><span class="css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: yellow;</span></span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">z-index</span>: <span class="number">2</span>;</span></span><br><span class="line"><span class="css">            -webkit-<span class="attribute">mask</span>-image: <span class="built_in">-webkit-gradient</span>(</span></span><br><span class="line"><span class="css">                linear, <span class="number">0</span> <span class="number">0</span>, <span class="number">0</span> bottom, </span></span><br><span class="line"><span class="css">                <span class="built_in">from</span>(yellow), <span class="built_in">to</span>(<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))</span></span><br><span class="line"><span class="css">            );</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.gradient-text-three</span> &#123;</span></span><br><span class="line"><span class="css">            fill: <span class="built_in">url</span>(<span class="string">#SVGID_1_</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-weight</span>: bolder;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>方法1. background-clip + text-fill-color<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;gradient-text gradient-text-one&quot;</span>&gt;</span>花样年华<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-warning&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>方法2. mask-image<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;gradient-text gradient-text-two&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">data-content</span>=<span class="string">&quot;豆蔻年华&quot;</span>&gt;</span>豆蔻年华<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-danger&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>方法3. svg linearGradient<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBoxs</span>=<span class="string">&quot;0 0 500 300&quot;</span> <span class="attr">class</span>=<span class="string">&quot;svgBox&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">defs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">linearGradient</span> <span class="attr">id</span>=<span class="string">&quot;SVGID_1_&quot;</span> </span></span><br><span class="line"><span class="tag">                            <span class="attr">gradientUnits</span>=<span class="string">&quot;userSpaceOnUse&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">x1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;10&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;50&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">stop</span> <span class="attr">offset</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stop-color:yellow&quot;</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">stop</span> <span class="attr">offset</span>=<span class="string">&quot;0.5&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stop-color:#fd8403&quot;</span> /&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">stop</span> <span class="attr">offset</span>=<span class="string">&quot;1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;stop-color:red&quot;</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">linearGradient</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">defs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">text</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> </span></span><br><span class="line"><span class="tag">                        <span class="attr">class</span>=<span class="string">&quot;gradient-text-three&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">x</span>=<span class="string">&quot;110px&quot;</span> <span class="attr">y</span>=<span class="string">&quot;30%&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span>花信年华<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/11/21/106-%E3%80%90CSS%E3%80%91%E4%B8%89%E7%A7%8D%E6%96%87%E5%AD%97%E6%B8%90%E5%8F%98%E8%89%B2%E7%9A%84%E5%AE%9E%E7%8E%B0/" data-id="ckts3ejs5000i4d9k79z3eraj" data-title="106-【CSS】三种文字渐变色的实现" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-105-【JavaScript】JS箭头函数的适用和不适用的场景" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/11/18/105-%E3%80%90JavaScript%E3%80%91JS%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84%E9%80%82%E7%94%A8%E5%92%8C%E4%B8%8D%E9%80%82%E7%94%A8%E7%9A%84%E5%9C%BA%E6%99%AF/" class="article-date">
  <time class="dt-published" datetime="2018-11-18T10:28:26.000Z" itemprop="datePublished">2018-11-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/11/18/105-%E3%80%90JavaScript%E3%80%91JS%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84%E9%80%82%E7%94%A8%E5%92%8C%E4%B8%8D%E9%80%82%E7%94%A8%E7%9A%84%E5%9C%BA%E6%99%AF/">105-【JavaScript】JS箭头函数的适用和不适用的场景</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#110;&#x67;&#97;&#110;&#x38;&#x37;&#x38;&#55;&#x40;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#x6d;">&#x70;&#105;&#110;&#x67;&#97;&#110;&#x38;&#x37;&#x38;&#55;&#x40;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<h2 id="JavaScript-箭头函数究竟是什么？"><a href="#JavaScript-箭头函数究竟是什么？" class="headerlink" title="JavaScript 箭头函数究竟是什么？"></a>JavaScript 箭头函数究竟是什么？</h2><p>JavaScript 箭头函数大致相当于 <code>python</code> 中的 <code>lambda</code> 函数 或 <code>Ruby</code> 中的<code> blocks</code>。  </p>
<p>这些是匿名函数，它们有自己的特殊语法，接受一定数量的参数，并在其封闭的作用域的上下文（即定义它们的函数或其他代码）中操作。  </p>
<p>让我们依次分解这些部分。  </p>
<h3 id="箭头函数语法"><a href="#箭头函数语法" class="headerlink" title="箭头函数语法"></a>箭头函数语法</h3><p>箭头函数具有单一的总体结构，然后在特殊情况下可以通过多种方式简化它们。 核心结构如下所示：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(argument1, argument2, ... argumentN) =&gt; &#123;</span><br><span class="line">  <span class="comment">// function body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>括号内的是参数列表，后跟“胖箭头”（<code>=&gt;</code>），最后是函数体。  </p>
<p>这与传统函数非常相似，我们只是省略 <code>function</code> 关键字并在参数后添加一个胖箭头（<code>=&gt;</code>）。</p>
<p>然而，有许多方法可以简化箭头函数。    </p>
<p>首先，如果函数体是单个表达式，则可以不使用花括号并将其置于内联中（省略大括号直接将表达式写在一行中）。 表达式的结果将由函数返回。 例如：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br></pre></td></tr></table></figure>
<p>其次，如果只有一个参数，你甚至可以省略参数的括号。例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getFirst = <span class="function"><span class="params">array</span> =&gt;</span> array[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<p>正如您所看到的，这是一些非常简洁的语法，我们将重点介绍后面的好处。</p>
<h3 id="高级语法"><a href="#高级语法" class="headerlink" title="高级语法"></a>高级语法</h3><p>有一些高级语法可以了解一下。  </p>
<p>首先，如果您尝试使用内联单行表达式语法，但您返回的值是对象字面量。您可能会认为这看起来应该是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(name, description) =&gt; &#123;<span class="attr">name</span>: name, <span class="attr">description</span>: description&#125;;</span><br></pre></td></tr></table></figure>
<p>问题是这种语法比较含糊不清，容易引起歧义 ： 看起来好像你正试图创建一个传统的函数体。 如果你碰巧想要一个对象的单个表达式，请用括号包裹该对象：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(name, description) =&gt; (&#123;<span class="attr">name</span>: name, <span class="attr">description</span>: description&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="封闭的上下文作用域"><a href="#封闭的上下文作用域" class="headerlink" title="封闭的上下文作用域"></a>封闭的上下文作用域</h3><p>与其他形式的函数不同，箭头函数没有自己的 <a target="_blank" rel="noopener" href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0">执行期上下文</a>。  </p>
<p>实际上，这意味着 this 和 arguments 都是从它们的父函数继承而来的。  </p>
<p>例如，使用和不使用箭头函数比较以下代码：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;test object&#x27;</span>,</span><br><span class="line">  <span class="attr">createAnonFunction</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"> </span><br><span class="line">  <span class="attr">createArrowFunction</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>我们有一个简单的 <code>test</code> 对象，有两个方法 – 每个方法都返回一个匿名函数。   </p>
<p>不同之处在于第一个方法使用传统函数表达式，而后者中使用箭头函数。  </p>
<p>如果我们使用相同参数，在控制台中运行它们，我们会得到完全不一样的结果。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> anon = test.createAnonFunction(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> arrow = test.createArrowFunction(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br><span class="line">anon();  <span class="comment">// undefined  &#123;&#125;</span></span><br><span class="line">arrow(); <span class="comment">//test object  &#123; &#x27;0&#x27;: &#x27;hello&#x27;, &#x27;1&#x27;: &#x27;world&#x27; &#125;</span></span><br></pre></td></tr></table></figure>
<p>第一个匿名函数有自己的函数上下文，因此当您调用它时，<code>test</code> 对象的 <code>this.name</code> 没有可用的引用，也没有创建它时调用的参数。</p>
<p>另一个，箭头函数具有与创建它的函数完全相同的函数上下文，使其可以访问 <code>argumetns</code> 和 <code>test</code> 对象。</p>
<h3 id="使用箭头函数改进您的代码"><a href="#使用箭头函数改进您的代码" class="headerlink" title="使用箭头函数改进您的代码"></a>使用箭头函数改进您的代码</h3><p>传统 <code>lambda</code> 函数的主要用例之一，就是用于遍历列表中的项，现在用 <code>JavaScript</code> 箭头函数实现。   </p>
<p>比如你有一个有值的数组，你想去 <code>map</code> 遍历每一项，这时使用箭头函数非常理想：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> words = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;WORLD&#x27;</span>, <span class="string">&#x27;Whatever&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> downcasedWords = words.map(<span class="function"><span class="params">word</span> =&gt;</span> word.toLowerCase());</span><br></pre></td></tr></table></figure>
<p>一个非常常见的例子是提取对象中的某个特定值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> names = objects.map(<span class="function"><span class="params">object</span> =&gt;</span> object.name);</span><br></pre></td></tr></table></figure>
<p>类似地，当用现代迭代样式取代传统的 for 循环，一般我们使用 forEach 循环，箭头函数能够保持 <code>this</code> 来自于父级，让他们非常直观</p>
<p>类似的，当用 forEach 来替换传统 for循环的时候，实际上箭头函数会直观的保持 <code>this</code>来自于父一级</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.examples.forEach(<span class="function"><span class="params">example</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.runExample(example);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Promises-和-Promise-链"><a href="#Promises-和-Promise-链" class="headerlink" title="Promises 和 Promise 链"></a>Promises 和 Promise 链</h3><p>箭头函数的另一个可以使代码更清晰，更直观的地方是管理异步代码。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises">Promises</a> 使得管理异步代码变得容易很多（即使你很欢快地使用 <code>async</code> / <code>await</code>，你仍然应该理解 <a target="_blank" rel="noopener" href="https://medium.com/@bluepnume/learn-about-promises-before-you-start-using-async-await-eb148164a9c8"><code>async</code> / <code>await</code> 是建立在 Promises 之上的</a> ！）</p>
<p>但是，虽然使用 <code>promises</code>仍然需要定义在异步代码或调用完成后运行的函数。</p>
<p>这是箭头函数的理想位置，特别是如果您生成的函数是有状态的，同时想引用对象中的某些内容。 例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.doSomethingAsync().then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.storeResult(result);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="对象转换"><a href="#对象转换" class="headerlink" title="对象转换"></a>对象转换</h3><p>箭头函数的另一个常见且极其强大的用途是封装对象转换。</p>
<p>例如，在 Vue.js 中，有一种通用模式，用于使用 <code>mapState</code> 将 Vuex 存储的各个部分直接包含到 Vue 组件中。</p>
<p>这涉及定义一组 “<code>mappers</code>” ，这些 “<code>mappers</code>” 将从原始的完整的 <code>state</code> 对象转换为提取所涉及组件所需的内容。</p>
<p>这些简单的转换使用箭头函数再合适不过了。比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      <span class="attr">results</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.results,</span><br><span class="line">      <span class="attr">users</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.users,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="你不应该使用箭头函数的情景"><a href="#你不应该使用箭头函数的情景" class="headerlink" title="你不应该使用箭头函数的情景"></a>你不应该使用箭头函数的情景</h3><p>在许多情况下，使用箭头函数不是一个好主意。 他们不仅不会帮助你，而且会给你带来一些不必要的麻烦。</p>
<p>第一个是对象的方法。 这是一个函数上下文的例子，这对于我们理解很有帮助。</p>
<p>有一段时间使用 Class（类）属性语法和箭头函数的组合，作为创建“自动绑定方法”的方式，例如， 事件处理程序可以使用，但仍然绑定到类的方法。</p>
<p>这看起来像是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">  counter = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.counter++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，即使 <code>handleClick</code> 由事件处理程序调用，而不是在 <code>Counter</code> 实例的上下文中调用，它仍然可以访问实例的数据。</p>
<p>这种方法的缺点很多，在本文中很好地记录。</p>
<p>虽然使用这种方法确实为您提供了具有绑定函数的快捷方式，但该函数以多种不直观的方式运行，如果您尝试将此对象作为原型进行子类化/使用，则会不利于测试，同时也会产生很多问题。</p>
<p>相反，使用常规函数，如果需要，将其绑定到构造函数中的实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">  counter = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.counter++;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.handleClick = <span class="built_in">this</span>.handleClick.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="深层的调用链"><a href="#深层的调用链" class="headerlink" title="深层的调用链"></a>深层的调用链</h3><p>箭头函数可能让你遇到麻烦的另一个地方是，它们被用于许多不同的组合，特别是在函数深层调用链中。</p>
<p>核心原因与匿名函数相同 – 它们给出了非常糟糕的堆栈跟踪。</p>
<p>如果你的函数只是向下一级，比如在迭代器里面，那也不是太糟糕，但是如果你把所有的函数定义为箭头函数，并在它们之间来回调用，你就会陷入困境 遇到一个错误的时候，只是收到错误消息，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;anonymous&#125;()</span><br><span class="line">&#123;anonymous&#125;()</span><br><span class="line">&#123;anonymous&#125;()</span><br><span class="line">&#123;anonymous&#125;()</span><br><span class="line">&#123;anonymous&#125;()</span><br></pre></td></tr></table></figure>

<h3 id="有动态上下文的函数"><a href="#有动态上下文的函数" class="headerlink" title="有动态上下文的函数"></a>有动态上下文的函数</h3><p>箭头函数可能让您遇到麻烦的最后一种情况就是吗， this 是动态绑定的时候。</p>
<p>如果您在这些位置使用箭头函数，那么动态绑定将不起作用，并且你（或稍后使用你的代码的其他人）可能会对事情未按预期执行的原因感到困惑。</p>
<p>一些典型的例子：</p>
<ul>
<li>事件处理程序是通过将 this 设置为事件的 currentTarget 属性来调用。  </li>
<li>如果您仍在使用 jQuery ，则大多数 jQuery 方法将 this 设置为已选择的 dom 元素。  </li>
<li>如果您正在使用 Vue.js ，则方法和计算函数通常将 this 设置为 Vue 组件。<br>当然你可以故意使用箭头函数来覆盖这种行为，但特别是在 jQuery 和 Vue 的情况下，这通常会干扰正常运行，让你感到困惑的是为什么看起来与附近其他代码相同的代码不起作用。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>箭头函数是 JavaScript 语言的一个非常有必要的补充，并且在许多情况下使代码更符合人们的阅读习惯。</p>
<p>然而，像所有其他特性一样，它们有优点和缺点。 我们应该将它们作为我们工具箱中的另一个工具，而不是作为所有函数的全面替代品。</p>
<p>英文原文：<a target="_blank" rel="noopener" href="https://zendev.com/2018/10/01/javascript-arrow-functions-how-why-when.html">https://zendev.com/2018/10/01/javascript-arrow-functions-how-why-when.html</a><br>中文地址：<a target="_blank" rel="noopener" href="https://www.css88.com/archives/10033">https://www.css88.com/archives/10033</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/11/18/105-%E3%80%90JavaScript%E3%80%91JS%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84%E9%80%82%E7%94%A8%E5%92%8C%E4%B8%8D%E9%80%82%E7%94%A8%E7%9A%84%E5%9C%BA%E6%99%AF/" data-id="ckts3ejs3000f4d9k90hz1vix" data-title="105-【JavaScript】JS箭头函数的适用和不适用的场景" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-104-【面试题】2018近期各大公司面试题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/31/104-%E3%80%90%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%912018%E8%BF%91%E6%9C%9F%E5%90%84%E5%A4%A7%E5%85%AC%E5%8F%B8%E9%9D%A2%E8%AF%95%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2018-10-31T15:54:56.000Z" itemprop="datePublished">2018-10-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/31/104-%E3%80%90%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%912018%E8%BF%91%E6%9C%9F%E5%90%84%E5%A4%A7%E5%85%AC%E5%8F%B8%E9%9D%A2%E8%AF%95%E9%A2%98/">104-【面试题】2018近期各大公司面试题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#x69;&#x6e;&#x67;&#x61;&#x6e;&#56;&#x37;&#x38;&#55;&#64;&#x71;&#x71;&#x2e;&#x63;&#111;&#109;">&#112;&#x69;&#x6e;&#x67;&#x61;&#x6e;&#56;&#x37;&#x38;&#55;&#64;&#x71;&#x71;&#x2e;&#x63;&#111;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000016789897">原文地址</a>    </p>
</blockquote>
<h2 id="阿里"><a href="#阿里" class="headerlink" title="阿里"></a>阿里</h2><ul>
<li>使用过的koa2中间件</li>
<li>koa-body原理</li>
<li>介绍自己写过的中间件</li>
<li>有没有涉及到Cluster</li>
<li>介绍pm2</li>
<li>master挂了的话pm2怎么处理</li>
<li>如何和MySQL进行通信</li>
<li>React声明周期及自己的理解</li>
<li>如何配置React-Router</li>
<li>路由的动态加载模块</li>
<li>服务端渲染SSR</li>
<li>介绍路由的history</li>
<li>介绍Redux数据流的流程</li>
<li>Redux如何实现多个组件之间的通信，多个组件使用相同状态如何进行管理</li>
<li>多个组件之间如何拆分各自的state，每块小的组件有自己的状态，它们之间还有一些公共的状态需要维护，如何思考这块</li>
<li>使用过的Redux中间件</li>
<li>如何解决跨域的问题</li>
<li>常见Http请求头</li>
<li>移动端适配1px的问题</li>
<li>介绍flex布局</li>
<li>其他css方式设置垂直居中</li>
<li>居中为什么要使用transform（为什么不使用marginLeft/Top）</li>
<li>使用过webpack里面哪些plugin和loader</li>
<li>webpack里面的插件是怎么实现的</li>
<li>dev-server是怎么跑起来</li>
<li>项目优化</li>
<li>抽取公共文件是怎么配置的</li>
<li>项目中如何处理安全问题</li>
<li>怎么实现this对象的深拷贝</li>
</ul>
<h2 id="网易"><a href="#网易" class="headerlink" title="网易"></a>网易</h2><ul>
<li>介绍redux，主要解决什么问题</li>
<li>文件上传如何做断点续传</li>
<li>表单可以跨域吗</li>
<li>promise、async有什么区别</li>
<li>搜索请求如何处理（防抖）</li>
<li>搜索请求中文如何请求</li>
<li>介绍观察者模式</li>
<li>介绍中介者模式</li>
<li>观察者和订阅-发布的区别，各自用在哪里</li>
<li>介绍react优化</li>
<li>介绍http2.0</li>
<li>通过什么做到并发请求</li>
<li>http1.1时如何复用tcp连接</li>
<li>介绍service worker</li>
<li>介绍css3中position:sticky</li>
<li>redux请求中间件如何处理并发</li>
<li>介绍Promise，异常捕获</li>
<li>介绍position属性包括CSS3新增</li>
<li>浏览器事件流向</li>
<li>介绍事件代理以及优缺点</li>
<li>React组件中怎么做事件代理</li>
<li>React组件事件代理的原理</li>
<li>介绍this各种情况</li>
<li>前端怎么控制管理路由</li>
<li>使用路由时出现问题如何解决</li>
<li>React怎么做数据的检查和变化</li>
</ul>
<h2 id="滴滴"><a href="#滴滴" class="headerlink" title="滴滴"></a>滴滴</h2><ul>
<li>react-router怎么实现路由切换</li>
<li>react-router里的<Link>标签和标签有什么区别</li>
<li>标签默认事件禁掉之后做了什么才实现了跳转</li>
<li>React层面的性能优化</li>
<li>整个前端性能提升大致分几类</li>
<li>import { Button } from ‘antd’，打包的时候只打包button，分模块加载，是怎么做到的</li>
<li>使用import时，webpack对node_modules里的依赖会做什么</li>
<li>JS异步解决方案的发展历程以及优缺点</li>
<li>Http报文的请求会有几个部分</li>
<li>cookie放哪里，cookie能做的事情和存在的价值</li>
<li>cookie和token都存放在header里面，为什么只劫持前者</li>
<li>cookie和session有哪些方面的区别</li>
<li>React中Dom结构发生变化后内部经历了哪些变化</li>
<li>React挂载的时候有3个组件，textComponent、composeComponent、domComponent，区别和关系，Dom结构发生变化时怎么区分data的变化，怎么更新，更新怎么调度，如果更新的时候还有其他任务存在怎么处理</li>
<li>key主要是解决哪一类的问题，为什么不建议用索引index（重绘）</li>
<li>Redux中异步的请求怎么处理</li>
<li>Redux中间件是什么东西，接受几个参数（两端的柯里化函数）</li>
<li>柯里化函数两端的参数具体是什么东西</li>
<li>中间件是怎么拿到store和action，然后怎么处理</li>
<li>state是怎么注入到组件的，从reducer到组件经历了什么样的过程</li>
<li>koa中response.send、response.rounded、response.json发生了什么事，浏览器为什么能识别到它是一个json结构或是html</li>
<li>koa-bodyparser怎么来解析request</li>
<li>webpack整个生命周期，loader和plugin有什么区别</li>
<li>介绍AST（Abstract Syntax Tree）抽象语法树</li>
<li>安卓Activity之间数据是怎么传递的</li>
<li>安卓4.0到6.0过程中WebView对js兼容性的变化</li>
<li>WebView和原生是如何通信</li>
<li>跨域怎么解决，有没有使用过Apache等方案</li>
</ul>
<h2 id="今日头条"><a href="#今日头条" class="headerlink" title="今日头条"></a>今日头条</h2><ul>
<li>对async、await的理解，内部原理</li>
<li>介绍下Promise，内部实现</li>
<li>清除浮动</li>
<li>定位问题（绝对定位、相对定位等）</li>
<li>从输入URL到页面加载全过程</li>
<li>tcp3次握手</li>
<li>tcp属于哪一层（1 物理层 -&gt; 2 数据链路层 -&gt; 3 网络层(ip)-&gt; 4 传输层(tcp) -&gt; 5 应用层(http)）</li>
<li>redux的设计思想</li>
<li>接入redux的过程</li>
<li>绑定connect的过程</li>
<li>connect原理</li>
<li>webpack介绍</li>
<li>== 和 ===的区别，什么情况下用相等==</li>
<li>bind、call、apply的区别</li>
<li>动画的了解</li>
<li>介绍下原型链（解决的是继承问题吗）</li>
<li>对跨域的了解</li>
</ul>
<h2 id="有赞"><a href="#有赞" class="headerlink" title="有赞"></a>有赞</h2><ul>
<li>Linux 754 介绍</li>
<li>介绍冒泡排序，选择排序，冒泡排序如何优化</li>
<li>transform动画和直接使用left、top改变位置有什么优缺点</li>
<li>如何判断链表是否有环</li>
<li>介绍二叉搜索树的特点</li>
<li>介绍暂时性死区</li>
<li>ES6中的map和原生的对象有什么区别</li>
<li>观察者和发布-订阅的区别</li>
<li>react异步渲染的概念,介绍Time Slicing 和 Suspense</li>
<li>16.X声明周期的改变</li>
<li>16.X中props改变后在哪个生命周期中处理</li>
<li>介绍纯函数</li>
<li>前端性能优化</li>
<li>pureComponent和FunctionComponent区别</li>
<li>介绍JSX</li>
<li>如何做RN在安卓和IOS端的适配</li>
<li>RN为什么能在原生中绘制成原生组件（bundle.js）</li>
<li>介绍虚拟DOM</li>
<li>如何设计一个localStorage，保证数据的实效性</li>
<li>如何设计Promise.all()</li>
<li>介绍高阶组件</li>
<li>sum(2, 3)实现sum(2)(3)的效果</li>
<li>react性能优化</li>
<li>两个对象如何比较</li>
</ul>
<h2 id="挖财"><a href="#挖财" class="headerlink" title="挖财"></a>挖财</h2><ul>
<li>JS的原型</li>
<li>变量作用域链</li>
<li>call、apply、bind的区别</li>
<li>防抖和节流的区别</li>
<li>介绍各种异步方案</li>
<li>react生命周期</li>
<li>介绍Fiber</li>
<li>前端性能优化</li>
<li>介绍DOM树对比</li>
<li>react中的key的作用</li>
<li>如何设计状态树</li>
<li>介绍css，xsrf</li>
<li>http缓存控制</li>
<li>项目中如何应用数据结构</li>
<li>native提供了什么能力给RN</li>
<li>如何做工程上的优化</li>
<li>shouldComponentUpdate是为了解决什么问题</li>
<li>如何解决props层级过深的问题</li>
<li>前端怎么做单元测试</li>
<li>webpack生命周期</li>
<li>webpack打包的整个过程</li>
<li>常用的plugins</li>
<li>pm2怎么做进程管理，进程挂掉怎么处理</li>
<li>不用pm2怎么做进程管理</li>
</ul>
<h2 id="沪江"><a href="#沪江" class="headerlink" title="沪江"></a>沪江</h2><ul>
<li>介绍下浏览器跨域</li>
<li>怎么去解决跨域问题</li>
<li>jsonp方案需要服务端怎么配合</li>
<li>Ajax发生跨域要设置什么（前端）</li>
<li>加上CORS之后从发起到请求正式成功的过程</li>
<li>xsrf跨域攻击的安全性问题怎么防范</li>
<li>使用Async会注意哪些东西</li>
<li>Async里面有多个await请求，可以怎么优化（请求是否有依赖）</li>
<li>Promise和Async处理失败的时候有什么区别</li>
<li>Redux在状态管理方面解决了React本身不能解决的问题</li>
<li>Redux有没有做过封装</li>
<li>react生命周期，常用的生命周期</li>
<li>对应的生命周期做什么事</li>
<li>遇到性能问题一般在哪个生命周期里解决</li>
<li>怎么做性能优化（异步加载组件…）</li>
<li>写react有哪些细节可以优化</li>
<li>React的事件机制（绑定一个事件到一个组件上）</li>
<li>介绍下事件代理，主要解决什么问题</li>
<li>前端开发中用到哪些设计模式</li>
<li>React/Redux中哪些功能用到了哪些设计模式</li>
<li>JS变量类型分为几种，区别是什么</li>
<li>JS里垃圾回收机制是什么，常用的是哪种，怎么处理的</li>
<li>一般怎么组织CSS（Webpack）</li>
</ul>
<h2 id="饿了么"><a href="#饿了么" class="headerlink" title="饿了么"></a>饿了么</h2><ul>
<li>小程序里面开页面最多多少</li>
<li>React子父组件之间如何传值</li>
<li>Emit事件怎么发，需要引入什么</li>
<li>介绍下React高阶组件，和普通组件有什么区别</li>
<li>一个对象数组，每个子对象包含一个id和name，React如何渲染出全部的name</li>
<li>在哪个生命周期里写</li>
<li>其中有几个name不存在，通过异步接口获取，如何做</li>
<li>渲染的时候key给什么值，可以使用index吗，用id好还是index好</li>
<li>webpack如何配sass，需要配哪些loader</li>
<li>配css需要哪些loader</li>
<li>如何配置把js、css、html单独打包成一个文件</li>
<li>div垂直水平居中（flex、绝对定位）</li>
<li>两个元素块，一左一右，中间相距10像素</li>
<li>上下固定，中间滚动布局如何实现</li>
<li>[1, 2, 3, 4, 5]变成[1, 2, 3, a, b, 5]</li>
<li>取数组的最大值（ES5、ES6）</li>
<li>apply和call的区别</li>
<li>ES5和ES6有什么区别</li>
<li>some、every、find、filter、map、forEach有什么区别</li>
<li>上述数组随机取数，每次返回的值都不一样</li>
<li>如何找0-5的随机数，95-99呢</li>
<li>页面上有1万个button如何绑定事件</li>
<li>如何判断是button</li>
<li>页面上生成一万个button，并且绑定事件，如何做（JS原生操作DOM）</li>
<li>循环绑定时的index是多少，为什么，怎么解决</li>
<li>页面上有一个input，还有一个p标签，改变input后p标签就跟着变化，如何处理</li>
<li>监听input的哪个事件，在什么时候触发</li>
</ul>
<h2 id="携程"><a href="#携程" class="headerlink" title="携程"></a>携程</h2><ul>
<li>对React看法，有没有遇到一些坑</li>
<li>对闭包的看法，为什么要用闭包</li>
<li>手写数组去重函数</li>
<li>手写数组扁平化函数</li>
<li>介绍下Promise的用途和性质</li>
<li>Promise和Callback有什么区别</li>
<li>React生命周期</li>
<li>两道手写算法题</li>
</ul>
<h2 id="喜马拉雅"><a href="#喜马拉雅" class="headerlink" title="喜马拉雅"></a>喜马拉雅</h2><ul>
<li>ES6新的特性</li>
<li>介绍Promise</li>
<li>Promise有几个状态</li>
<li>说一下闭包</li>
<li>React的生命周期</li>
<li>componentWillReceiveProps的触发条件是什么</li>
<li>React16.3对生命周期的改变</li>
<li>介绍下React的Filber架构</li>
<li>画Filber渲染树</li>
<li>介绍React高阶组件</li>
<li>父子组件之间如何通信</li>
<li>Redux怎么实现属性传递，介绍下原理</li>
<li>React-Router版本号</li>
<li>网站SEO怎么处理</li>
<li>介绍下HTTP状态码</li>
<li>403、301、302是什么</li>
<li>缓存相关的HTTP请求头</li>
<li>介绍HTTPS</li>
<li>HTTPS怎么建立安全通道</li>
<li>前端性能优化（JS原生和React）</li>
<li>用户体验做过什么优化</li>
<li>对PWA有什么了解</li>
<li>对安全有什么了解</li>
<li>介绍下数字签名的原理</li>
<li>前后端通信使用什么方案</li>
<li>RESTful常用的Method</li>
<li>介绍下跨域</li>
<li>Access-Control-Allow-Origin在服务端哪里配置</li>
<li>csrf跨站攻击怎么解决</li>
<li>前端和后端怎么联调</li>
</ul>
<h2 id="兑吧"><a href="#兑吧" class="headerlink" title="兑吧"></a>兑吧</h2><ul>
<li>localStorage和cookie有什么区别</li>
<li>CSS选择器有哪些</li>
<li>盒子模型，以及标准情况和IE下的区别</li>
<li>如何实现高度自适应</li>
<li>prototype和——proto——区别</li>
<li>_construct是什么</li>
<li>new是怎么实现的</li>
<li>promise的精髓，以及优缺点</li>
<li>如何实现H5手机端的适配</li>
<li>rem、flex的区别（root em）</li>
<li>em和px的区别</li>
<li>React声明周期</li>
<li>如何去除url中的#号</li>
<li>Redux状态管理器和变量挂载到window中有什么区别</li>
<li>webpack和gulp的优缺点</li>
<li>如何实现异步加载</li>
<li>如何实现分模块打包（多入口）</li>
<li>前端性能优化（1js css；2 图片；3 缓存预加载； 4 SSR； 5 多域名加载；6 负载均衡）</li>
<li>并发请求资源数上限（6个）</li>
<li>base64为什么能提升性能，缺点</li>
<li>介绍webp这个图片文件格式</li>
<li>介绍koa2</li>
<li>Promise如何实现的</li>
<li>异步请求，低版本fetch如何低版本适配</li>
<li>ajax如何处理跨域</li>
<li>CORS如何设置</li>
<li>jsonp为什么不支持post方法</li>
<li>介绍同源策略</li>
<li>React使用过的一些组件</li>
<li>介绍Immuable</li>
<li>介绍下redux整个流程原理</li>
<li>介绍原型链</li>
<li>如何继承</li>
</ul>
<h2 id="微医"><a href="#微医" class="headerlink" title="微医"></a>微医</h2><ul>
<li>介绍JS数据类型，基本数据类型和引用数据类型的区别</li>
<li>Array是Object类型吗</li>
<li>数据类型分别存在哪里</li>
<li>var a = {name: “前端开发”}; var b = a; a = null那么b输出什么</li>
<li>var a = {b: 1}存放在哪里</li>
<li>var a = {b: {c: 1}}存放在哪里</li>
<li>栈和堆的区别</li>
<li>垃圾回收时栈和堆的区别</li>
<li>数组里面有10万个数据，取第一个元素和第10万个元素的时间相差多少</li>
<li>栈和堆具体怎么存储</li>
<li>介绍闭包以及闭包为什么没清除</li>
<li>闭包的使用场景</li>
<li>JS怎么实现异步</li>
<li>异步整个执行周期</li>
<li>Promise的三种状态</li>
<li>Async/Await怎么实现</li>
<li>Promise和setTimeout执行先后的区别</li>
<li>JS为什么要区分微任务和宏任务</li>
<li>Promise构造函数是同步还是异步执行，then呢</li>
<li>发布-订阅和观察者模式的区别</li>
<li>JS执行过程中分为哪些阶段</li>
<li>词法作用域和this的区别</li>
<li>平常是怎么做继承</li>
<li>深拷贝和浅拷贝</li>
<li>loadsh深拷贝实现原理</li>
<li>ES6中let块作用域是怎么实现的</li>
<li>React中setState后发生了什么</li>
<li>setState为什么默认是异步</li>
<li>setState什么时候是同步的</li>
<li>为什么3大框架出现以后就出现很多native（RN）框架（虚拟DOM）</li>
<li>虚拟DOM主要做了什么</li>
<li>虚拟DOM本身是什么（JS对象）</li>
<li>304是什么</li>
<li>打包时Hash码是怎么生成的</li>
<li>随机值存在一样的情况，如何避免</li>
<li>使用webpack构建时有无做一些自定义操作</li>
<li>webpack做了什么</li>
<li>a，b两个按钮，点击aba，返回顺序可能是baa，如何保证是aba（Promise.then）</li>
<li>node接口转发有无做什么优化</li>
<li>node起服务如何保证稳定性，平缓降级，重启等</li>
<li>RN有没有做热加载</li>
<li>RN遇到的兼容性问题</li>
<li>RN如何实现一个原生的组件</li>
<li>RN混原生和原生混RN有什么不同</li>
<li>什么是单页项目</li>
<li>遇到的复杂业务场景</li>
<li>Promise.all实现原理</li>
</ul>
<h2 id="寺库"><a href="#寺库" class="headerlink" title="寺库"></a>寺库</h2><ul>
<li>介绍Promise的特性，优缺点</li>
<li>介绍Redux</li>
<li>RN的原理，为什么可以同时在安卓和IOS端运行</li>
<li>RN如何调用原生的一些功能</li>
<li>介绍RN的缺点</li>
<li>介绍排序算法和快排原理</li>
<li>堆和栈的区别</li>
<li>介绍闭包</li>
<li>闭包的核心是什么</li>
<li>网络的五层模型</li>
<li>HTTP和HTTPS的区别</li>
<li>HTTPS的加密过程</li>
<li>介绍SSL和TLS</li>
<li>介绍DNS解析</li>
<li>JS的继承方法</li>
<li>介绍垃圾回收</li>
<li>cookie的引用为了解决什么问题</li>
<li>cookie和localStorage的区别</li>
<li>如何解决跨域问题</li>
<li>前端性能优化</li>
</ul>
<h2 id="宝宝树"><a href="#宝宝树" class="headerlink" title="宝宝树"></a>宝宝树</h2><ul>
<li>使用canvas绘图时如何组织成通用组件</li>
<li>formData和原生的ajax有什么区别</li>
<li>介绍下表单提交，和formData有什么关系</li>
<li>介绍redux接入流程</li>
<li>rudux和全局管理有什么区别（数据可控、数据响应）</li>
<li>RN和原生通信</li>
<li>介绍MVP怎么组织</li>
<li>介绍异步方案</li>
<li>promise如何实现then处理</li>
<li>koa2中间件原理</li>
<li>常用的中间件</li>
<li>服务端怎么做统一的状态处理</li>
<li>如何对相对路径引用进行优化</li>
<li>node文件查找优先级</li>
<li>npm2和npm3+有什么区别</li>
<li>海康威视</li>
<li>knex连接数据库响应回调</li>
<li>介绍异步方案</li>
<li>如何处理异常捕获</li>
<li>项目如何管理模块</li>
<li>前端性能优化</li>
<li>JS继承方案</li>
<li>如何判断一个变量是不是数组</li>
<li>变量a和b，如何交换</li>
<li>事件委托</li>
<li>多个<li>标签生成的Dom结构是一个类数组</li>
<li>类数组和数组的区别</li>
<li>dom的类数组如何转成数组</li>
<li>介绍单页面应用和多页面应用</li>
<li>redux状态树的管理</li>
<li>介绍localstorage的API</li>
</ul>
<h2 id="蘑菇街"><a href="#蘑菇街" class="headerlink" title="蘑菇街"></a>蘑菇街</h2><ul>
<li>html语义化的理解</li>
<li>和的区别</li>
<li>对闭包的理解</li>
<li>工程中闭包使用场景</li>
<li>介绍this和原型</li>
<li>使用原型最大的好处</li>
<li>react设计思路</li>
<li>为什么虚拟DOM比真实DOM性能好</li>
<li>react常见的通信方式</li>
<li>redux整体的工作流程</li>
<li>redux和全局对象之间的区别</li>
<li>Redux数据回溯设计思路</li>
<li>单例、工厂、观察者项目中实际场景</li>
<li>项目中树的使用场景以及了解</li>
<li>工作收获</li>
</ul>
<h2 id="酷家乐"><a href="#酷家乐" class="headerlink" title="酷家乐"></a>酷家乐</h2><ul>
<li>react生命周期</li>
<li>react性能优化</li>
<li>添加原生事件不移除为什么会内存泄露</li>
<li>还有哪些地方会内存泄露</li>
<li>setInterval需要注意的点</li>
<li>定时器为什么是不精确的</li>
<li>setTimeout(1)和setTimeout(2)之间的区别</li>
<li>介绍宏任务和微任务</li>
<li>promise里面和then里面执行有什么区别</li>
<li>介绍pureComponet</li>
<li>介绍Function Component</li>
<li>React数据流</li>
<li>props和state的区别</li>
<li>介绍react context</li>
<li>介绍class和ES5的类以及区别</li>
<li>介绍箭头函数和普通函数的区别</li>
<li>介绍defineProperty方法，什么时候需要用到</li>
<li>for..in 和 object.keys的区别</li>
<li>介绍闭包，使用场景</li>
<li>使用闭包特权函数的使用场景</li>
<li>get和post有什么区别</li>
</ul>
<h2 id="百分点"><a href="#百分点" class="headerlink" title="百分点"></a>百分点</h2><ul>
<li>React15/16.x的区别</li>
<li>重新渲染render会做些什么</li>
<li>哪些方法会触发react重新渲染</li>
<li>state和props触发更新的生命周期分别有什么区别</li>
<li>setState是同步还是异步</li>
<li>对无状态组件的理解</li>
<li>介绍Redux工作流程</li>
<li>介绍ES6的功能</li>
<li>let、const以及var的区别</li>
<li>浅拷贝和深拷贝的区别</li>
<li>介绍箭头函数的this</li>
<li>介绍Promise和then</li>
<li>介绍快速排序</li>
<li>算法：前K个最大的元素</li>
</ul>
<h2 id="海风教育"><a href="#海风教育" class="headerlink" title="海风教育"></a>海风教育</h2><ul>
<li>对react看法，它的优缺点</li>
<li>使用过程中遇到的问题，如何解决的</li>
<li>react的理念是什么（拿函数式编程来做页面渲染）</li>
<li>JS是什么范式语言(面向对象还是函数式编程)</li>
<li>koa原理，为什么要用koa(express和koa对比)</li>
<li>使用的koa中间件</li>
<li>ES6使用的语法</li>
<li>Promise 和 async/await 和 callback的区别</li>
<li>Promise有没有解决异步的问题（promise链是真正强大的地方）</li>
<li>Promise和setTimeout的区别（Event Loop）</li>
<li>进程和线程的区别（一个node实例就是一个进程，node是单线程，通过事件循环来实现异步）</li>
<li>介绍下DFS深度优先</li>
<li>介绍下观察者模式</li>
<li>观察者模式里面使用的数据结构(不具备顺序 ，是一个list)</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/31/104-%E3%80%90%E9%9D%A2%E8%AF%95%E9%A2%98%E3%80%912018%E8%BF%91%E6%9C%9F%E5%90%84%E5%A4%A7%E5%85%AC%E5%8F%B8%E9%9D%A2%E8%AF%95%E9%A2%98/" data-id="ckts3ejxv00ll4d9k23yr8esv" data-title="104-【面试题】2018近期各大公司面试题" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-103-【JavaScript】JS中this的4种绑定规则" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/15/103-%E3%80%90JavaScript%E3%80%91JS%E4%B8%ADthis%E7%9A%844%E7%A7%8D%E7%BB%91%E5%AE%9A%E8%A7%84%E5%88%99/" class="article-date">
  <time class="dt-published" datetime="2018-10-15T15:10:37.000Z" itemprop="datePublished">2018-10-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/15/103-%E3%80%90JavaScript%E3%80%91JS%E4%B8%ADthis%E7%9A%844%E7%A7%8D%E7%BB%91%E5%AE%9A%E8%A7%84%E5%88%99/">103-【JavaScript】JS中this的4种绑定规则</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#x6e;&#103;&#x61;&#x6e;&#x38;&#55;&#56;&#55;&#64;&#x71;&#113;&#x2e;&#99;&#x6f;&#109;">&#112;&#105;&#x6e;&#103;&#x61;&#x6e;&#x38;&#55;&#56;&#55;&#64;&#x71;&#113;&#x2e;&#99;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000016678888">原文地址</a></p>
</blockquote>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><ul>
<li>ES6中的<strong>箭头函数</strong>采用的是<strong>词法作用域</strong>。</li>
<li>为什么要使用this：<strong>使API设计得更简洁且易于复用</strong>。</li>
<li>this即不指向自身，也不指向函数的词法作用域。</li>
<li>this的指向只取决于<strong>函数的调用方式</strong>。</li>
</ul>
<h2 id="this绑定规则"><a href="#this绑定规则" class="headerlink" title="this绑定规则"></a>this绑定规则</h2><ul>
<li>new &gt; 显示绑定 &gt; 隐式绑定 &gt; 默认绑定</li>
</ul>
<h3 id="默认绑定"><a href="#默认绑定" class="headerlink" title="默认绑定"></a>默认绑定</h3><ul>
<li>当独立函数调用时，不管是否在调用栈中，this都指向<strong>全局对象</strong>（浏览器中为window）</li>
<li>严格模式下，不能将全局对象用于默认绑定。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line">    foo();</span><br><span class="line">&#125;</span><br><span class="line">bar(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="隐式绑定"><a href="#隐式绑定" class="headerlink" title="隐式绑定"></a>隐式绑定</h3><ul>
<li><p>当函数引用有上下文对象时，隐式绑定规则会把函数调用中的<code>this</code>绑定到这个上下文对象。</p>
</li>
<li><p>对象属性引用链中只有最后一层在调用位置中起作用。</p>
</li>
<li><p>要求：对象内部必须包含一个指向函数的属性，该对象可通过这个属性间接引用函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">42</span>,</span><br><span class="line">    <span class="attr">foo</span>: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">obj2</span>: obj2</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj1.obj2.foo(); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure></li>
<li><p>隐式丢失</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">foo</span>: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = obj.foo; <span class="comment">// 这里bar将引用foo函数本身，所以不带有函数对象的上下文</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;oops, global&quot;</span>; <span class="comment">// a是全局对象的属性</span></span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// &quot;oops, global&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>和回调函数的情况下（参数传递时的隐式赋值）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doFoo</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 参数传递时，相当于fn = obj.foo，就和上个例子一样了</span></span><br><span class="line">    fn(); <span class="comment">// &lt;-- call-site!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">foo</span>: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;oops, global&quot;</span>; <span class="comment">// `a` also property on global object</span></span><br><span class="line"></span><br><span class="line">doFoo( obj.foo ); <span class="comment">// &quot;oops, global&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="显式绑定"><a href="#显式绑定" class="headerlink" title="显式绑定"></a>显式绑定</h3><ul>
<li>采用<code>call()</code>和<code>apply()</code>，通过传入一个对象（若为基本类型，会被封装函数转为对象—装箱），将<code>this</code>绑定到该对象。</li>
<li>硬绑定</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    foo.call( obj );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">setTimeout</span>( bar, <span class="number">100</span> ); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 硬绑定后bar无论怎么调用，都不会影响foo函数的this绑定</span></span><br><span class="line">bar.call( <span class="built_in">window</span> ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>硬绑定的典型应用是如下的包裹函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a, something );</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> foo.apply( obj, <span class="built_in">arguments</span> ); <span class="comment">// 将obj对象硬编码进去</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>即将内部函数用<code>apply</code>硬绑定到某个对象，无论怎么调用这个包裹函数，都不会影响内部函数的<code>this</code>。<br><code>bind</code>辅助函数如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">something</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a, something );</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// simple `bind` helper</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fn.apply( obj, <span class="built_in">arguments</span> ); <span class="comment">// 利用参数将obj传入进去</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = bind( foo, obj ); <span class="comment">// bind( foo, obj )会返回一个包裹函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> ); <span class="comment">// 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>总结</strong>：上述包裹函数，想要包裹其他函数，只能一个一个重复写，硬编码的方式导致不能被重用，当某种功能需要多次重复使用时，将其抽象出来，成为函数。</li>
</ul>
<h2 id="new绑定"><a href="#new绑定" class="headerlink" title="new绑定"></a>new绑定</h2><p>任何函数都可能被用作构造函数，当函数被<code>new</code>操作符“<strong>构造调用</strong>”时，会执行下面操作：</p>
<ol>
<li>创建一个新对象（若该函数不是JS内置的，则创建一个新的Object对象）；</li>
<li>将this绑定到这个对象；</li>
<li>执行构造函数中的代码（为这个新对象添加属性）；</li>
<li>若函数没有返回其他对象，则自动返回这个新对象；若函数有return返回的是非对象，则还是自动返回这个新对象，即覆盖那个非对象。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo( <span class="number">2</span> );</span><br><span class="line"><span class="built_in">console</span>.log( bar.a ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><ul>
<li><p>间接引用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">foo</span>: foo &#125;;</span><br><span class="line"><span class="keyword">var</span> p = &#123; <span class="attr">a</span>: <span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line">o.foo(); <span class="comment">// 3</span></span><br><span class="line">(p.foo = o.foo)(); <span class="comment">// 2，由于p.foo = o.foo的返回值是目标函数的引用，所以调用位置是foo()，而不是p.foo()或o.foo()</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>箭头函数</strong>：不使用这四个this规则，根据<strong>词法作用域</strong>来决定<code>this</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 返回一个箭头函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// `this` here is lexically adopted from `foo()`</span></span><br><span class="line">        <span class="built_in">console</span>.log( <span class="built_in">this</span>.a );</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// foo()不是箭头函数，他的this被绑定到obj1</span></span><br><span class="line"><span class="keyword">var</span> bar = foo.call( obj1 ); <span class="comment">// foo.call( obj1 )返回箭头函数，所以bar为箭头函数</span></span><br><span class="line">bar.call( obj2 ); <span class="comment">// 2! 箭头函数的this无法被修改，new也不行</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>如下为和箭头函数一样的模式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>; <span class="comment">// lexical capture of `this`</span></span><br><span class="line">    <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( self.a );</span><br><span class="line">    &#125;, <span class="number">100</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">foo.call( obj ); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>this绑定的趣题：<br><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21466212">知乎链接-arguments对象调用</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/15/103-%E3%80%90JavaScript%E3%80%91JS%E4%B8%ADthis%E7%9A%844%E7%A7%8D%E7%BB%91%E5%AE%9A%E8%A7%84%E5%88%99/" data-id="ckts3ejs2000e4d9kbh7t9ub2" data-title="103-【JavaScript】JS中this的4种绑定规则" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-102-【JavaScript】懒加载和预加载总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/12/102-%E3%80%90JavaScript%E3%80%91%E6%87%92%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%A2%84%E5%8A%A0%E8%BD%BD%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2018-10-12T13:56:50.000Z" itemprop="datePublished">2018-10-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/12/102-%E3%80%90JavaScript%E3%80%91%E6%87%92%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%A2%84%E5%8A%A0%E8%BD%BD%E6%80%BB%E7%BB%93/">102-【JavaScript】懒加载和预加载总结</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#110;&#103;&#x61;&#x6e;&#x38;&#55;&#x38;&#x37;&#x40;&#113;&#113;&#x2e;&#x63;&#x6f;&#109;">&#x70;&#x69;&#110;&#103;&#x61;&#x6e;&#x38;&#55;&#x38;&#x37;&#x40;&#113;&#113;&#x2e;&#x63;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000016666816">打开原文</a></p>
</blockquote>
<h2 id="一、懒加载"><a href="#一、懒加载" class="headerlink" title="一、懒加载"></a>一、懒加载</h2><h3 id="1-什么是懒加载"><a href="#1-什么是懒加载" class="headerlink" title="1.什么是懒加载"></a>1.什么是懒加载</h3><p>懒加载也叫<strong>延迟加载</strong>，指的是在长网页中<strong>延迟加载图像</strong>，是一种很好优化网页性能的方式。用户滚动到它们之前，可视区域外的图像不会加载。这与图像预加载相反，在长网页上使用延迟加载将使网页加载更快。在某些情况下，它还可以帮助<strong>减少服务器负载</strong>。常适用图片很多，页面很长的电商网站场景中。</p>
<h3 id="2-为什么要用懒加载"><a href="#2-为什么要用懒加载" class="headerlink" title="2.为什么要用懒加载"></a>2.为什么要用懒加载</h3><ul>
<li><p><strong>能提升用户的体验</strong>，不妨设想下，用户打开像手机淘宝长页面的时候，如果页面上所有的图片都需要加载，由于图片数目较大，等待时间很长，用户难免会心生抱怨，这就严重影响用户体验。</p>
</li>
<li><p><strong>减少无效资源的加载</strong>，这样能明显减少了服务器的压力和流量，也能够减小浏览器的负担。</p>
</li>
<li><p><strong>防止并发加载的资源过多会阻塞js的加载</strong>，影响网站的正常使用。</p>
</li>
</ul>
<h3 id="3-懒加载的原理"><a href="#3-懒加载的原理" class="headerlink" title="3.懒加载的原理"></a>3.懒加载的原理</h3><p>首先将页面上的图片的<code>src</code>属性设为空字符串，而图片的真实路径则设置在<code>data-original</code>属性中，<br>当页面滚动的时候需要去监听<code>scroll事件</code>，在<code>scroll事件</code>的回调中，判断我们的懒加载的图片是否进入可视区域,如果图片在可视区内将图片的<code>src</code>属性设置为<code>data-original</code> 的值，这样就可以实现延迟加载。</p>
<h3 id="4-懒加载实现步骤"><a href="#4-懒加载实现步骤" class="headerlink" title="4.懒加载实现步骤"></a>4.懒加载实现步骤</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Lazyload<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-class">.image-item</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-bottom</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;//一定记得设置图片高度</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/1.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/2.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/3.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/4.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/5.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/6.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/7.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/8.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/9.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/10.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/11.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;image-item&quot;</span> <span class="attr">lazyload</span>=<span class="string">&quot;true&quot;</span>  <span class="attr">data-original</span>=<span class="string">&quot;images/12.png&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> viewHeight =<span class="built_in">document</span>.documentElement.clientHeight<span class="comment">//获取可视区高度</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">lazyload</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> eles=<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;img[data-original][lazyload]&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">Array</span>.prototype.forEach.call(eles,<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> rect</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span>(item.dataset.original===<span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">            rect=item.getBoundingClientRect()<span class="comment">// 用于获得页面中某个元素的左，上，右和下分别相对浏览器视窗的位置</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span>(rect.bottom&gt;=<span class="number">0</span> &amp;&amp; rect.top &lt; viewHeight)&#123;</span></span><br><span class="line"><span class="javascript">                !<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> img=<span class="keyword">new</span> Image()</span></span><br><span class="line"><span class="javascript">                    img.src=item.dataset.original</span></span><br><span class="line"><span class="javascript">                    img.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        item.src=img.src</span></span><br><span class="line"><span class="javascript">                    &#125;</span></span><br><span class="line"><span class="javascript">                    item.removeAttribute(<span class="string">&quot;data-original&quot;</span>)<span class="comment">//移除属性，下次不再遍历</span></span></span><br><span class="line"><span class="javascript">                    item.removeAttribute(<span class="string">&quot;lazyload&quot;</span>)</span></span><br><span class="line"><span class="javascript">                &#125;()</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    lazyload()<span class="comment">//刚开始还没滚动屏幕时，要先触发一次函数，初始化首页的页面图片</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener（<span class="string">&quot;scroll&quot;</span>，lazyload)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="二、预加载"><a href="#二、预加载" class="headerlink" title="二、预加载"></a>二、预加载</h2><h3 id="1-什么是预加载"><a href="#1-什么是预加载" class="headerlink" title="1.什么是预加载"></a>1.什么是预加载</h3><p>资源预加载是另一个性能优化技术，我们可以使用该技术来预先告知浏览器某些资源可能在将来会被使用到。<strong>预加载简单来说就是将所有所需的资源提前请求加载到本地，这样后面在需要用到时就直接从缓存取资源</strong>。</p>
<h3 id="2-为什么要用预加载"><a href="#2-为什么要用预加载" class="headerlink" title="2.为什么要用预加载"></a>2.为什么要用预加载</h3><p>在网页全部加载之前，对一些主要内容进行加载，以提供给用户更好的体验，减少等待的时间。否则，如果一个页面的内容过于庞大，没有使用预加载技术的页面就会长时间的展现为一片空白，直到所有内容加载完毕。</p>
<h3 id="实现预加载的几种办法"><a href="#实现预加载的几种办法" class="headerlink" title=".实现预加载的几种办法"></a>.实现预加载的几种办法</h3><ul>
<li><p>使用HTML标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://pic26.nipic.com/20121213/6168183 0044449030002.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>Image对象</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./myPreload.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//myPreload.js文件</span></span><br><span class="line"><span class="keyword">var</span> image= <span class="keyword">new</span> Image()</span><br><span class="line">image.src=<span class="string">&quot;http://pic26.nipic.com/20121213/6168183 004444903000 2.jpg&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用XMLHttpRequest对象,虽然存在跨域问题，但会精细控制预加载过程</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlhttprequest=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xmlhttprequest.onreadystatechange=callback;</span><br><span class="line">xmlhttprequest.onprogress=progressCallback;</span><br><span class="line">xmlhttprequest.open(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;http://image.baidu.com/mouse,jpg&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttprequest.send();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(xmlhttprequest.readyState==<span class="number">4</span>&amp;&amp; xmlhttprequest.status==<span class="number">200</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> responseText=xmlhttprequest.responseText;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;Request was unsuccessful:&quot;</span>+xmlhttprequest.status);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">progressCallback</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e=e || event;</span><br><span class="line">    <span class="keyword">if</span>(e.lengthComputable)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;Received&quot;</span>+e.loaded+<span class="string">&quot;of&quot;</span>+e.total+<span class="string">&quot;bytes&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用PreloadJS库<br>PreloadJS提供了一种预加载内容的一致方式，以便在HTML应用程序中使用。预加载可以使用HTML标签以及XHR来完成。默认情况下，PreloadJS会尝试使用XHR加载内容，因为它提供了对进度和完成事件的更好支持，但是由于跨域问题，使用基于标记的加载可能更好。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用preload.js</span></span><br><span class="line"><span class="keyword">var</span> queue=<span class="keyword">new</span> createjs.LoadQueue();</span><br><span class="line"><span class="comment">//默认是xhr对象，如果是new createjs.LoadQueue(false)是指使用HTML标签，可以跨域</span></span><br><span class="line">queue.on(<span class="string">&quot;complete&quot;</span>,handleComplete,<span class="built_in">this</span>);</span><br><span class="line">queue.loadManifest([</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="string">&quot;myImage&quot;</span>,<span class="attr">src</span>:<span class="string">&quot;http://pic26.nipic.com/20121213/61681830044449030002.jpg&quot;</span>&#125;,</span><br><span class="line">    &#123;id：<span class="string">&quot;myImage2&quot;</span>，src:<span class="string">&quot;http://pic9.nipic.com/20100814/28395261931471581702.jpg&quot;</span>&#125;</span><br><span class="line">]);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleComplete</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> image=queue.getResuLt(<span class="string">&quot;myImage&quot;</span>);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(image);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="三、懒加载和预加载的对比"><a href="#三、懒加载和预加载的对比" class="headerlink" title="三、懒加载和预加载的对比"></a>三、懒加载和预加载的对比</h2><p>两者都是提高页面性能有效的办法，两者主要区别是一个是提前加载，一个是迟缓甚至不加载。懒加载对服务器前端有一定的缓解压力作用，预加载则会增加服务器前端压力。</p>
<h2 id="四、参考文章"><a href="#四、参考文章" class="headerlink" title="四、参考文章"></a>四、参考文章</h2><p><a target="_blank" rel="noopener" href="https://www.geekjc.com/post/58d94d0f16a3655650d6fafe">详解懒加载和预加载(js)</a></p>
<p><a target="_blank" rel="noopener" href="https://lilywei739.github.io/2017/02/06/lazyload_Img.html">懒加载和预加载</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/12/102-%E3%80%90JavaScript%E3%80%91%E6%87%92%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%A2%84%E5%8A%A0%E8%BD%BD%E6%80%BB%E7%BB%93/" data-id="ckts3ejs0000a4d9k8c1ah51z" data-title="102-【JavaScript】懒加载和预加载总结" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-101-【JavaScript】精心收集的48个js代码片段分享" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/11/101-%E3%80%90JavaScript%E3%80%91%E7%B2%BE%E5%BF%83%E6%94%B6%E9%9B%86%E7%9A%8448%E4%B8%AAjs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E5%88%86%E4%BA%AB/" class="article-date">
  <time class="dt-published" datetime="2018-10-11T13:44:02.000Z" itemprop="datePublished">2018-10-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/11/101-%E3%80%90JavaScript%E3%80%91%E7%B2%BE%E5%BF%83%E6%94%B6%E9%9B%86%E7%9A%8448%E4%B8%AAjs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E5%88%86%E4%BA%AB/">101-【JavaScript】精心收集的48个js代码片段分享</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#x6e;&#103;&#x61;&#x6e;&#x38;&#55;&#x38;&#x37;&#x40;&#x71;&#x71;&#46;&#99;&#111;&#x6d;">&#x70;&#x69;&#x6e;&#103;&#x61;&#x6e;&#x38;&#55;&#x38;&#x37;&#x40;&#x71;&#x71;&#46;&#99;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s/LxdDsgPAGTx19T5BZnw6EQ">阅读原文</a></p>
</blockquote>
<p>该项目来自于 <code>Github</code> 用户 <code>Chalarangelo</code>，目前已在 <code>Github</code> 上获得了 <code>5000</code> 多Star，精心收集了多达 <code>48</code> 个有用的 <code>JavaScript</code> 代码片段，该用户的代码可以让程序员在 <code>30</code> 秒甚至更少的时间内理解这些经常用到的基础算法，来看看这些 JavaScript 代码都传达出了什么吧！  </p>
<h2 id="1、Anagrams-of-string（带有重复项）"><a href="#1、Anagrams-of-string（带有重复项）" class="headerlink" title="1、Anagrams of string（带有重复项）"></a>1、Anagrams of string（带有重复项）</h2><p>使用递归。对于给定字符串中的每个字母，为字母创建字谜。使用map()将字母与每部分字谜组合，然后使用reduce()将所有字谜组合到一个数组中，最基本情况是字符串长度等于2或1。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const anagrams = str =&gt; &#123;</span><br><span class="line">  if (str.length &lt;= 2) return str.length === 2 ? [str, str[1] + str[0]] : [str];</span><br><span class="line">  return str.split(&#x27;&#x27;).reduce((acc, letter, i) =&gt;</span><br><span class="line">    acc.concat(anagrams(str.slice(0, i) + str.slice(i + 1)).map(val =&gt; letter + val)), []);</span><br><span class="line">&#125;;</span><br><span class="line">// anagrams(&#x27;abc&#x27;) -&gt; [&#x27;abc&#x27;,&#x27;acb&#x27;,&#x27;bac&#x27;,&#x27;bca&#x27;,&#x27;cab&#x27;,&#x27;cba&#x27;]</span><br></pre></td></tr></table></figure>

<h2 id="2、数组平均数"><a href="#2、数组平均数" class="headerlink" title="2、数组平均数"></a>2、数组平均数</h2><p>使用reduce()将每个值添加到累加器，初始值为0，总和除以数组长度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const average = arr =&gt; arr.reduce((acc, val) =&gt; acc + val, 0) / arr.length;</span><br><span class="line">// average([1,2,3]) -&gt; 2</span><br></pre></td></tr></table></figure>

<h2 id="3、大写每个单词的首字母"><a href="#3、大写每个单词的首字母" class="headerlink" title="3、大写每个单词的首字母"></a>3、大写每个单词的首字母</h2><p>使用replace()匹配每个单词的第一个字符，并使用toUpperCase()来将其大写。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const capitalizeEveryWord = str =&gt; str.replace(/\b[a-z]/g, char =&gt; char.toUpperCase());</span><br><span class="line">// capitalizeEveryWord(&#x27;hello world!&#x27;) -&gt; &#x27;Hello World!&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="4、首字母大写"><a href="#4、首字母大写" class="headerlink" title="4、首字母大写"></a>4、首字母大写</h2><p>使用slice（0,1）和toUpperCase()大写第一个字母，slice（1）获取字符串的其余部分。 省略lowerRest参数以保持字符串的其余部分不变，或将其设置为true以转换为小写。（注意：这和上一个示例不是同一件事情）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const capitalize = (str, lowerRest = false) =&gt;</span><br><span class="line">  str.slice(0, 1).toUpperCase() + (lowerRest ? str.slice(1).toLowerCase() : str.slice(1));</span><br><span class="line">// capitalize(&#x27;myName&#x27;, true) -&gt; &#x27;Myname&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="5、检查回文"><a href="#5、检查回文" class="headerlink" title="5、检查回文"></a>5、检查回文</h2><p>将字符串转换为toLowerCase()，并使用replace()从中删除非字母的字符。然后，将其转换为tolowerCase()，将（’’）拆分为单独字符，reverse()，join（’’），与原始的非反转字符串进行比较，然后将其转换为tolowerCase()。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const palindrome = str =&gt; &#123;</span><br><span class="line">  const s = str.toLowerCase().replace(/[\W_]/g,&#x27;&#x27;);</span><br><span class="line">  return s === s.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">// palindrome(&#x27;taco cat&#x27;) -&gt; true</span><br></pre></td></tr></table></figure>

<h2 id="6、计数数组中值的出现次数"><a href="#6、计数数组中值的出现次数" class="headerlink" title="6、计数数组中值的出现次数"></a>6、计数数组中值的出现次数</h2><p>每次遇到数组中的特定值时，使用reduce()来递增计数器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const countOccurrences = (arr, value) =&gt; arr.reduce((a, v) =&gt; v === value ? a + 1 : a + 0, 0);</span><br><span class="line">// countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span><br></pre></td></tr></table></figure>

<h2 id="7、当前URL"><a href="#7、当前URL" class="headerlink" title="7、当前URL"></a>7、当前URL</h2><p>使用window.location.href来获取当前URL。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const currentUrl = _ =&gt; window.location.href;</span><br><span class="line">// currentUrl() -&gt; &#x27;https://google.com&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="8、Curry"><a href="#8、Curry" class="headerlink" title="8、Curry"></a>8、Curry</h2><p>使用递归。如果提供的参数（args）数量足够，则调用传递函数f，否则返回一个curried函数f。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const curry = (fn, arity = fn.length, ...args) =&gt;</span><br><span class="line">  arity &lt;= args.length</span><br><span class="line">    ? fn(...args)</span><br><span class="line">    : curry.bind(null, fn, arity, ...args);</span><br><span class="line">// curry(Math.pow)(2)(10) -&gt; 1024</span><br><span class="line">// curry(Math.min, 3)(10)(50)(2) -&gt; 2</span><br></pre></td></tr></table></figure>

<h2 id="9、Deep-flatten-array"><a href="#9、Deep-flatten-array" class="headerlink" title="9、Deep flatten array"></a>9、Deep flatten array</h2><p>使用递归，使用reduce()来获取所有不是数组的元素，flatten每个元素都是数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const deepFlatten = arr =&gt;</span><br><span class="line">  arr.reduce((a, v) =&gt; a.concat(Array.isArray(v) ? deepFlatten(v) : v), []);</span><br><span class="line">// deepFlatten([1,[2],[[3],4],5]) -&gt; [1,2,3,4,5]</span><br></pre></td></tr></table></figure>

<h2 id="10、数组之间的区别"><a href="#10、数组之间的区别" class="headerlink" title="10、数组之间的区别"></a>10、数组之间的区别</h2><p>从b创建一个Set，然后在a上使用Array.filter()，只保留b中不包含的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const difference = (a, b) =&gt; &#123; const s = new Set(b); return a.filter(x =&gt; !s.has(x)); &#125;;</span><br><span class="line">// difference([1,2,3], [1,2]) -&gt; [3]</span><br></pre></td></tr></table></figure>

<h2 id="11、两点之间的距离"><a href="#11、两点之间的距离" class="headerlink" title="11、两点之间的距离"></a>11、两点之间的距离</h2><p>使用Math.hypot()计算两点之间的欧几里德距离。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const distance = (x0, y0, x1, y1) =&gt; Math.hypot(x1 - x0, y1 - y0);</span><br><span class="line">// distance(1,1, 2,3) -&gt; 2.23606797749979</span><br></pre></td></tr></table></figure>

<h2 id="12、可以按数字整除"><a href="#12、可以按数字整除" class="headerlink" title="12、可以按数字整除"></a>12、可以按数字整除</h2><p>使用模运算符（％）来检查余数是否等于0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const isDivisible = (dividend, divisor) =&gt; dividend % divisor === 0;</span><br><span class="line">// isDivisible(6,3) -&gt; true</span><br></pre></td></tr></table></figure>

<h2 id="13、转义正则表达式"><a href="#13、转义正则表达式" class="headerlink" title="13、转义正则表达式"></a>13、转义正则表达式</h2><p>使用replace()来转义特殊字符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const escapeRegExp = str =&gt; str.replace(/[.*+?^$&#123;&#125;()|[\]\\]/g, &#x27;\\$&amp;&#x27;);</span><br><span class="line">// escapeRegExp(&#x27;(test)&#x27;) -&gt; \\(test\\)</span><br></pre></td></tr></table></figure>

<h2 id="14、偶数或奇数"><a href="#14、偶数或奇数" class="headerlink" title="14、偶数或奇数"></a>14、偶数或奇数</h2><p>使用Math.abs()将逻辑扩展为负数，使用模（％）运算符进行检查。 如果数字是偶数，则返回true；如果数字是奇数，则返回false。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const isEven = num =&gt; num % 2 === 0;</span><br><span class="line">// isEven(3) -&gt; false</span><br></pre></td></tr></table></figure>

<h2 id="15、阶乘"><a href="#15、阶乘" class="headerlink" title="15、阶乘"></a>15、阶乘</h2><p>使用递归。如果n小于或等于1，则返回1。否则返回n和n - 1的阶乘的乘积。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const factorial = n =&gt; n &lt;= 1 ? 1 : n * factorial(n - 1);</span><br><span class="line">// factorial(6) -&gt; 720</span><br></pre></td></tr></table></figure>

<h2 id="16、斐波那契数组生成器"><a href="#16、斐波那契数组生成器" class="headerlink" title="16、斐波那契数组生成器"></a>16、斐波那契数组生成器</h2><p>创建一个特定长度的空数组，初始化前两个值（0和1）。使用Array.reduce()向数组中添加值，后面的一个数等于前面两个数相加之和（前两个除外）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const fibonacci = n =&gt;</span><br><span class="line">  Array(n).fill(0).reduce((acc, val, i) =&gt; acc.concat(i &gt; 1 ? acc[i - 1] + acc[i - 2] : i), []);</span><br><span class="line">// fibonacci(5) -&gt; [0,1,1,2,3]</span><br></pre></td></tr></table></figure>

<h2 id="17、过滤数组中的非唯一值"><a href="#17、过滤数组中的非唯一值" class="headerlink" title="17、过滤数组中的非唯一值"></a>17、过滤数组中的非唯一值</h2><p>将Array.filter()用于仅包含唯一值的数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const filterNonUnique = arr =&gt; arr.filter(i =&gt; arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line">// filterNonUnique([1,2,2,3,4,4,5]) -&gt; [1,3,5]</span><br></pre></td></tr></table></figure>

<h2 id="18、Flatten数组"><a href="#18、Flatten数组" class="headerlink" title="18、Flatten数组"></a>18、Flatten数组</h2><p>使用reduce()来获取数组中的所有元素，并使用concat()来使它们flatten。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const flatten = arr =&gt; arr.reduce((a, v) =&gt; a.concat(v), []);</span><br><span class="line">// flatten([1,[2],3,4]) -&gt; [1,2,3,4]</span><br></pre></td></tr></table></figure>

<h2 id="19、从数组中获取最大值"><a href="#19、从数组中获取最大值" class="headerlink" title="19、从数组中获取最大值"></a>19、从数组中获取最大值</h2><p>使用Math.max()与spread运算符（…）结合得到数组中的最大值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrayMax = arr =&gt; Math.max(...arr);</span><br><span class="line">// arrayMax([10, 1, 5]) -&gt; 10</span><br></pre></td></tr></table></figure>

<h2 id="20、从数组中获取最小值"><a href="#20、从数组中获取最小值" class="headerlink" title="20、从数组中获取最小值"></a>20、从数组中获取最小值</h2><p>使用Math.min()与spread运算符（…）结合得到数组中的最小值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrayMin = arr =&gt; Math.min(...arr);</span><br><span class="line">// arrayMin([10, 1, 5]) -&gt; 1</span><br></pre></td></tr></table></figure>

<h2 id="21、获取滚动位置"><a href="#21、获取滚动位置" class="headerlink" title="21、获取滚动位置"></a>21、获取滚动位置</h2><p>如果已定义，请使用pageXOffset和pageYOffset，否则使用scrollLeft和scrollTop，可以省略el来使用window的默认值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const getScrollPos = (el = window) =&gt;</span><br><span class="line">  (&#123;x: (el.pageXOffset !== undefined) ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">    y: (el.pageYOffset !== undefined) ? el.pageYOffset : el.scrollTop&#125;);</span><br><span class="line">// getScrollPos() -&gt; &#123;x: 0, y: 200&#125;</span><br></pre></td></tr></table></figure>

<h2 id="22、最大公约数（GCD）"><a href="#22、最大公约数（GCD）" class="headerlink" title="22、最大公约数（GCD）"></a>22、最大公约数（GCD）</h2><p>使用递归。基本情况是当y等于0时。在这种情况下，返回x。否则，返回y的GCD和x / y的其余部分。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const gcd = (x, y) =&gt; !y ? x : gcd(y, x % y);</span><br><span class="line">// gcd (8, 36) -&gt; 4</span><br></pre></td></tr></table></figure>

<h2 id="23、Head-of-list"><a href="#23、Head-of-list" class="headerlink" title="23、Head of list"></a>23、Head of list</h2><p>返回ARR[0]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const head = arr =&gt; arr[0];</span><br><span class="line">// head([1,2,3]) -&gt; 1</span><br></pre></td></tr></table></figure>

<h2 id="24、list初始化"><a href="#24、list初始化" class="headerlink" title="24、list初始化"></a>24、list初始化</h2><p>返回arr.slice（0，-1）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const initial = arr =&gt; arr.slice(0, -1);</span><br><span class="line">// initial([1,2,3]) -&gt; [1,2]</span><br></pre></td></tr></table></figure>

<h2 id="25、用range初始化数组"><a href="#25、用range初始化数组" class="headerlink" title="25、用range初始化数组"></a>25、用range初始化数组</h2><p>使用Array（end-start）创建所需长度的数组，使用map()来填充范围中的所需值，可以省略start使用默认值0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const initializeArrayRange = (end, start = 0) =&gt;</span><br><span class="line">  Array.apply(null, Array(end - start)).map((v, i) =&gt; i + start);</span><br><span class="line">// initializeArrayRange(5) -&gt; [0,1,2,3,4]</span><br></pre></td></tr></table></figure>

<h2 id="26、用值初始化数组"><a href="#26、用值初始化数组" class="headerlink" title="26、用值初始化数组"></a>26、用值初始化数组</h2><p>使用Array（n）创建所需长度的数组，fill(v)以填充所需的值，可以忽略value使用默认值0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const initializeArray = (n, value = 0) =&gt; Array(n).fill(value);</span><br><span class="line">// initializeArray(5, 2) -&gt; [2,2,2,2,2]</span><br></pre></td></tr></table></figure>

<h2 id="27、列表的最后"><a href="#27、列表的最后" class="headerlink" title="27、列表的最后"></a>27、列表的最后</h2><p>返回arr.slice（-1）[0]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const last = arr =&gt; arr.slice(-1)[0];</span><br><span class="line">// last([1,2,3]) -&gt; 3</span><br></pre></td></tr></table></figure>

<h2 id="28、测试功能所花费的时间"><a href="#28、测试功能所花费的时间" class="headerlink" title="28、测试功能所花费的时间"></a>28、测试功能所花费的时间</h2><p>使用performance.now()获取函数的开始和结束时间，console.log()所花费的时间。第一个参数是函数名，随后的参数传递给函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const timeTaken = callback =&gt; &#123;</span><br><span class="line">  console.time(&#x27;timeTaken&#x27;);</span><br><span class="line">  const r = callback();</span><br><span class="line">  console.timeEnd(&#x27;timeTaken&#x27;);</span><br><span class="line">  return r;</span><br><span class="line">&#125;;</span><br><span class="line">// timeTaken(() =&gt; Math.pow(2, 10)) -&gt; 1024</span><br><span class="line">// (logged): timeTaken: 0.02099609375ms</span><br></pre></td></tr></table></figure>

<h2 id="29、来自键值对的对象"><a href="#29、来自键值对的对象" class="headerlink" title="29、来自键值对的对象"></a>29、来自键值对的对象</h2><p>使用Array.reduce()来创建和组合键值对。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const objectFromPairs = arr =&gt; arr.reduce((a, v) =&gt; (a[v[0]] = v[1], a), &#123;&#125;);</span><br><span class="line">// objectFromPairs([[&#x27;a&#x27;,1],[&#x27;b&#x27;,2]]) -&gt; &#123;a: 1, b: 2&#125;</span><br></pre></td></tr></table></figure>

<h2 id="30、管道"><a href="#30、管道" class="headerlink" title="30、管道"></a>30、管道</h2><p>使用Array.reduce()通过函数传递值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const pipe = (...funcs) =&gt; arg =&gt; funcs.reduce((acc, func) =&gt; func(acc), arg);</span><br><span class="line">// pipe(btoa, x =&gt; x.toUpperCase())(&quot;Test&quot;) -&gt; &quot;VGVZDA==&quot;</span><br></pre></td></tr></table></figure>

<h2 id="31、Powerset"><a href="#31、Powerset" class="headerlink" title="31、Powerset"></a>31、Powerset</h2><p>使用reduce()与map()结合来遍历元素，并将其组合成包含所有组合的数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const powerset = arr =&gt;</span><br><span class="line">  arr.reduce((a, v) =&gt; a.concat(a.map(r =&gt; [v].concat(r))), [[]]);</span><br><span class="line">// powerset([1,2]) -&gt; [[], [1], [2], [2,1]]</span><br></pre></td></tr></table></figure>

<h2 id="32、范围内的随机整数"><a href="#32、范围内的随机整数" class="headerlink" title="32、范围内的随机整数"></a>32、范围内的随机整数</h2><p>使用Math.random()生成一个随机数并将其映射到所需的范围，使用Math.floor()使其成为一个整数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const randomIntegerInRange = (min, max) =&gt; Math.floor(Math.random() * (max - min + 1)) + min;</span><br><span class="line">// randomIntegerInRange(0, 5) -&gt; 2</span><br></pre></td></tr></table></figure>

<h2 id="33、范围内的随机数"><a href="#33、范围内的随机数" class="headerlink" title="33、范围内的随机数"></a>33、范围内的随机数</h2><p>使用Math.random()生成一个随机值，使用乘法将其映射到所需的范围。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const randomInRange = (min, max) =&gt; Math.random() * (max - min) + min;</span><br><span class="line">// randomInRange(2,10) -&gt; 6.0211363285087005</span><br></pre></td></tr></table></figure>

<h2 id="34、随机化数组的顺序"><a href="#34、随机化数组的顺序" class="headerlink" title="34、随机化数组的顺序"></a>34、随机化数组的顺序</h2><p>使用sort()重新排序元素，利用Math.random()来随机排序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const shuffle = arr =&gt; arr.sort(() =&gt; Math.random() - 0.5);</span><br><span class="line">// shuffle([1,2,3]) -&gt; [2,3,1]</span><br></pre></td></tr></table></figure>

<h2 id="35、重定向到URL"><a href="#35、重定向到URL" class="headerlink" title="35、重定向到URL"></a>35、重定向到URL</h2><p>使用window.location.href或window.location.replace()重定向到url。 传递第二个参数来模拟链接点击（true - default）或HTTP重定向（false）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const redirect = (url, asLink = true) =&gt;</span><br><span class="line">  asLink ? window.location.href = url : window.location.replace(url);</span><br><span class="line">// redirect(&#x27;https://google.com&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="36、反转一个字符串"><a href="#36、反转一个字符串" class="headerlink" title="36、反转一个字符串"></a>36、反转一个字符串</h2><p>使用数组解构和Array.reverse()来颠倒字符串中的字符顺序。合并字符以使用join(‘’)获取字符串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const reverseString = str =&gt; [...str].reverse().join(&#x27;&#x27;);</span><br><span class="line">// reverseString(&#x27;foobar&#x27;) -&gt; &#x27;raboof&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="37、RGB到十六进制"><a href="#37、RGB到十六进制" class="headerlink" title="37、RGB到十六进制"></a>37、RGB到十六进制</h2><p>使用按位左移运算符（&lt;&lt;）和toString（16），然后padStart（6，“0”）将给定的RGB参数转换为十六进制字符串以获得6位十六进制值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const rgbToHex = (r, g, b) =&gt; ((r &lt;&lt; 16) + (g &lt;&lt; 8) + b).toString(16).padStart(6, &#x27;0&#x27;);</span><br><span class="line">// rgbToHex(255, 165, 1) -&gt; &#x27;ffa501&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="38、滚动到顶部"><a href="#38、滚动到顶部" class="headerlink" title="38、滚动到顶部"></a>38、滚动到顶部</h2><p>使用document.documentElement.scrollTop或document.body.scrollTop获取到顶部的距离。<br>从顶部滚动一小部分距离。<br>使用window.requestAnimationFrame()来滚动。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const scrollToTop = _ =&gt; &#123;</span><br><span class="line">  const c = document.documentElement.scrollTop || document.body.scrollTop;</span><br><span class="line">  if (c &gt; 0) &#123;</span><br><span class="line">    window.requestAnimationFrame(scrollToTop);</span><br><span class="line">    window.scrollTo(0, c - c / 8);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">// scrollToTop()</span><br></pre></td></tr></table></figure>

<h2 id="39、随机数组值"><a href="#39、随机数组值" class="headerlink" title="39、随机数组值"></a>39、随机数组值</h2><p>使用Array.map()和Math.random()创建一个随机值的数组。使用Array.sort()根据随机值对原始数组的元素进行排序。</p>
<h2 id="40、数组之间的相似性"><a href="#40、数组之间的相似性" class="headerlink" title="40、数组之间的相似性"></a>40、数组之间的相似性</h2><p>使用filter()移除不是values的一部分值，使用includes()确定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const similarity = (arr, values) =&gt; arr.filter(v =&gt; values.includes(v));</span><br><span class="line">// similarity([1,2,3], [1,2,4]) -&gt; [1,2]</span><br></pre></td></tr></table></figure>

<h2 id="41、按字符串排序（按字母顺序排列）"><a href="#41、按字符串排序（按字母顺序排列）" class="headerlink" title="41、按字符串排序（按字母顺序排列）"></a>41、按字符串排序（按字母顺序排列）</h2><p>使用split（’’）分割字符串，sort()使用localeCompare()，使用join（’’）重新组合。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const sortCharactersInString = str =&gt;</span><br><span class="line">  str.split(&#x27;&#x27;).sort((a, b) =&gt; a.localeCompare(b)).join(&#x27;&#x27;);</span><br><span class="line">// sortCharactersInString(&#x27;cabbage&#x27;) -&gt; &#x27;aabbceg&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="42、数组总和"><a href="#42、数组总和" class="headerlink" title="42、数组总和"></a>42、数组总和</h2><p>使用reduce()将每个值添加到累加器，初始化值为0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const sum = arr =&gt; arr.reduce((acc, val) =&gt; acc + val, 0);</span><br><span class="line">// sum([1,2,3,4]) -&gt; 10</span><br></pre></td></tr></table></figure>

<h2 id="43、交换两个变量的值"><a href="#43、交换两个变量的值" class="headerlink" title="43、交换两个变量的值"></a>43、交换两个变量的值</h2><p>使用数组解构来交换两个变量之间的值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[varA, varB] = [varB, varA];</span><br><span class="line">// [x, y] = [y, x]</span><br></pre></td></tr></table></figure>

<h2 id="44、列表的tail"><a href="#44、列表的tail" class="headerlink" title="44、列表的tail"></a>44、列表的tail</h2><p>返回arr.slice（1）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const tail = arr =&gt; arr.length &gt; 1 ? arr.slice(1) : arr;</span><br><span class="line">// tail([1,2,3]) -&gt; [2,3]</span><br><span class="line">// tail([1]) -&gt; [1]</span><br></pre></td></tr></table></figure>

<h2 id="45、数组唯一值"><a href="#45、数组唯一值" class="headerlink" title="45、数组唯一值"></a>45、数组唯一值</h2><p>使用ES6 Set和… rest操作符去掉所有重复值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const unique = arr =&gt; [...new Set(arr)];</span><br><span class="line">// unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span><br></pre></td></tr></table></figure>

<h2 id="46、URL参数"><a href="#46、URL参数" class="headerlink" title="46、URL参数"></a>46、URL参数</h2><p>使用match() 与适当的正则表达式来获得所有键值对，适当的map() 。使用Object.assign()和spread运算符（…）将所有键值对组合到一个对象中，将location.search作为参数传递给当前url。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const getUrlParameters = url =&gt;</span><br><span class="line">  url.match(/([^?=&amp;]+)(=([^&amp;]*))/g).reduce(</span><br><span class="line">    (a, v) =&gt; (a[v.slice(0, v.indexOf(&#x27;=&#x27;))] = v.slice(v.indexOf(&#x27;=&#x27;) + 1), a), &#123;&#125;</span><br><span class="line">  );</span><br><span class="line">// getUrlParameters(&#x27;http://url.com/page?name=Adam&amp;surname=Smith&#x27;) -&gt; &#123;name: &#x27;Adam&#x27;, surname: &#x27;Smith&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="47、UUID生成器"><a href="#47、UUID生成器" class="headerlink" title="47、UUID生成器"></a>47、UUID生成器</h2><p>使用crypto API生成符合RFC4122版本4的UUID。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const uuid = _ =&gt;</span><br><span class="line">  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =&gt;</span><br><span class="line">    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)</span><br><span class="line">  );</span><br><span class="line">// uuid() -&gt; &#x27;7982fcfe-5721-4632-bede-6000885be57d&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="48、验证数字"><a href="#48、验证数字" class="headerlink" title="48、验证数字"></a>48、验证数字</h2><p>使用！isNaN和parseFloat()来检查参数是否是一个数字，使用isFinite()来检查数字是否是有限的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const validateNumber = n =&gt; !isNaN(parseFloat(n)) &amp;&amp; isFinite(n) &amp;&amp; Number(n) == n;</span><br><span class="line">// validateNumber(&#x27;10&#x27;) -&gt; true</span><br></pre></td></tr></table></figure>

<p>翻译多有不准确之处，感兴趣的程序员可以自行到Github上查看英文原版。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/11/101-%E3%80%90JavaScript%E3%80%91%E7%B2%BE%E5%BF%83%E6%94%B6%E9%9B%86%E7%9A%8448%E4%B8%AAjs%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E5%88%86%E4%BA%AB/" data-id="ckts3ejry00084d9k0zyggpl1" data-title="101-【JavaScript】精心收集的48个js代码片段分享" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-100-【CSS】那个被我们忽略的outline" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/09/100-%E3%80%90CSS%E3%80%91%E9%82%A3%E4%B8%AA%E8%A2%AB%E6%88%91%E4%BB%AC%E5%BF%BD%E7%95%A5%E7%9A%84outline/" class="article-date">
  <time class="dt-published" datetime="2018-10-09T14:18:24.000Z" itemprop="datePublished">2018-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/09/100-%E3%80%90CSS%E3%80%91%E9%82%A3%E4%B8%AA%E8%A2%AB%E6%88%91%E4%BB%AC%E5%BF%BD%E7%95%A5%E7%9A%84outline/">100-【CSS】那个被我们忽略的outline</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#110;&#103;&#x61;&#110;&#56;&#x37;&#56;&#x37;&#x40;&#113;&#x71;&#x2e;&#99;&#111;&#109;">&#112;&#105;&#110;&#103;&#x61;&#110;&#56;&#x37;&#56;&#x37;&#x40;&#113;&#x71;&#x2e;&#99;&#111;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章</td>
<td><a target="_blank" rel="noopener" href="https://0x9.me/KMrv3">https://0x9.me/KMrv3</a></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p>原文作者：^_^肥仔John<br>原文地址：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/fsjohnhuang/p/9753554.html">https://www.cnblogs.com/fsjohnhuang/p/9753554.html</a> </p>
</blockquote>
<p>本文分享一个常常被忽略的属性——outline，由于之前对其印象确实有些模糊，于是本文打算对其进行稍微深入的研究^_^</p>
<h2 id="Spec是这样描述它的"><a href="#Spec是这样描述它的" class="headerlink" title="Spec是这样描述它的"></a>Spec是这样描述它的</h2><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>用于创建可视对象的轮廓(元素的<code>border-box</code>)，如表单按钮轮廓等。</p>
<h3 id="与border不同"><a href="#与border不同" class="headerlink" title="与border不同"></a>与border不同</h3><ul>
<li>outline不占文档空间；</li>
<li>outline不一定是矩形。</li>
</ul>
<h3 id="具体属性说明"><a href="#具体属性说明" class="headerlink" title="具体属性说明"></a>具体属性说明</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 轮廓线颜色 </span></span><br><span class="line"><span class="comment"> * invert表示为颜色反转，即使轮廓在不同的背景颜色中都可见 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="attribute">outline-color</span>: invert | &lt;color_name&gt; | &lt;hex_number&gt; | &lt;rgb_number&gt; | inherit</span><br><span class="line">/* 轮廓线样式 */</span><br><span class="line">outline-style: none | dotted | dashed | solid | double | groove | ridge | inset | outset | inherit</span><br><span class="line">/* 轮廓线宽度 */</span><br><span class="line">outline-width: medium | thin | thick | &lt;length&gt; | inherit</span><br><span class="line">/* 一次性设置轮廓线的颜色、样式 和 宽度 */</span><br><span class="line">outline: &lt;outline-color&gt; &lt;outline-style&gt; &lt;outline-width&gt;;</span><br><span class="line"><span class="comment">/* 轮廓线的偏移量，大于0则轮廓扩大，小于0则轮廓缩小 */</span></span><br><span class="line"><span class="attribute">outline-offset</span>: <span class="number">0px</span>;</span><br></pre></td></tr></table></figure>

<h2 id="魔鬼在细节"><a href="#魔鬼在细节" class="headerlink" title="魔鬼在细节"></a>魔鬼在细节</h2><h3 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h3><ul>
<li><code>outline</code>作为<strong>CSS2.1规范</strong>，因此<strong>IE6/7/8(Q)均不支持</strong>，在IE8下写入正确的DOCTYPE则支持<code>outline</code>属性。</li>
<li><code>outline-offset</code>则<strong>IE下均不支持</strong>。</li>
</ul>
<h3 id="IE6-7-8-Q-下隐藏outline"><a href="#IE6-7-8-Q-下隐藏outline" class="headerlink" title="IE6/7/8(Q)下隐藏outline"></a>IE6/7/8(Q)下隐藏outline</h3><p>若要在**IE6/7/8(Q)**下隐藏<code>outline</code>效果，则在元素上添加<code>hideFocus</code>特性即可。</p>
<h3 id="outline-0和outline-none的区别"><a href="#outline-0和outline-none的区别" class="headerlink" title="outline:0和outline:none的区别"></a>outline:0和outline:none的区别</h3><p>在Chrome下执行如下代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"> <span class="selector-class">.outline0</span>&#123;</span></span><br><span class="line"><span class="css">   <span class="attribute">outline</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css"> &#125;</span></span><br><span class="line"><span class="css"> <span class="selector-class">.outline-none</span>&#123;</span></span><br><span class="line"><span class="css">   <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="css"> &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;outline0&quot;</span>&gt;</span>outline: 0<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;outline-none&quot;</span>&gt;</span>outline: none<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> $ = <span class="built_in">document</span>.querySelector.bind(<span class="built_in">document</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> print = <span class="built_in">console</span>.log.bind(<span class="built_in">console</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> cssProps = [<span class="string">&quot;outline-width&quot;</span>, <span class="string">&quot;outline-style&quot;</span>, <span class="string">&quot;outline-color&quot;</span>]</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> slctrs = [<span class="string">&quot;.outline0&quot;</span>, <span class="string">&quot;.outline-none&quot;</span>]</span></span><br><span class="line"><span class="javascript">     </span></span><br><span class="line"><span class="javascript">  slctrs.forEach(<span class="function"><span class="params">slctr</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    styles = <span class="built_in">window</span>.getComputedStyle($(slctr))</span></span><br><span class="line"><span class="javascript">      cssProps.forEach(<span class="function"><span class="params">cssProp</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        print(<span class="string">&quot;%s, %s is %s&quot;</span>, slctr, cssProp, styles[cssProp])</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>结果</strong>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outline0</span>, <span class="attribute">outline-width</span> is <span class="number">0px</span></span><br><span class="line"><span class="selector-class">.outline0</span>, <span class="attribute">outline-style</span> is <span class="attribute">none</span></span><br><span class="line"><span class="selector-class">.outline0</span>, <span class="attribute">outline-color</span> is rgb(<span class="number">0</span>, <span class="number">0</span>, <span class="number">238</span>)</span><br><span class="line"><span class="selector-class">.outline-none</span>, <span class="attribute">outline-width</span> is <span class="number">0px</span></span><br><span class="line"><span class="selector-class">.outline-none</span>, <span class="attribute">outline-style</span> is <span class="attribute">none</span></span><br><span class="line"><span class="selector-class">.outline-none</span>, <span class="attribute">outline-color</span> is rgb(<span class="number">0</span>, <span class="number">0</span>, <span class="number">238</span>)</span><br></pre></td></tr></table></figure>
<p><code>outline</code>仅仅为设置单个或多个具体的<code>outline</code>属性提供更便捷的API而已，因此<code>outline:0</code>和<code>outline:none</code>本质上效果是一致的。</p>
<h3 id="真心没法弄出圆角"><a href="#真心没法弄出圆角" class="headerlink" title="真心没法弄出圆角"></a>真心没法弄出圆角</h3><p>自从有了<code>border-radius</code>后，我们就可以通过CSS制作圆角矩形、圆形等图形，甚至连<code>box-shadow</code>也受到<code>border-radius</code>影响从而实现元素阴影也能做到圆角的效果。那么<code>outline</code>是否也能做出圆角的效果呢？  </p>
<p>答案是否定的。那是因为<code>outline</code>的作用本来就是用于勾勒出元素所占的空间轮廓，通过<code>border-radius</code>虽然实现了图形视觉上的圆角，但该元素所占位置空间一点都没有变化，还是那个有棱有角的方形。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.round</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">outline</span>: solid <span class="number">1px</span> red;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="http://images.pingan8787.com/2018100901.png" alt="img1"></p>
<h3 id="轮廓的差异"><a href="#轮廓的差异" class="headerlink" title="轮廓的差异"></a>轮廓的差异</h3><p> 在Chrome下outline仅限于标识当前元素自身所占的位置空间（border-box），但在FireFox下则包含子孙元素所占的位置空间。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.outline</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">13px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">13px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">outline</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outline&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> el = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.outline&quot;</span>)</span></span><br><span class="line"><span class="javascript">  el.textContent = !!~navigator.appVersion.indexOf(<span class="string">&quot;Chrome&quot;</span>) ? <span class="string">&quot;Chrome&quot;</span> : <span class="string">&quot;FireFox&quot;</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="http://images.pingan8787.com/2018100902png.png" alt="img2"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/09/100-%E3%80%90CSS%E3%80%91%E9%82%A3%E4%B8%AA%E8%A2%AB%E6%88%91%E4%BB%AC%E5%BF%BD%E7%95%A5%E7%9A%84outline/" data-id="ckts3ejrw00064d9kfx7aavq2" data-title="100-【CSS】那个被我们忽略的outline" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-99-【JavaScript】前端HTML5几种存储方式的总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/07/99-%E3%80%90JavaScript%E3%80%91%E5%89%8D%E7%AB%AFHTML5%E5%87%A0%E7%A7%8D%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E7%9A%84%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2018-10-07T12:56:38.000Z" itemprop="datePublished">2018-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/07/99-%E3%80%90JavaScript%E3%80%91%E5%89%8D%E7%AB%AFHTML5%E5%87%A0%E7%A7%8D%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E7%9A%84%E6%80%BB%E7%BB%93/">99-【JavaScript】前端HTML5几种存储方式的总结</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#110;&#103;&#x61;&#110;&#56;&#x37;&#x38;&#x37;&#64;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;">&#x70;&#x69;&#110;&#103;&#x61;&#110;&#56;&#x37;&#x38;&#x37;&#64;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章</td>
<td><a target="_blank" rel="noopener" href="https://0x9.me/KMrv3">https://0x9.me/KMrv3</a></td>
</tr>
</tbody></table>
<hr>
<p>接下来要好好总结一些知识，秋招来啦。。。虽然有好多知识都不大会，但是还是要努力一下，运气这种东西，谁知道呢~</p>
<h2 id="总体情况"><a href="#总体情况" class="headerlink" title="总体情况"></a>总体情况</h2><p>h5之前，存储主要是用<code>cookies</code>。<code>cookies</code>缺点有<strong>在请求头上带着数据</strong>，大小是<strong>4k之内</strong>，主Domain污染。</p>
<p>主要应用：购物车、客户登录</p>
<p>对于IE浏览器有<code>UserData</code>，大小是64k,只有IE浏览器支持。</p>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>解决4k的大小问题<br>解决请求头常带存储信息的问题<br>解决关系型存储的问题<br>跨浏览器  </p>
<h3 id="1-本地存储localstorage"><a href="#1-本地存储localstorage" class="headerlink" title="1.本地存储localstorage"></a>1.本地存储localstorage</h3><ul>
<li><strong>存储方式</strong>：</li>
</ul>
<p>以<code>键值对</code>(<code>Key-Value</code>)的方式存储，<strong>永久存储</strong>，<strong>永不失效</strong>，<strong>除非手动删除</strong>。</p>
<ul>
<li><strong>大小</strong>：</li>
</ul>
<p>每个域名<strong>5M</strong></p>
<ul>
<li><strong>支持情况</strong>：</li>
</ul>
<p><img src="http://images.pingan8787.com/2018100701.png" alt="图片1"></p>
<p>注意：IE9 <code>localStorage</code>不支持本地文件，需要将项目署到服务器，才可以支持！</p>
<ul>
<li><strong>检测方法</strong>：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.localStorage)&#123;</span><br><span class="line">    alert(<span class="string">&#x27;This browser supports localStorage&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;This browser does NOT support localStorage&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>常用的API</strong>：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">getItem     <span class="comment">//取记录</span></span><br><span class="line"></span><br><span class="line">setIten     <span class="comment">//设置记录</span></span><br><span class="line"></span><br><span class="line">removeItem  <span class="comment">//移除记录</span></span><br><span class="line"></span><br><span class="line">key         <span class="comment">//取key所对应的值</span></span><br><span class="line"></span><br><span class="line">clear       <span class="comment">//清除记录</span></span><br></pre></td></tr></table></figure>

<p><img src="http://images.pingan8787.com/2018100702.png" alt="图片2"></p>
<ul>
<li><strong>存储的内容</strong>：</li>
</ul>
<p>数组，图片，json，样式，脚本。。。（只要是能序列化成字符串的内容都可以存储）</p>
<h3 id="2-本地存储sessionstorage"><a href="#2-本地存储sessionstorage" class="headerlink" title="2.本地存储sessionstorage"></a>2.本地存储sessionstorage</h3><p>HTML5 的本地存储 API 中的 <code>localStorage</code> 与 <code>sessionStorage</code> 在使用方法上是相同的，区别在于 <code>sessionStorage</code> 在<strong>关闭页面后即被清空</strong>，而 <code>localStorage</code> 则会<strong>一直保存</strong>。</p>
<h3 id="3-离线缓存（application-cache）"><a href="#3-离线缓存（application-cache）" class="headerlink" title="3.离线缓存（application cache）"></a>3.离线缓存（application cache）</h3><p>本地缓存应用所需的文件</p>
<ul>
<li><strong>使用方法</strong>：</li>
</ul>
<p>配置<strong>manifest文件</strong></p>
<p>页面上：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">manifest</span>=<span class="string">&quot;demo.appcache&quot;</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>Manifest 文件</strong>：</p>
<p>manifest 文件是简单的文本文件，它告知浏览器被缓存的内容（以及不缓存的内容）。</p>
<p>manifest 文件可分为三个部分：</p>
<ol>
<li><p><strong>CACHE MANIFEST</strong> - 在此标题下列出的文件将在首次下载后进行缓存</p>
</li>
<li><p><strong>NETWORK</strong> - 在此标题下列出的文件需要与服务器的连接，且不会被缓存</p>
</li>
<li><p><strong>FALLBACK</strong> - 在此标题下列出的文件规定当页面无法访问时的回退页面（比如 404 页面）</p>
</li>
</ol>
<p>完整demo：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line"># 2016-07-24 v1.0.0</span><br><span class="line">/theme.css</span><br><span class="line">/main.js</span><br><span class="line"> </span><br><span class="line">NETWORK:</span><br><span class="line">login.jsp</span><br><span class="line"> </span><br><span class="line">FALLBACK:</span><br><span class="line">/html/ /offline.html</span><br></pre></td></tr></table></figure>

<p>服务器上：manifest文件需要配置正确的<code>MIME-type</code>，即 “<code>text/cache-manifest</code>“。  </p>
<p>如Tomcat:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mime-mapping</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">extension</span>&gt;</span>manifest<span class="tag">&lt;/<span class="name">extension</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mime-type</span>&gt;</span>text/cache-manifest<span class="tag">&lt;/<span class="name">mime-type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mime-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>常用API</strong>：</p>
<p>核心是<code>applicationCache对象</code>，有个<code>status</code>属性，表示应用缓存的当前状态：</p>
<p><strong>0</strong>（UNCACHED） :  无缓存， 即没有与页面相关的应用缓存</p>
<p><strong>1</strong>（IDLE） : 闲置，即应用缓存未得到更新</p>
<p><strong>2</strong> （CHECKING） : 检查中，即正在下载描述文件并检查更新</p>
<p><strong>3</strong> （DOWNLOADING） : 下载中，即应用缓存正在下载描述文件中指定的资源</p>
<p><strong>4</strong> （UPDATEREADY） : 更新完成，所有资源都已下载完毕</p>
<p><strong>5</strong> （IDLE） :  废弃，即应用缓存的描述文件已经不存在了，因此页面无法再访问应用缓存</p>
<p><strong>相关的事件</strong>：</p>
<p>表示应用缓存状态的改变：</p>
<p><strong>checking</strong> : 在浏览器为应用缓存查找更新时触发</p>
<p><strong>error</strong> : 在检查更新或下载资源期间发送错误时触发</p>
<p><strong>noupdate</strong> : 在检查描述文件发现文件无变化时触发</p>
<p><strong>downloading</strong> : 在开始下载应用缓存资源时触发</p>
<p><strong>progress</strong>：在文件下载应用缓存的过程中持续不断地下载地触发</p>
<p><strong>updateready</strong> : 在页面新的应用缓存下载完毕触发</p>
<p><strong>cached</strong> : 在应用缓存完整可用时触发</p>
<p><strong>Application Cache的三个优势</strong>：</p>
<ol>
<li><p>离线浏览</p>
</li>
<li><p>提升页面载入速度</p>
</li>
<li><p>降低服务器压力</p>
</li>
</ol>
<p><strong>注意事项</strong>：</p>
<ol>
<li>浏览器对缓存数据的容量限制可能不太一样（某些浏览器设置的限制是每个站点 5MB）。</li>
<li>如果manifest文件，或者内部列举的某一个文件不能正常下载，整个更新过程将视为失败，浏览器继续全部使用老的缓存。</li>
<li>引用manifest的html必须与manifest文件同源，在同一个域下。</li>
<li>浏览器会自动缓存引用manifest文件的HTML文件，这就导致如果改了HTML内容，也需要更新版本才能做到更新。</li>
<li>manifest文件中CACHE则与NETWORK，FALLBACK的位置顺序没有关系，如果是隐式声明需要在最前面。</li>
<li>FALLBACK中的资源必须和manifest文件同源。</li>
<li>更新完版本后，必须刷新一次才会启动新版本（会出现重刷一次页面的情况），需要添加监听版本事件。</li>
<li>站点中的其他页面即使没有设置manifest属性，请求的资源如果在缓存中也从缓存中访问。</li>
<li>当manifest文件发生改变时，资源请求本身也会触发更新。</li>
</ol>
<p><strong>离线缓存与传统浏览器缓存区别</strong>：</p>
<ol>
<li><p>离线缓存是针对整个应用，浏览器缓存是单个文件</p>
</li>
<li><p>离线缓存断网了还是可以打开页面，浏览器缓存不行</p>
</li>
<li><p>离线缓存可以主动通知浏览器更新资源</p>
</li>
</ol>
<h3 id="4-Web-SQL"><a href="#4-Web-SQL" class="headerlink" title="4.Web SQL"></a>4.Web SQL</h3><p><strong>关系数据库</strong>，通过SQL语句访问</p>
<p>Web SQL 数据库 API 并不是 HTML5 规范的一部分，但是它是一个独立的规范，引入了一组使用 SQL 操作客户端数据库的 APIs。</p>
<p><strong>支持情况</strong>：<br>Web SQL 数据库可以在最新版的 <strong>Safari</strong>, <strong>Chrome</strong> 和 <strong>Opera</strong> 浏览器中工作。</p>
<p><strong>核心方法</strong>：</p>
<ol>
<li><p><strong>openDatabase</strong>：这个方法使用现有的数据库或者新建的数据库创建一个数据库对象。</p>
</li>
<li><p><strong>transaction</strong>：这个方法让我们能够控制一个事务，以及基于这种情况执行提交或者回滚。</p>
</li>
<li><p><strong>executeSql</strong>：这个方法用于执行实际的 SQL 查询。</p>
</li>
</ol>
<p><strong>打开数据库</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db = openDatabase(<span class="string">&#x27;mydb&#x27;</span>, <span class="string">&#x27;1.0&#x27;</span>, <span class="string">&#x27;Test DB&#x27;</span>, <span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>,fn);</span><br><span class="line"><span class="comment">//openDatabase() 方法对应的五个参数分别为：数据库名称、版本号、描述文本、数据库大小、创建回调</span></span><br></pre></td></tr></table></figure>

<p><strong>执行查询操作</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db = openDatabase(<span class="string">&#x27;mydb&#x27;</span>, <span class="string">&#x27;1.0&#x27;</span>, <span class="string">&#x27;Test DB&#x27;</span>, <span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>);</span><br><span class="line">db.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123; </span><br><span class="line">   tx.executeSql(<span class="string">&#x27;CREATE TABLE IF NOT EXISTS WIN (id unique, name)&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>插入数据</strong>：　</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db = openDatabase(<span class="string">&#x27;mydb&#x27;</span>, <span class="string">&#x27;1.0&#x27;</span>, <span class="string">&#x27;Test DB&#x27;</span>, <span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>);</span><br><span class="line">db.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">   tx.executeSql(<span class="string">&#x27;CREATE TABLE IF NOT EXISTS WIN (id unique, name)&#x27;</span>);</span><br><span class="line">   tx.executeSql(<span class="string">&#x27;INSERT INTO WIN (id, name) VALUES (1, &quot;winty&quot;)&#x27;</span>);</span><br><span class="line">   tx.executeSql(<span class="string">&#x27;INSERT INTO WIN (id, name) VALUES (2, &quot;LuckyWinty&quot;)&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>读取数据</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">db.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">   tx.executeSql(<span class="string">&#x27;SELECT * FROM WIN&#x27;</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params">tx, results</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> len = results.rows.length, i;</span><br><span class="line">      msg = <span class="string">&quot;&lt;p&gt;查询记录条数: &quot;</span> + len + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">      <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#status&#x27;</span>).innerHTML +=  msg;</span><br><span class="line">     </span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)&#123;</span><br><span class="line">         alert(results.rows.item(i).name );</span><br><span class="line">      &#125;</span><br><span class="line">     </span><br><span class="line">   &#125;, <span class="literal">null</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>由这些操作可以看出，基本上都是用SQL语句进行数据库的相关操作，如果你会MySQL的话，这个应该比较容易用。</p>
<h3 id="5-IndexedDB"><a href="#5-IndexedDB" class="headerlink" title="5.IndexedDB"></a>5.IndexedDB</h3><p>索引数据库 (IndexedDB) API（作为 HTML5 的一部分）对创建具有丰富本地存储数据的数据密集型的离线 HTML5 Web 应用程序很有用。同时它还有助于<strong>本地缓存数据</strong>，使传统在线 Web 应用程序（比如移动 Web 应用程序）能够<strong>更快地运行和响应</strong>。</p>
<p><strong>异步API</strong>：<br>在IndexedDB大部分操作并不是我们常用的调用方法，返回结果的模式，而是请求——响应的模式，比如打开数据库的操作</p>
<p><img src="http://images.pingan8787.com/2018100703.png" alt="图片3"></p>
<p>这样，我们打开数据库的时候，实质上返回了一个DB对象，而这个对象就在<code>result</code>中。由上图可以看出，除了result之外。还有几个重要的属性就是<code>onerror</code>、<code>onsuccess</code>、<code>onupgradeneeded</code>（我们请求打开的数据库的版本号和已经存在的数据库版本号不一致的时候调用）。这就类似于我们的ajax请求那样。我们发起了这个请求之后并不能确定它什么时候才请求成功，所以需要在回调中处理一些逻辑。</p>
<p><strong>关闭与删除</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closeDB</span>(<span class="params">db</span>)</span>&#123;</span><br><span class="line">     db.close();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteDB</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">     indexedDB.deleteDatabase(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数据存储</strong>：</p>
<p><strong>indexedDB</strong>中没有表的概念，而是<code>objectStore</code>，一个数据库中可以包含多个<code>objectStore</code>，<code>objectStore</code>是一个灵活的数据结构，可以存放多种类型数据。也就是说一个<code>objectStore</code>相当于一张表，里面存储的每条数据和一个键相关联。</p>
<p>我们可以使用每条记录中的某个指定字段作为<strong>键值</strong>（keyPath），也可以使用自动生成的递增数字作为键值（keyGenerator），也可以不指定。选择键的类型不同，objectStore可以存储的数据结构也有差异。　</p>
<p>这个就有点复杂了。看这里的教程：<br>1.<a target="_blank" rel="noopener" href="http://www.cnblogs.com/dolphinX/p/3415761.html">http://www.cnblogs.com/dolphinX/p/3415761.html</a>　</p>
<p>2.<a target="_blank" rel="noopener" href="http://www.cnblogs.com/dolphinX/p/3416889.html">http://www.cnblogs.com/dolphinX/p/3416889.html</a><br>详细API地址：<a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/web/wa-indexeddb/#ibm-pcon">http://www.ibm.com/developerworks/cn/web/wa-indexeddb/#ibm-pcon</a></p>
<p>暂时就这样，确实有些存储方式未亲身用过，也只能找些别人的资料了。先了解个大概，以后用到再详细记录吧！^_^</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/07/99-%E3%80%90JavaScript%E3%80%91%E5%89%8D%E7%AB%AFHTML5%E5%87%A0%E7%A7%8D%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E7%9A%84%E6%80%BB%E7%BB%93/" data-id="ckts3ejwh00br4d9k6u8bdmwh" data-title="99-【JavaScript】前端HTML5几种存储方式的总结" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-98-【HTML】HTML5中data-自定义属性" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/06/98-%E3%80%90HTML%E3%80%91HTML5%E4%B8%ADdata-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7/" class="article-date">
  <time class="dt-published" datetime="2018-10-06T14:30:14.000Z" itemprop="datePublished">2018-10-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/06/98-%E3%80%90HTML%E3%80%91HTML5%E4%B8%ADdata-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7/">98-【HTML】HTML5中data-*自定义属性</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#x6e;&#103;&#97;&#x6e;&#x38;&#x37;&#56;&#55;&#x40;&#113;&#x71;&#46;&#99;&#111;&#x6d;">&#x70;&#105;&#x6e;&#103;&#97;&#x6e;&#x38;&#x37;&#56;&#55;&#x40;&#113;&#x71;&#46;&#99;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章</td>
<td><a target="_blank" rel="noopener" href="https://0x9.me/KMrv3">https://0x9.me/KMrv3</a></td>
</tr>
</tbody></table>
<hr>
<p>在<strong>jQuery</strong>的<code>att</code>r与<code>prop</code>提到过在IE9之前版本中如果使用<code>property</code>不当会造成内存泄露问题，而且关于<code>Attribute</code>和<code>Property</code>的区别也让人十分头痛，在HTML5中添加了<code>data-*</code>的方式来<strong>自定义属性</strong>，所谓<code>data-*</code>实际上上就是<code>data-</code>前缀加上自定义的属性名，使用这样的结构可以进行数据存放。使用<code>data-*</code>可以<strong>解决自定义属性混乱无管理的现状</strong>。</p>
<h3 id="1-读写方式"><a href="#1-读写方式" class="headerlink" title="1. 读写方式"></a>1. 读写方式</h3><p><code>data-*</code>有两种设置方式，可以直接在<code>HTML元素标签</code>上书写：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span> <span class="attr">data-age</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line">    Click Here</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中的<code>data-age</code>就是一种自定义属性，当然我们也可以通过<strong>JavaScript</strong>来对其进行操作，<strong>HTML5</strong>中元素都会有一个<code>dataset</code>的属性，这是一个<code>DOMStringMap</code>类型的键值对集合：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">test.dataset.my = <span class="string">&#x27;Byron&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>这样就为<code>div</code>添加了一个<code>data-my</code>的自定义属性，使用JavaScript操作<code>dataset</code>有两个需要注意的地方：  </p>
<ul>
<li><ol>
<li>我们在<strong>添加</strong>或<strong>读取</strong>属性的时候需要去掉前缀<code>data-*</code>，像上面的例子我们没有使用<code>test.dataset.data-my = &#39;Byron&#39;;</code>的形式。</li>
</ol>
</li>
<li><ol start="2">
<li>如果属性名称中还包含连字符(<code>-</code>)，需要转成<strong>驼峰命名</strong>方式，但如果在CSS中使用选择器，我们需要使用连字符格式。</li>
</ol>
</li>
</ul>
<p>为刚才代码追加写内容： </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-attr">[data-birth-date]</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#0f0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>:<span class="number">20px</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test.dataset.birthDate = <span class="string">&#x27;19890615&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>这样我们通过JavaScript设置了data-birth-date自定义属性，在CSS样式表为div添加了一些样式，看看效果</p>
<p><img src="http://images.pingan8787.com/2018100601.png" alt="图片1"></p>
<p><img src="http://images.pingan8787.com/2018100602.png" alt="图片2"></p>
<p>读取的时候也是通过<code>dataset</code>对象，使用”<code>.</code>”来获取属性，同样需要去掉<code>data-</code>前缀，连字符需要转化为驼峰命名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">test.dataset.my = <span class="string">&#x27;Byron&#x27;</span>;</span><br><span class="line">test.dataset.birthDate = <span class="string">&#x27;19890615&#x27;</span>;</span><br><span class="line">test.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.dataset.my + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.dataset.age+<span class="string">&#x27; &#x27;</span>+<span class="built_in">this</span>.dataset.birthDate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://images.pingan8787.com/2018100603.png" alt="图片3"></p>
<h3 id="2-getAttribute-setAttribute"><a href="#2-getAttribute-setAttribute" class="headerlink" title="2. getAttribute/setAttribute"></a>2. getAttribute/setAttribute</h3><p>有些同学可能会问这和<code>getAttribute</code>/<code>setAttribute</code>除了命名有什么区别吗，我们来看一下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">test.dataset.birthDate = <span class="string">&#x27;19890615&#x27;</span>;</span><br><span class="line">test.setAttribute(<span class="string">&#x27;age&#x27;</span>, <span class="number">25</span>);</span><br><span class="line">test.setAttribute(<span class="string">&#x27;data-sex&#x27;</span>, <span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(test.getAttribute(<span class="string">&#x27;data-age&#x27;</span>)); <span class="comment">//24</span></span><br><span class="line"><span class="built_in">console</span>.log(test.getAttribute(<span class="string">&#x27;data-birth-date&#x27;</span>)); <span class="comment">//19890516</span></span><br><span class="line"><span class="built_in">console</span>.log(test.dataset.age); <span class="comment">//24</span></span><br><span class="line"><span class="built_in">console</span>.log(test.dataset.sex); <span class="comment">//male</span></span><br></pre></td></tr></table></figure>

<p><img src="http://images.pingan8787.com/2018100604.png" alt="图片4"></p>
<p><img src="http://images.pingan8787.com/20181006045.png" alt="图片5"></p>
<p>这样我们可以看出，两者都把属性设置到了<code>attribute上</code>（废话，要不人家能叫自定义属性），也就是说<code>getAttribute</code>/<code>setAttribute</code>可以操作所有的<code>dataset</code>内容，<code>dataset</code>内容只是<code>attribute</code>的一个子集，特殊就特殊在命名上了，但是<code>dataset</code>内只有带有<code>data-</code>前缀的属性（没有<code>age=25</code>那个）。</p>
<p>那么为什么我们还要用<code>data-*</code>呢，一个最大的好处是我们可以把所有自定义属性在<code>dataset</code>对象中统一管理，遍历啊神马的都哦很方便，而不至于零零散散了，所以用用还是不错的。</p>
<h3 id="3-浏览器兼容性"><a href="#3-浏览器兼容性" class="headerlink" title="3. 浏览器兼容性"></a>3. 浏览器兼容性</h3><p>比较不好的消息就是<code>data-*</code>的浏览器兼容性情况十分不乐观。</p>
<ul>
<li><strong>Internet Explorer 11+</strong></li>
<li><strong>Chrome 8+</strong></li>
<li><strong>Firefox 6.0+</strong></li>
<li><strong>Opera 11.10+</strong></li>
<li><strong>Safari 6+</strong></li>
</ul>
<p>其中IE11+简直就是亮瞎小伙伴的眼，看来要想全面使用此属性路漫漫其修远矣。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/10/06/98-%E3%80%90HTML%E3%80%91HTML5%E4%B8%ADdata-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7/" data-id="ckts3ejwg00bo4d9k65q8ck64" data-title="98-【HTML】HTML5中data-*自定义属性" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/12/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/14/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E5%8A%A8%E7%94%BB/" rel="tag">CSS动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6-ES7-ES8/" rel="tag">ES6/ES7/ES8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eslint/" rel="tag">Eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/" rel="tag">GraphQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5/" rel="tag">H5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" rel="tag">HTTP协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hybrid/" rel="tag">Hybrid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/" rel="tag">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Numpy/" rel="tag">Numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tensorflow/" rel="tag">Tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TyeScript/" rel="tag">TyeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/" rel="tag">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/demo/" rel="tag">demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" rel="tag">全栈开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" rel="tag">前端探索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" rel="tag">前端知乎系列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" rel="tag">常用技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" rel="tag">微前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" rel="tag">源码精读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%83%AD%E9%97%A8/" rel="tag">热门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" rel="tag">生活杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" rel="tag">网络请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 11.88px;">Angular</a> <a href="/tags/CSS/" style="font-size: 18.13px;">CSS</a> <a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 12.5px;">CSS动画</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/ES6-ES7-ES8/" style="font-size: 10.63px;">ES6/ES7/ES8</a> <a href="/tags/Eslint/" style="font-size: 10px;">Eslint</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/H5/" style="font-size: 10px;">H5</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 11.88px;">HTTP</a> <a href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" style="font-size: 11.25px;">HTTP协议</a> <a href="/tags/Hybrid/" style="font-size: 10.63px;">Hybrid</a> <a href="/tags/JavaScript/" style="font-size: 19.38px;">JavaScript</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Nodejs/" style="font-size: 11.25px;">Nodejs</a> <a href="/tags/Numpy/" style="font-size: 10.63px;">Numpy</a> <a href="/tags/Python/" style="font-size: 17.5px;">Python</a> <a href="/tags/React/" style="font-size: 12.5px;">React</a> <a href="/tags/Tensorflow/" style="font-size: 10.63px;">Tensorflow</a> <a href="/tags/TyeScript/" style="font-size: 10px;">TyeScript</a> <a href="/tags/TypeScript/" style="font-size: 11.25px;">TypeScript</a> <a href="/tags/Vuejs/" style="font-size: 14.38px;">Vuejs</a> <a href="/tags/WebSocket/" style="font-size: 10px;">WebSocket</a> <a href="/tags/Webpack/" style="font-size: 15.63px;">Webpack</a> <a href="/tags/demo/" style="font-size: 10.63px;">demo</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">中间件</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 16.25px;">人工智能</a> <a href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" style="font-size: 11.25px;">全栈开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 20px;">前端开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" style="font-size: 11.25px;">前端探索</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" style="font-size: 10.63px;">前端知乎系列</a> <a href="/tags/%E5%8E%9F%E5%88%9B/" style="font-size: 18.75px;">原创</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" style="font-size: 10.63px;">常用技术</a> <a href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">微前端</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 13.75px;">总结</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 10.63px;">构建工具</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10.63px;">正则表达式</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 10px;">源码</a> <a href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" style="font-size: 10px;">源码精读</a> <a href="/tags/%E7%83%AD%E9%97%A8/" style="font-size: 10px;">热门</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" style="font-size: 10px;">生活杂记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13.13px;">算法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 10px;">编译原理</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" style="font-size: 10px;">网络请求</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 14.38px;">读书笔记</a> <a href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" style="font-size: 16.88px;">重温基础</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 10px;">面试题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/28/227-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%9C%A8%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8SVG%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87/">227-【总结】如何优雅的在微信小程序使用SVG字体图标</a>
          </li>
        
          <li>
            <a href="/2021/07/28/226-%E3%80%90HTTP%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%AE%A1%E7%90%86HTTP%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9F/">226-【HTTP】如何优雅的管理HTTP请求和响应拦截器？</a>
          </li>
        
          <li>
            <a href="/2021/07/28/225-%E3%80%90Vue%E3%80%91%E4%BB%8E%E6%89%8B%E5%86%99Vue3%E7%9A%84Reactivity%E5%BC%80%E5%A7%8B%E6%B7%B1%E5%85%A5Vue3%E6%BA%90%E7%A0%81/">225-【Vue】从手写Vue3的Reactivity开始深入Vue3源码</a>
          </li>
        
          <li>
            <a href="/2021/05/30/224-%E3%80%90Chrome%E3%80%915%E4%B8%AAChrome%E8%B0%83%E8%AF%95%E6%B7%B7%E5%90%88%E5%BA%94%E7%94%A8%E7%9A%84%E6%8A%80%E5%B7%A7/">224-【Chrome】5个Chrome调试混合应用的技巧</a>
          </li>
        
          <li>
            <a href="/2021/03/19/223-%E3%80%90%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2%E3%80%91%E6%8E%A2%E7%B4%A2Snabbdom%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/">223-【前端探索】探索Snabbdom模块系统原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
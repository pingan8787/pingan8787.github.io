<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/22/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-18-【JavaScript】理解JS容易出错的坑和细节" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/07/18-%E3%80%90JavaScript%E3%80%91%E7%90%86%E8%A7%A3JS%E5%AE%B9%E6%98%93%E5%87%BA%E9%94%99%E7%9A%84%E5%9D%91%E5%92%8C%E7%BB%86%E8%8A%82/" class="article-date">
  <time class="dt-published" datetime="2018-01-07T11:22:36.000Z" itemprop="datePublished">2018-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/07/18-%E3%80%90JavaScript%E3%80%91%E7%90%86%E8%A7%A3JS%E5%AE%B9%E6%98%93%E5%87%BA%E9%94%99%E7%9A%84%E5%9D%91%E5%92%8C%E7%BB%86%E8%8A%82/">18-【JavaScript】理解JS容易出错的坑和细节</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/59f54321f265da43085d4a7f">阅读原文</a>  </p>
</blockquote>
<p>本文重在列出并解释说明 JS 中各种容易出错的坑和细节，供大家更加深入理解为什么 JS 会这样。  </p>
<h2 id="1、执行环境（Execution-context）"><a href="#1、执行环境（Execution-context）" class="headerlink" title="1、执行环境（Execution context）"></a>1、执行环境（Execution context）</h2><h3 id="var-和-let-的正确解释"><a href="#var-和-let-的正确解释" class="headerlink" title="var 和 let 的正确解释"></a>var 和 let 的正确解释</h3><p>当执行 <code>JS</code> 代码时，会生成执行环境，只要代码不是写在函数中的，就是在全局执行环境中，函数中的代码会产生函数执行环境，只此两种执行环境。<br>接下来让我们看一个老生常谈的例子，<code>var</code>   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">b() <span class="comment">// call b</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;Hello world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;call b&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>想必以上的输出大家肯定都已经明白了，这是因为函数和变量提升的原因。<br>通常提升的解释是说将声明的代码移动到了顶部，这其实没有什么错误，便于大家理解。<br>但是更准确的解释应该是：在生成执行环境时，会有两个阶段。第一个阶段是创建的阶段，JS 解释器会找出需要提升的变量和函数，并且给他们提前在内存中开辟好空间，函数的话会将整个函数存入内存中，变量只声明并且赋值为 undefined，所以在第二个阶段，也就是代码执行阶段，我们可以直接提前使用。<br>在提升的过程中，相同的函数会覆盖上一个函数，并且函数优先于变量提升:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">b() <span class="comment">// call b second</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;call b fist&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;call b second&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&quot;Hello world&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>var</code> 会产生很多错误，所以在 ES6中引入了 <code>let</code> 。<code>let</code> 不能在声明前使用，但是这并不是常说的 <code>let</code> 不会提升，<code>let</code> 提升了，在第一阶段内存也已经为他开辟好了空间，但是因为这个声明的特性导致了并不能在声明前使用。   </p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value = <span class="number">2</span></span><br><span class="line">    b()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">1</span></span><br><span class="line">a()</span><br></pre></td></tr></table></figure>
<p>可以考虑下 b 函数中输出什么。你是否会认为 b 函数是在 a 函数中调用的，相应的 b 函数中没有声明 value 那么应该去 a 函数中寻找。其实答案应该是 1。<br>当在产生执行环境的第一阶段时，会生成 <code>[[Scope]]</code> 属性，这个属性是一个指针，对应的有一个作用域链表，JS 会通过这个链表来寻找变量直到全局环境。这个指针指向的上一个节点就是该函数声明的位置，因为 b 是在全局环境中声明的，所以 value 的声明会在全局环境下寻找。如果 b 是在 a 中声明的，那么 log 出来的值就是 2 了。  </p>
<h3 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h3><p>JS 是门同步的语言，你是否疑惑过那么为什么 JS 还有异步的写法。其实 JS 的异步和其他语言的异步是不相同的，本质上还是同步。因为浏览器会有多个 Queue 存放异步通知，并且每个 Queue 的优先级也不同，JS 在执行代码时会产生一个执行栈，同步的代码在执行栈中，异步的在 Queue 中。有一个 <code>Event Loop</code> 会循环检查执行栈是否为空，为空时会在 <code>Queue</code> 中查看是否有需要处理的通知，有的话拿到执行栈中去执行。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ms = <span class="number">2000</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">  <span class="keyword">while</span>( <span class="keyword">new</span> <span class="built_in">Date</span>() &lt; ms) &#123;&#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;sleep finish&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;click&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">sleep()</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;timeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;finish&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>以上代码如果你在 <code>sleep</code> 被调用期间点击，只有当 <code>sleep</code> 执行结束并且 <code>log finish</code> 后才会响应其他异步事件。所以要注意 <code>setTimeout</code> 并不是你设定多久 JS 就会准时的响应，并且 <code>setTimeout</code> 也有个小细节，第二个参数设置为 0 也许会有人认为这样就不是异步了，其实还是异步。这是因为 HTML5 标准规定这个函数第二个参数不得小于 4 毫秒，不足会自动增加。<br>以下输出建立在 <code>Chrome</code> 上，不同的浏览器会有不同的输出:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">promise     <span class="comment">// promise 会进入 Microtask Queue 中，这个 Queue 会优先执行</span></span><br><span class="line">timeout     <span class="comment">// setTimeout 会进入 task Queue 中</span></span><br><span class="line">click       <span class="comment">// 点击事件会进入 Event Queue 中</span></span><br></pre></td></tr></table></figure>

<h2 id="2、类型"><a href="#2、类型" class="headerlink" title="2、类型"></a>2、类型</h2><h3 id="原始值"><a href="#原始值" class="headerlink" title="原始值"></a>原始值</h3><p>JS 共有 6 个原始值，分别为 <code>Boolean</code>, <code>Null</code>, <code>Undefined</code>, <code>Number</code>, <code>String</code>, <code>Symbol</code>，这些类型都是值不可变的。<br>有一个易错的点是：虽然 <code>typeof null</code> 是 <code>object</code> 类型，但是 <code>Null</code> 不是对象，这是 <code>JS</code> 语言的一个很久远的 <code>Bug</code> 了。<br>深浅拷贝对于对象来说，直接将一个对象赋值给另外一个对象就是 <code>浅拷贝</code> ，两个对象指向同一个地址，其中任何一个对象改变，另一个对象也会被改变:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">b.push(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a, b) <span class="comment">// -&gt; 都是 [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>有些情况下我们可能不希望有这种问题，那么深拷贝可以解决这个问题。深拷贝不仅将原对象的各个属性逐个复制出去，而且将原对象各个属性所包含的对象也依次采用深复制的方法递归复制到新对象上。深拷贝有多种写法，有兴趣的可以看<a target="_blank" rel="noopener" href="http://jerryzou.com/posts/dive-into-deep-clone-in-javascript/">这篇文章</a>。   </p>
<h2 id="3、函数和对象"><a href="#3、函数和对象" class="headerlink" title="3、函数和对象"></a>3、函数和对象</h2><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p><code>this</code> 是很多人会混淆的概念，但是其实他一点都不难，你只需要记住几个规则就可以了。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">foo() </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">foo</span>: foo</span><br><span class="line">&#125;</span><br><span class="line">obj.foo() </span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上两者情况 this 只依赖于调用函数前的对象，优先级是第二个情况大于第一个情况</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下情况是优先级最高的，this 只会绑定在 c 上</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> foo()</span><br><span class="line">c.a = <span class="number">3</span></span><br><span class="line"><span class="built_in">console</span>.log(c.a)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 还有种就是利用 call，apply，bind 改变 this，这个优先级仅次于 new</span></span><br></pre></td></tr></table></figure>
<p>以上几种情况明白了，很多代码中的 this 应该就没什么问题了，下面让我们看看箭头函数中的 this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a()()())</span><br></pre></td></tr></table></figure>
<p>箭头函数其实是没有 <code>thi</code> 的，这个函数中的 <code>this</code> 只取决于他外面的第一个不是箭头函数的函数的 <code>this</code>。在这个例子中，因为调用 a 符合前面代码中的第一个情况，所以 <code>this</code> 是 window。并且 <code>this</code> 一旦绑定了上下文，就不会被任何代码改变。<br>下面我们再来看一个例子，很多人认为他是一个 JS 的问题  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;js&quot;</span>,</span><br><span class="line">    <span class="attr">log</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.name = <span class="string">&quot;javaScript&quot;</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        setName()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">a.log()</span><br></pre></td></tr></table></figure>
<p><code>setName</code> 中的 <code>this</code> 指向了 <code>window</code>，很多人认为他应该是指向 <code>a 的。这里其实我们不需要去管函数是写在什么地方的，我们只需要考虑函数是怎么调用的，这里符合上述第一个情况，所以应该是指向 </code>window`。<br>闭包和立即执行函数闭包被很多人认为是一个很难理解的概念。其实闭包很简单，就是一个能够访问父函数局部变量的函数，父函数在执行完后，内部的变量还存在内存上让闭包使用。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 这就是闭包，因为他使用了父函数的参数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = a(<span class="string">&quot;js&quot;</span>)</span><br><span class="line">b() <span class="comment">// -&gt; js现在来看一个面试题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> array = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        array.push(</span><br><span class="line">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(i)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = a()</span><br><span class="line">b[<span class="number">0</span>]()</span><br><span class="line">b[<span class="number">1</span>]()</span><br><span class="line">b[<span class="number">2</span>]()</span><br></pre></td></tr></table></figure>
<p>这个题目因为 <code>i</code> 被提升了，所以 <code>i = 3</code>，当 <code>a</code> 函数执行完成后，内存中保留了 <code>a</code> 函数中的变量 <code>i</code>。数组中 <code>push</code> 进去的只是声明，并没有执行函数。所以在执行函数时，输出了 <code>3</code> 个 3。<br>如果我们想输出<code> 0 ，1，2</code> 的话，有两种简单的办法。第一个是在 <code>for</code> 循环中，使用 <code>let</code> 声明一个变量，保存每次的 <code>i</code> 值，这样在 a 函数执行完成后，内存中就保存了 <code>3</code> 个不同 <code>let </code>声明的变量，这样就解决了问题。<br>还有个办法就是使用立即执行函数，创建函数即执行，这样就可以保存下当前的 <code>i</code> 的值。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> array = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        array.push(</span><br><span class="line">            (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(j)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;(i))</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>立即执行函数其实就是直接调用匿名函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; ()</span><br></pre></td></tr></table></figure>
<p>但是以上写法会报错，因为解释器认为这是一个函数声明，不能直接调用，所以我们加上了一个括号来让解释器认为这是一个函数表达式，这样就可以直接调用了。<br>所以我们其实只需要让解释器认为我们写了个函数表达式就行了，其实还有很多种立即执行函数写法  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span> &amp;&amp; <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; ()</span><br><span class="line"><span class="keyword">new</span> &amp;&amp; <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; ()</span><br></pre></td></tr></table></figure>
<p>立即执行函数最大的作用就是模块化，其次就是解决上述闭包的问题了。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 原型，原型链和 <span class="keyword">instanceof</span> </span><br><span class="line">原理原型可能很多人觉得很复杂，本章节也不打算重复复述很多文章都讲过的概念，你只需要看懂我画的图并且自己实验下即可  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">P</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;object&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> P()</span><br></pre></td></tr></table></figure>
<p><img src="https://user-gold-cdn.xitu.io/2017/11/3/7ce8b9b38da9f3f2d249fcf600e23a2c?imageView2/0/w/1280/h/960/ignore-error/1" alt="原型链示意图" title="原型链示意图"><br>原型链就是按照 <code>__proto__</code> 寻找，直到 <code>Object</code>。<code>instanceof</code> 原理也是根据原型链判断的  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p <span class="keyword">instanceof</span> P <span class="comment">// true </span></span><br><span class="line">p <span class="keyword">instanceof</span> <span class="built_in">Object</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/07/18-%E3%80%90JavaScript%E3%80%91%E7%90%86%E8%A7%A3JS%E5%AE%B9%E6%98%93%E5%87%BA%E9%94%99%E7%9A%84%E5%9D%91%E5%92%8C%E7%BB%86%E8%8A%82/" data-id="ckts3ejtt004p4d9k8ezwgi46" data-title="18-【JavaScript】理解JS容易出错的坑和细节" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-17-【JavaScript】精心收集的48个JavaScript片段，简单理解" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/06/17-%E3%80%90JavaScript%E3%80%91%E7%B2%BE%E5%BF%83%E6%94%B6%E9%9B%86%E7%9A%8448%E4%B8%AAJavaScript%E7%89%87%E6%AE%B5%EF%BC%8C%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/" class="article-date">
  <time class="dt-published" datetime="2018-01-06T15:24:07.000Z" itemprop="datePublished">2018-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/06/17-%E3%80%90JavaScript%E3%80%91%E7%B2%BE%E5%BF%83%E6%94%B6%E9%9B%86%E7%9A%8448%E4%B8%AAJavaScript%E7%89%87%E6%AE%B5%EF%BC%8C%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/">17-【JavaScript】精心收集的48个JavaScript片段，简单理解</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p><a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s/LxdDsgPAGTx19T5BZnw6EQ">阅读原文</a></p>
</blockquote>
<p>该项目来自于 <code>Github</code> 用户 <code>Chalarangelo</code>，目前已在 <code>Github</code> 上获得了 <code>5000</code> 多Star，精心收集了多达 <code>48</code> 个有用的 <code>JavaScript</code> 代码片段，该用户的代码可以让程序员在 <code>30</code> 秒甚至更少的时间内理解这些经常用到的基础算法，来看看这些 JavaScript 代码都传达出了什么吧！  </p>
<h2 id="1、Anagrams-of-string（带有重复项）"><a href="#1、Anagrams-of-string（带有重复项）" class="headerlink" title="1、Anagrams of string（带有重复项）"></a>1、Anagrams of string（带有重复项）</h2><p>使用递归。对于给定字符串中的每个字母，为字母创建字谜。使用map()将字母与每部分字谜组合，然后使用reduce()将所有字谜组合到一个数组中，最基本情况是字符串长度等于2或1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> anagrams = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (str.length &lt;= <span class="number">2</span>) <span class="keyword">return</span> str.length === <span class="number">2</span> ? [str, str[<span class="number">1</span>] + str[<span class="number">0</span>]] : [str];</span><br><span class="line">  <span class="keyword">return</span> str.split(<span class="string">&quot;&quot;</span>).reduce(<span class="function">(<span class="params">acc, letter, i</span>) =&gt;</span></span><br><span class="line">    acc.concat(anagrams(str.slice(<span class="number">0</span>, i) + str.slice(i + <span class="number">1</span>)).map(<span class="function"><span class="params">val</span> =&gt;</span> letter + val)), []);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// anagrams(&quot;abc&quot;) -&gt; [&quot;abc&quot;,&quot;acb&quot;,&quot;bac&quot;,&quot;bca&quot;,&quot;cab&quot;,&quot;cba&quot;]</span></span><br></pre></td></tr></table></figure>

<h2 id="2、数组平均数"><a href="#2、数组平均数" class="headerlink" title="2、数组平均数"></a>2、数组平均数</h2><p>使用reduce()将每个值添加到累加器，初始值为0，总和除以数组长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / arr.length;</span><br><span class="line"><span class="comment">// average([1,2,3]) -&gt; 2</span></span><br></pre></td></tr></table></figure>

<h2 id="3、大写每个单词的首字母"><a href="#3、大写每个单词的首字母" class="headerlink" title="3、大写每个单词的首字母"></a>3、大写每个单词的首字母</h2><p>使用replace()匹配每个单词的第一个字符，并使用toUpperCase()来将其大写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalizeEveryWord = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/\b[a-z]/g</span>, <span class="function"><span class="params">char</span> =&gt;</span> char.toUpperCase());</span><br><span class="line"><span class="comment">// capitalizeEveryWord(&quot;hello world!&quot;) -&gt; &quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="4、首字母大写"><a href="#4、首字母大写" class="headerlink" title="4、首字母大写"></a>4、首字母大写</h2><p>使用slice（0,1）和toUpperCase()大写第一个字母，slice（1）获取字符串的其余部分。 省略lowerRest参数以保持字符串的其余部分不变，或将其设置为true以转换为小写。（注意：这和上一个示例不是同一件事情）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalize = <span class="function">(<span class="params">str, lowerRest = <span class="literal">false</span></span>) =&gt;</span></span><br><span class="line">  str.slice(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + (lowerRest ? str.slice(<span class="number">1</span>).toLowerCase() : str.slice(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// capitalize(&quot;myName&quot;, true) -&gt; &quot;Myname&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="5、检查回文"><a href="#5、检查回文" class="headerlink" title="5、检查回文"></a>5、检查回文</h2><p>将字符串转换为toLowerCase()，并使用replace()从中删除非字母的字符。然后，将其转换为tolowerCase()，将（””）拆分为单独字符，reverse()，join（””），与原始的非反转字符串进行比较，然后将其转换为tolowerCase()。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> palindrome = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = str.toLowerCase().replace(<span class="regexp">/[\W_]/g</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> s === s.split(<span class="string">&quot;&quot;</span>).reverse().join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// palindrome(&quot;taco cat&quot;) -&gt; true</span></span><br></pre></td></tr></table></figure>

<h2 id="6、计数数组中值的出现次数"><a href="#6、计数数组中值的出现次数" class="headerlink" title="6、计数数组中值的出现次数"></a>6、计数数组中值的出现次数</h2><p>每次遇到数组中的特定值时，使用reduce()来递增计数器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, value</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> v === value ? a + <span class="number">1</span> : a + <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span></span><br></pre></td></tr></table></figure>

<h2 id="7、当前URL"><a href="#7、当前URL" class="headerlink" title="7、当前URL"></a>7、当前URL</h2><p>使用window.location.href来获取当前URL。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currentUrl = <span class="function"><span class="params">_</span> =&gt;</span> <span class="built_in">window</span>.location.href;</span><br><span class="line"><span class="comment">// currentUrl() -&gt; &quot;https://google.com&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="8、Curry"><a href="#8、Curry" class="headerlink" title="8、Curry"></a>8、Curry</h2><p>使用递归。如果提供的参数（args）数量足够，则调用传递函数f，否则返回一个curried函数f。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> curry = <span class="function">(<span class="params">fn, arity = fn.length, ...args</span>) =&gt;</span></span><br><span class="line">  arity &lt;= args.length</span><br><span class="line">    ? fn(...args)</span><br><span class="line">    : curry.bind(<span class="literal">null</span>, fn, arity, ...args);</span><br><span class="line"><span class="comment">// curry(Math.pow)(2)(10) -&gt; 1024</span></span><br><span class="line"><span class="comment">// curry(Math.min, 3)(10)(50)(2) -&gt; 2</span></span><br></pre></td></tr></table></figure>

<h2 id="9、Deep-flatten-array"><a href="#9、Deep-flatten-array" class="headerlink" title="9、Deep flatten array"></a>9、Deep flatten array</h2><p>使用递归，使用reduce()来获取所有不是数组的元素，flatten每个元素都是数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepFlatten = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(<span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v), []);</span><br><span class="line"><span class="comment">// deepFlatten([1,[2],[[3],4],5]) -&gt; [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<h2 id="10、数组之间的区别"><a href="#10、数组之间的区别" class="headerlink" title="10、数组之间的区别"></a>10、数组之间的区别</h2><p>从b创建一个Set，然后在a上使用Array.filter()，只保留b中不包含的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b); <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x)); &#125;;</span><br><span class="line"><span class="comment">// difference([1,2,3], [1,2]) -&gt; [3]</span></span><br></pre></td></tr></table></figure>

<h2 id="11、两点之间的距离"><a href="#11、两点之间的距离" class="headerlink" title="11、两点之间的距离"></a>11、两点之间的距离</h2><p>使用Math.hypot()计算两点之间的欧几里德距离。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> distance = <span class="function">(<span class="params">x0, y0, x1, y1</span>) =&gt;</span> <span class="built_in">Math</span>.hypot(x1 - x0, y1 - y0);</span><br><span class="line"><span class="comment">// distance(1,1, 2,3) -&gt; 2.23606797749979</span></span><br></pre></td></tr></table></figure>

<h2 id="12、可以按数字整除"><a href="#12、可以按数字整除" class="headerlink" title="12、可以按数字整除"></a>12、可以按数字整除</h2><p>使用模运算符（％）来检查余数是否等于0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isDivisible = <span class="function">(<span class="params">dividend, divisor</span>) =&gt;</span> dividend % divisor === <span class="number">0</span>;</span><br><span class="line"><span class="comment">// isDivisible(6,3) -&gt; true</span></span><br></pre></td></tr></table></figure>

<h2 id="13、转义正则表达式"><a href="#13、转义正则表达式" class="headerlink" title="13、转义正则表达式"></a>13、转义正则表达式</h2><p>使用replace()来转义特殊字符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> escapeRegExp = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/[.*+?^$&#123;&#125;()|[\]\\]/g</span>, <span class="string">&quot;\\$&amp;&quot;</span>);</span><br><span class="line"><span class="comment">// escapeRegExp(&quot;(test)&quot;) -&gt; \\(test\\)</span></span><br></pre></td></tr></table></figure>

<h2 id="14、偶数或奇数"><a href="#14、偶数或奇数" class="headerlink" title="14、偶数或奇数"></a>14、偶数或奇数</h2><p>使用Math.abs()将逻辑扩展为负数，使用模（％）运算符进行检查。 如果数字是偶数，则返回true；如果数字是奇数，则返回false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isEven = <span class="function"><span class="params">num</span> =&gt;</span> num % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line"><span class="comment">// isEven(3) -&gt; false</span></span><br></pre></td></tr></table></figure>

<h2 id="15、阶乘"><a href="#15、阶乘" class="headerlink" title="15、阶乘"></a>15、阶乘</h2><p>使用递归。如果n小于或等于1，则返回1。否则返回n和n - 1的阶乘的乘积。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="params">n</span> =&gt;</span> n &lt;= <span class="number">1</span> ? <span class="number">1</span> : n * factorial(n - <span class="number">1</span>);</span><br><span class="line"><span class="comment">// factorial(6) -&gt; 720</span></span><br></pre></td></tr></table></figure>

<h2 id="16、斐波那契数组生成器"><a href="#16、斐波那契数组生成器" class="headerlink" title="16、斐波那契数组生成器"></a>16、斐波那契数组生成器</h2><p>创建一个特定长度的空数组，初始化前两个值（0和1）。使用Array.reduce()向数组中添加值，后面的一个数等于前面两个数相加之和（前两个除外）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fibonacci = <span class="function"><span class="params">n</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>(n).fill(<span class="number">0</span>).reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> acc.concat(i &gt; <span class="number">1</span> ? acc[i - <span class="number">1</span>] + acc[i - <span class="number">2</span>] : i), []);</span><br><span class="line"><span class="comment">// fibonacci(5) -&gt; [0,1,1,2,3]</span></span><br></pre></td></tr></table></figure>

<h2 id="17、过滤数组中的非唯一值"><a href="#17、过滤数组中的非唯一值" class="headerlink" title="17、过滤数组中的非唯一值"></a>17、过滤数组中的非唯一值</h2><p>将Array.filter()用于仅包含唯一值的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUnique = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="function"><span class="params">i</span> =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line"><span class="comment">// filterNonUnique([1,2,2,3,4,4,5]) -&gt; [1,3,5]</span></span><br></pre></td></tr></table></figure>

<h2 id="18、Flatten数组"><a href="#18、Flatten数组" class="headerlink" title="18、Flatten数组"></a>18、Flatten数组</h2><p>使用reduce()来获取数组中的所有元素，并使用concat()来使它们flatten。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(v), []);</span><br><span class="line"><span class="comment">// flatten([1,[2],3,4]) -&gt; [1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<h2 id="19、从数组中获取最大值"><a href="#19、从数组中获取最大值" class="headerlink" title="19、从数组中获取最大值"></a>19、从数组中获取最大值</h2><p>使用Math.max()与spread运算符（…）结合得到数组中的最大值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayMax = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Math</span>.max(...arr);</span><br><span class="line"><span class="comment">// arrayMax([10, 1, 5]) -&gt; 10</span></span><br></pre></td></tr></table></figure>

<h2 id="20、从数组中获取最小值"><a href="#20、从数组中获取最小值" class="headerlink" title="20、从数组中获取最小值"></a>20、从数组中获取最小值</h2><p>使用Math.min()与spread运算符（…）结合得到数组中的最小值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayMin = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Math</span>.min(...arr);</span><br><span class="line"><span class="comment">// arrayMin([10, 1, 5]) -&gt; 1</span></span><br></pre></td></tr></table></figure>

<h2 id="21、获取滚动位置"><a href="#21、获取滚动位置" class="headerlink" title="21、获取滚动位置"></a>21、获取滚动位置</h2><p>如果已定义，请使用pageXOffset和pageYOffset，否则使用scrollLeft和scrollTop，可以省略el来使用window的默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollPos = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span></span><br><span class="line">  (&#123;<span class="attr">x</span>: (el.pageXOffset !== <span class="literal">undefined</span>) ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">    <span class="attr">y</span>: (el.pageYOffset !== <span class="literal">undefined</span>) ? el.pageYOffset : el.scrollTop&#125;);</span><br><span class="line"><span class="comment">// getScrollPos() -&gt; &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="22、最大公约数（GCD）"><a href="#22、最大公约数（GCD）" class="headerlink" title="22、最大公约数（GCD）"></a>22、最大公约数（GCD）</h2><p>使用递归。基本情况是当y等于0时。在这种情况下，返回x。否则，返回y的GCD和x / y的其余部分。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> !y ? x : gcd(y, x % y);</span><br><span class="line"><span class="comment">// gcd (8, 36) -&gt; 4</span></span><br></pre></td></tr></table></figure>

<h2 id="23、Head-of-list"><a href="#23、Head-of-list" class="headerlink" title="23、Head of list"></a>23、Head of list</h2><p>返回ARR[0]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> head = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// head([1,2,3]) -&gt; 1</span></span><br></pre></td></tr></table></figure>

<h2 id="24、list初始化"><a href="#24、list初始化" class="headerlink" title="24、list初始化"></a>24、list初始化</h2><p>返回arr.slice（0，-1）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initial = <span class="function"><span class="params">arr</span> =&gt;</span> arr.slice(<span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line"><span class="comment">// initial([1,2,3]) -&gt; [1,2]</span></span><br></pre></td></tr></table></figure>

<h2 id="25、用range初始化数组"><a href="#25、用range初始化数组" class="headerlink" title="25、用range初始化数组"></a>25、用range初始化数组</h2><p>使用Array（end-start）创建所需长度的数组，使用map()来填充范围中的所需值，可以省略start使用默认值0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayRange = <span class="function">(<span class="params">end, start = <span class="number">0</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.apply(<span class="literal">null</span>, <span class="built_in">Array</span>(end - start)).map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i + start);</span><br><span class="line"><span class="comment">// initializeArrayRange(5) -&gt; [0,1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<h2 id="26、用值初始化数组"><a href="#26、用值初始化数组" class="headerlink" title="26、用值初始化数组"></a>26、用值初始化数组</h2><p>使用Array（n）创建所需长度的数组，fill(v)以填充所需的值，可以忽略value使用默认值0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArray = <span class="function">(<span class="params">n, value = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>(n).fill(value);</span><br><span class="line"><span class="comment">// initializeArray(5, 2) -&gt; [2,2,2,2,2]</span></span><br></pre></td></tr></table></figure>

<h2 id="27、列表的最后"><a href="#27、列表的最后" class="headerlink" title="27、列表的最后"></a>27、列表的最后</h2><p>返回arr.slice（-1）[0]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> last = <span class="function"><span class="params">arr</span> =&gt;</span> arr.slice(-<span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// last([1,2,3]) -&gt; 3</span></span><br></pre></td></tr></table></figure>

<h2 id="28、测试功能所花费的时间"><a href="#28、测试功能所花费的时间" class="headerlink" title="28、测试功能所花费的时间"></a>28、测试功能所花费的时间</h2><p>使用performance.now()获取函数的开始和结束时间，console.log()所花费的时间。第一个参数是函数名，随后的参数传递给函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timeTaken = <span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">&quot;timeTaken&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> r = callback();</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">&quot;timeTaken&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> r;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// timeTaken(() =&gt; Math.pow(2, 10)) -&gt; 1024</span></span><br><span class="line"><span class="comment">// (logged): timeTaken: 0.02099609375ms</span></span><br></pre></td></tr></table></figure>

<h2 id="29、来自键值对的对象"><a href="#29、来自键值对的对象" class="headerlink" title="29、来自键值对的对象"></a>29、来自键值对的对象</h2><p>使用Array.reduce()来创建和组合键值对。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objectFromPairs = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (a[v[<span class="number">0</span>]] = v[<span class="number">1</span>], a), &#123;&#125;);</span><br><span class="line"><span class="comment">// objectFromPairs([[&quot;a&quot;,1],[&quot;b&quot;,2]]) -&gt; &#123;a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="30、管道"><a href="#30、管道" class="headerlink" title="30、管道"></a>30、管道</h2><p>使用Array.reduce()通过函数传递值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pipe = <span class="function">(<span class="params">...funcs</span>) =&gt;</span> <span class="function"><span class="params">arg</span> =&gt;</span> funcs.reduce(<span class="function">(<span class="params">acc, func</span>) =&gt;</span> func(acc), arg);</span><br><span class="line"><span class="comment">// pipe(btoa, x =&gt; x.toUpperCase())(&quot;Test&quot;) -&gt; &quot;VGVZDA==&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="31、Powerset"><a href="#31、Powerset" class="headerlink" title="31、Powerset"></a>31、Powerset</h2><p>使用reduce()与map()结合来遍历元素，并将其组合成包含所有组合的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> powerset = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(a.map(<span class="function"><span class="params">r</span> =&gt;</span> [v].concat(r))), [[]]);</span><br><span class="line"><span class="comment">// powerset([1,2]) -&gt; [[], [1], [2], [2,1]]</span></span><br></pre></td></tr></table></figure>

<h2 id="32、范围内的随机整数"><a href="#32、范围内的随机整数" class="headerlink" title="32、范围内的随机整数"></a>32、范围内的随机整数</h2><p>使用Math.random()生成一个随机数并将其映射到所需的范围，使用Math.floor()使其成为一个整数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomIntegerInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</span><br><span class="line"><span class="comment">// randomIntegerInRange(0, 5) -&gt; 2</span></span><br></pre></td></tr></table></figure>

<h2 id="33、范围内的随机数"><a href="#33、范围内的随机数" class="headerlink" title="33、范围内的随机数"></a>33、范围内的随机数</h2><p>使用Math.random()生成一个随机值，使用乘法将其映射到所需的范围。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> randomInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.random() * (max - min) + min;</span><br><span class="line"><span class="comment">// randomInRange(2,10) -&gt; 6.0211363285087005</span></span><br></pre></td></tr></table></figure>

<h2 id="34、随机化数组的顺序"><a href="#34、随机化数组的顺序" class="headerlink" title="34、随机化数组的顺序"></a>34、随机化数组的顺序</h2><p>使用sort()重新排序元素，利用Math.random()来随机排序。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shuffle = <span class="function"><span class="params">arr</span> =&gt;</span> arr.sort(<span class="function">() =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>);</span><br><span class="line"><span class="comment">// shuffle([1,2,3]) -&gt; [2,3,1]</span></span><br></pre></td></tr></table></figure>

<h2 id="35、重定向到URL"><a href="#35、重定向到URL" class="headerlink" title="35、重定向到URL"></a>35、重定向到URL</h2><p>使用window.location.href或window.location.replace()重定向到url。 传递第二个参数来模拟链接点击（true - default）或HTTP重定向（false）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> redirect = <span class="function">(<span class="params">url, asLink = <span class="literal">true</span></span>) =&gt;</span></span><br><span class="line">  asLink ? <span class="built_in">window</span>.location.href = url : <span class="built_in">window</span>.location.replace(url);</span><br><span class="line"><span class="comment">// redirect(&quot;https://google.com&quot;)</span></span><br></pre></td></tr></table></figure>

<h2 id="36、反转一个字符串"><a href="#36、反转一个字符串" class="headerlink" title="36、反转一个字符串"></a>36、反转一个字符串</h2><p>使用数组解构和Array.reverse()来颠倒字符串中的字符顺序。合并字符以使用join(“”)获取字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reverseString = <span class="function"><span class="params">str</span> =&gt;</span> [...str].reverse().join(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// reverseString(&quot;foobar&quot;) -&gt; &quot;raboof&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="37、RGB到十六进制"><a href="#37、RGB到十六进制" class="headerlink" title="37、RGB到十六进制"></a>37、RGB到十六进制</h2><p>使用按位左移运算符（&lt;&lt;）和toString（16），然后padStart（6，“0”）将给定的RGB参数转换为十六进制字符串以获得6位十六进制值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rgbToHex = <span class="function">(<span class="params">r, g, b</span>) =&gt;</span> ((r &lt;&lt; <span class="number">16</span>) + (g &lt;&lt; <span class="number">8</span>) + b).toString(<span class="number">16</span>).padStart(<span class="number">6</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line"><span class="comment">// rgbToHex(255, 165, 1) -&gt; &quot;ffa501&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="38、滚动到顶部"><a href="#38、滚动到顶部" class="headerlink" title="38、滚动到顶部"></a>38、滚动到顶部</h2><p>使用document.documentElement.scrollTop或document.body.scrollTop获取到顶部的距离。<br>从顶部滚动一小部分距离。<br>使用window.requestAnimationFrame()来滚动。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollToTop = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">  <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// scrollToTop()</span></span><br></pre></td></tr></table></figure>

<h2 id="39、随机数组值"><a href="#39、随机数组值" class="headerlink" title="39、随机数组值"></a>39、随机数组值</h2><p>使用Array.map()和Math.random()创建一个随机值的数组。使用Array.sort()根据随机值对原始数组的元素进行排序。</p>
<h2 id="40、数组之间的相似性"><a href="#40、数组之间的相似性" class="headerlink" title="40、数组之间的相似性"></a>40、数组之间的相似性</h2><p>使用filter()移除不是values的一部分值，使用includes()确定。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> similarity = <span class="function">(<span class="params">arr, values</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> values.includes(v));</span><br><span class="line"><span class="comment">// similarity([1,2,3], [1,2,4]) -&gt; [1,2]</span></span><br></pre></td></tr></table></figure>

<h2 id="41、按字符串排序（按字母顺序排列）"><a href="#41、按字符串排序（按字母顺序排列）" class="headerlink" title="41、按字符串排序（按字母顺序排列）"></a>41、按字符串排序（按字母顺序排列）</h2><p>使用split（””）分割字符串，sort()使用localeCompare()，使用join（””）重新组合。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortCharactersInString = <span class="function"><span class="params">str</span> =&gt;</span></span><br><span class="line">  str.split(<span class="string">&quot;&quot;</span>).sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.localeCompare(b)).join(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// sortCharactersInString(&quot;cabbage&quot;) -&gt; &quot;aabbceg&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="42、数组总和"><a href="#42、数组总和" class="headerlink" title="42、数组总和"></a>42、数组总和</h2><p>使用reduce()将每个值添加到累加器，初始化值为0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// sum([1,2,3,4]) -&gt; 10</span></span><br></pre></td></tr></table></figure>

<h2 id="43、交换两个变量的值"><a href="#43、交换两个变量的值" class="headerlink" title="43、交换两个变量的值"></a>43、交换两个变量的值</h2><p>使用数组解构来交换两个变量之间的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[varA, varB] = [varB, varA];</span><br><span class="line"><span class="comment">// [x, y] = [y, x]</span></span><br></pre></td></tr></table></figure>

<h2 id="44、列表的tail"><a href="#44、列表的tail" class="headerlink" title="44、列表的tail"></a>44、列表的tail</h2><p>返回arr.slice（1）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tail = <span class="function"><span class="params">arr</span> =&gt;</span> arr.length &gt; <span class="number">1</span> ? arr.slice(<span class="number">1</span>) : arr;</span><br><span class="line"><span class="comment">// tail([1,2,3]) -&gt; [2,3]</span></span><br><span class="line"><span class="comment">// tail([1]) -&gt; [1]</span></span><br></pre></td></tr></table></figure>

<h2 id="45、数组唯一值"><a href="#45、数组唯一值" class="headerlink" title="45、数组唯一值"></a>45、数组唯一值</h2><p>使用ES6 Set和… rest操作符去掉所有重复值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> [...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="comment">// unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<h2 id="46、URL参数"><a href="#46、URL参数" class="headerlink" title="46、URL参数"></a>46、URL参数</h2><p>使用match() 与适当的正则表达式来获得所有键值对，适当的map() 。使用Object.assign()和spread运算符（…）将所有键值对组合到一个对象中，将location.search作为参数传递给当前url。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getUrlParameters = <span class="function"><span class="params">url</span> =&gt;</span></span><br><span class="line">  url.match(<span class="regexp">/([^?=&amp;]+)(=([^&amp;]*))/g</span>).reduce(</span><br><span class="line">    <span class="function">(<span class="params">a, v</span>) =&gt;</span> (a[v.slice(<span class="number">0</span>, v.indexOf(<span class="string">&quot;=&quot;</span>))] = v.slice(v.indexOf(<span class="string">&quot;=&quot;</span>) + <span class="number">1</span>), a), &#123;&#125;</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// getUrlParameters(&quot;http://url.com/page?name=Adam&amp;surname=Smith&quot;) -&gt; &#123;name: &quot;Adam&quot;, surname: &quot;Smith&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="47、UUID生成器"><a href="#47、UUID生成器" class="headerlink" title="47、UUID生成器"></a>47、UUID生成器</h2><p>使用crypto API生成符合RFC4122版本4的UUID。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uuid = <span class="function"><span class="params">_</span> =&gt;</span></span><br><span class="line">  ([<span class="number">1e7</span>] + -<span class="number">1e3</span> + -<span class="number">4e3</span> + -<span class="number">8e3</span> + -<span class="number">1e11</span>).replace(<span class="regexp">/[018]/g</span>, <span class="function"><span class="params">c</span> =&gt;</span></span><br><span class="line">    (c ^ crypto.getRandomValues(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">1</span>))[<span class="number">0</span>] &amp; <span class="number">15</span> &gt;&gt; c / <span class="number">4</span>).toString(<span class="number">16</span>)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// uuid() -&gt; &quot;7982fcfe-5721-4632-bede-6000885be57d&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="48、验证数字"><a href="#48、验证数字" class="headerlink" title="48、验证数字"></a>48、验证数字</h2><p>使用！isNaN和parseFloat()来检查参数是否是一个数字，使用isFinite()来检查数字是否是有限的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> validateNumber = <span class="function"><span class="params">n</span> =&gt;</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(n)) &amp;&amp; <span class="built_in">isFinite</span>(n) &amp;&amp; <span class="built_in">Number</span>(n) == n;</span><br><span class="line"><span class="comment">// validateNumber(&quot;10&quot;) -&gt; true</span></span><br></pre></td></tr></table></figure>

<p>翻译多有不准确之处，感兴趣的程序员可以自行到Github上查看英文原版。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/06/17-%E3%80%90JavaScript%E3%80%91%E7%B2%BE%E5%BF%83%E6%94%B6%E9%9B%86%E7%9A%8448%E4%B8%AAJavaScript%E7%89%87%E6%AE%B5%EF%BC%8C%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/" data-id="ckts3ejtl00454d9kaepx0ubi" data-title="17-【JavaScript】精心收集的48个JavaScript片段，简单理解" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-16-【Tensorflow】MNIST机器学习入门" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/05/16-%E3%80%90Tensorflow%E3%80%91MNIST%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/" class="article-date">
  <time class="dt-published" datetime="2018-01-05T14:57:04.000Z" itemprop="datePublished">2018-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/05/16-%E3%80%90Tensorflow%E3%80%91MNIST%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/">16-【Tensorflow】MNIST机器学习入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Created on Sat Nov 25 09:03:11 2017</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: Administrator</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> input_data</span><br><span class="line">mnist = input_data.read_data_sets(<span class="string">&#x27;MNIST&#x27;</span>,one_hot=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1/ placeholder表示一个占位符，将来运行可以传入新值</span></span><br><span class="line">x = tf.placeholder(<span class="string">&quot;float&quot;</span>,[<span class="literal">None</span>,<span class="number">784</span>])     </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2/ Variable表示一个可修改的张量，可以计算输入值也可以修改，一般用与模型参数</span></span><br><span class="line"><span class="comment"># 3/ zeros[m,n] 可以生成 m,n 型矩阵，如 [2,3],int32) =&gt; [[0,0,0],[0,0,0],[0,0,0]]</span></span><br><span class="line">W = tf.Variable(tf.zeros([<span class="number">784</span>,<span class="number">10</span>]))</span><br><span class="line">b = tf.Variable(tf.zeros([<span class="number">10</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4/ nn为 NeuralNetwork 神经网络 ， matmul 矩阵相乘</span></span><br><span class="line">y = tf.nn.softmax(tf.matmul(x,W)+b)</span><br><span class="line">y_ = tf.placeholder(<span class="string">&quot;float&quot;</span>,[<span class="literal">None</span>,<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5/ reduce_sum() 计算一个张量的各个维度的元素的和。</span></span><br><span class="line">cross_entropy = -tf.reduce_sum(y_*tf.log(y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6/ GradientDescentOptimizer(0.01)梯度下降算法，0.01的学习速率最小化交叉熵</span></span><br><span class="line">train_step = tf.train.GradientDescentOptimizer(<span class="number">0.01</span>).minimize(cross_entropy)</span><br><span class="line"></span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(init)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练模型</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">    batch_xs,batch_ys = mnist.train.next_batch(<span class="number">100</span>)</span><br><span class="line">    sess.run(train_step,feed_dict=&#123;x:batch_xs ,y_:batch_ys&#125;)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 评估模型</span></span><br><span class="line"><span class="comment"># 7/ tf.argmax(y,1)返回的是模型对于任一输入x预测到的标签值</span></span><br><span class="line"><span class="comment"># 8/ tf.argmax(y_,1) 代表正确的标签</span></span><br><span class="line">correct_prediction = tf.equal(tf.argmax(y,<span class="number">1</span>), tf.argmax(y_,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9/ tf.reduce_mean()计算一个张量的各个维度的元素的平均值。</span></span><br><span class="line"><span class="comment"># 10/ tf.cast()将一个张量投射到一个新的类型。</span></span><br><span class="line">accuracy = tf.reduce_mean(tf.cast(correct_prediction,<span class="string">&quot;float&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sess.run(accuracy, feed_dict=&#123;x:mnist.test.images,y_:mnist.test.labels&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最终输出结果 0.9131</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/05/16-%E3%80%90Tensorflow%E3%80%91MNIST%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%85%A5%E9%97%A8/" data-id="ckts3ejtg003q4d9kdehn5w00" data-title="16-【Tensorflow】MNIST机器学习入门" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tensorflow/" rel="tag">Tensorflow</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-15-【Vuejs】一些Vuejs开发经验[更新中]" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/05/15-%E3%80%90Vuejs%E3%80%91%E4%B8%80%E4%BA%9BVuejs%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%5B%E6%9B%B4%E6%96%B0%E4%B8%AD%5D/" class="article-date">
  <time class="dt-published" datetime="2018-01-05T14:54:39.000Z" itemprop="datePublished">2018-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/05/15-%E3%80%90Vuejs%E3%80%91%E4%B8%80%E4%BA%9BVuejs%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%5B%E6%9B%B4%E6%96%B0%E4%B8%AD%5D/">15-【Vuejs】一些Vuejs开发经验[更新中]</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>最近用vuejs在写项目，就把一些遇到的小注意点记录下：</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="1-组件间传递参数的this问题"><a href="#1-组件间传递参数的this问题" class="headerlink" title="1.组件间传递参数的this问题"></a>1.组件间传递参数的this问题</h3><p>从父组件传递给子组件的参数 需要在props中定义 并且在methods中调用需要加上this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props: [</span><br><span class="line">    <span class="string">&quot;pageData&quot;</span></span><br><span class="line">],</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.pageData)   <span class="comment">// 这里需要加this  但是注意在&lt;template&gt;里面不用，直接使用就可以</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-路由切换时执行的操作-如关闭定时器"><a href="#2-路由切换时执行的操作-如关闭定时器" class="headerlink" title="2.路由切换时执行的操作(如关闭定时器)"></a>2.路由切换时执行的操作(如关闭定时器)</h3><p>将切换路由要执行的函数写在destroyed()方法内。<br><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/instance.html">Vuejs生命周期</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 和mounted()同一级</span></span><br><span class="line"><span class="function"><span class="title">destroyed</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.COUNTTIMER1);</span><br><span class="line">  <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.COUNTTIMER2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-Vue日期选择器问题"><a href="#3-Vue日期选择器问题" class="headerlink" title="3.Vue日期选择器问题"></a>3.Vue日期选择器问题</h3><p>Vue 的日期选择器等input框如果绑定一个函数，这个函数里面又有修改或初始化这个input的值的时候，则这个函数里面如果还有内部函数，则会在input值修改的时候又执行。</p>
<h3 id="4-组件间传递参数读取的问题"><a href="#4-组件间传递参数读取的问题" class="headerlink" title="4.组件间传递参数读取的问题"></a>4.组件间传递参数读取的问题</h3><p>父组件传递到子组件的所有参数，可以在子组件通过 <code>this.$props</code> 访问，如 <code>this.$props[&quot;openData&quot;]</code> 。</p>
<h4 id="5-动态引入图片的问题"><a href="#5-动态引入图片的问题" class="headerlink" title="5.动态引入图片的问题"></a>5.动态引入图片的问题</h4><p>先将图片通过 <code>require</code> 引入，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;user_head_img&quot;</span> &gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;scpirt&gt;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">user_head_img</span>: <span class="built_in">require</span>(<span class="string">&quot;../../assets/heade-img.png&quot;</span>),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-关于-ob-的介绍"><a href="#6-关于-ob-的介绍" class="headerlink" title="6.关于__ob__的介绍"></a>6.关于__ob__的介绍</h3><p><code>__ob__</code>: Observer这些数据是vue这个框架对数据设置的监控器，一般都是不可枚举的。</p>
<h3 id="7-favicon-icon-问题"><a href="#7-favicon-icon-问题" class="headerlink" title="7.favicon.icon 问题"></a>7.favicon.icon 问题</h3><p>直接放在项目根目录，在 <code>index.html</code> 中直接用这个路径即可，这是最简单粗暴好用的方法。</p>
<h3 id="8-同级组件之间传递数据"><a href="#8-同级组件之间传递数据" class="headerlink" title="8.同级组件之间传递数据"></a>8.同级组件之间传递数据</h3><p>同级组件之间传递数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">参考http:<span class="comment">//blog.csdn.net/wang_meiwei/article/details/75948844</span></span><br><span class="line"><span class="comment">// 公共中央事件总线 eventBus.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;Vue&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vue</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件1</span></span><br><span class="line"><span class="keyword">import</span> BUS <span class="keyword">from</span> <span class="string">&quot;../../assets/js/eventBus.js&quot;</span></span><br><span class="line">&lt;span @click=<span class="string">&quot;test&quot;</span>&gt;测试点击&lt;/span&gt;</span><br><span class="line">methods:&#123;</span><br><span class="line">    <span class="function"><span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">        BUS.$emit(<span class="string">&quot;newEventName&quot;</span>,<span class="string">&quot;你好这是传递的数据&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  子组件2</span></span><br><span class="line"><span class="keyword">import</span> BUS <span class="keyword">from</span> <span class="string">&quot;../../assets/js/eventBus.js&quot;</span></span><br><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">    BUS.$on(<span class="string">&quot;newEventName&quot;</span>,<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="慢慢更新整理…"><a href="#慢慢更新整理…" class="headerlink" title="慢慢更新整理…."></a>慢慢更新整理….</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/05/15-%E3%80%90Vuejs%E3%80%91%E4%B8%80%E4%BA%9BVuejs%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C[%E6%9B%B4%E6%96%B0%E4%B8%AD]/" data-id="ckts3ejt900364d9kc8vwfpne" data-title="15-【Vuejs】一些Vuejs开发经验[更新中]" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-14-【Vuejs】缩小Vue-js打包体积方法总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/04/14-%E3%80%90Vuejs%E3%80%91%E7%BC%A9%E5%B0%8FVue-js%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2018-01-04T15:49:16.000Z" itemprop="datePublished">2018-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/04/14-%E3%80%90Vuejs%E3%80%91%E7%BC%A9%E5%B0%8FVue-js%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/">14-【Vuejs】缩小Vue.js打包体积方法总结</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>大家都知道，Vuejs的 <code>CLI工具</code> 是基于 <code>webpack</code> 来实现的，所以在项目打包后，会生成的文件会很大。<br>主要原因是 <code>webpack</code> 将我们所有文件都打包成一个js文件，即使再小的项目，打包之后文件都会变得很大。<br>下面讲讲最近我遇到的相同问题。</p>
</blockquote>
<h2 id="1、问题"><a href="#1、问题" class="headerlink" title="1、问题"></a>1、问题</h2><p>由于这次项目是在初学 <code>Vue</code> 之后的第一个正式项目，没有考虑到类似 <code>路由懒加载</code>、 <code>按需加载</code>的问题 ，所以呢，也算是没经验。<br>到了这些天，项目写得差不多了，准备放到服务器测试，才发现这个问题。  </p>
<blockquote>
<p>优化前：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.js        2.3MB</span><br><span class="line">vendor.js     2.4MB</span><br><span class="line">vendor.css    612kB</span><br><span class="line">app.js.map    9.13MB</span><br><span class="line">vendor.js.map 16.21MB</span><br><span class="line">//不一一列举....</span><br></pre></td></tr></table></figure>
<p>接下来看看我的优化方法。</p>
<h2 id="2、优化步骤1-不生成-map文件"><a href="#2、优化步骤1-不生成-map文件" class="headerlink" title="2、优化步骤1  不生成.map文件"></a>2、优化步骤1  不生成.map文件</h2><p>在 <code>webpack.prod.cong.js</code> 文件下，修改配置项 <code>sourceMap</code> 设置为 <code>false</code> 或者删除：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">    <span class="attr">compress</span>: &#123;</span><br><span class="line">        <span class="attr">warnings</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// sourceMap: true  //将sourceMap关闭就不会打包出.map文件</span></span><br><span class="line">&#125;),</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这样的话，开发环境就不会生成 <code>.map</code> 文件。</p>
<h2 id="3、优化步骤2-按需加载"><a href="#3、优化步骤2-按需加载" class="headerlink" title="3、优化步骤2  按需加载"></a>3、优化步骤2  按需加载</h2><p>对于项目中，一些 <code>通用</code> 或者 <code>不是特别差异</code> 的组件可以使用按需加载，在需要的时候加载即可，并且会自动缓存。<br>这时候需要在 <code>router</code> 文件夹下的 <code>index.js</code> 文件修改路由配置中的 <code>组件引入</code> 方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.use(Router)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    <span class="attr">routes</span>:[&#123;</span><br><span class="line">        <span class="attr">path</span>:<span class="string">&quot;/&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">require</span>([<span class="string">&quot;./../components/Index&quot;</span>],resolve)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>
<p>这样的话，这个组件就会在你需要加载的时候才会加载。</p>
<h2 id="4、优化步骤3-VueRouter的懒加载"><a href="#4、优化步骤3-VueRouter的懒加载" class="headerlink" title="4、优化步骤3  VueRouter的懒加载"></a>4、优化步骤3  VueRouter的懒加载</h2><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh-cn/advanced/lazy-loading.html">官方文档</a><br>在 <code>vue-router</code> 的模块引入，将默认的 <code>import .. from ..</code> 引入方式，修改为一步。如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Foo = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;/Foo.vue)</span></span><br></pre></td></tr></table></figure>
<p>然后在 <code>配置路由</code> 中，和之前一样使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.use(Router)</span><br><span class="line">export default new Router(&#123;</span><br><span class="line">    routes:[&#123;</span><br><span class="line">        path:&quot;/&quot;,</span><br><span class="line">        component:Foo</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<h2 id="5、优化步骤4-将大的第三方包通过标签引入"><a href="#5、优化步骤4-将大的第三方包通过标签引入" class="headerlink" title="5、优化步骤4  将大的第三方包通过标签引入"></a>5、优化步骤4  将大的第三方包通过<script>标签引入</h2><p>一般将类似 <code>echarts</code> 这种比较大的第三方依赖包，通过 <code>&lt;script&gt;&lt;/script&gt;</code> 标签来引入的话，会很大程度缩小打包的大小。<br>但是需要在 <code>vue</code> 配置文件这样配置：<br><code>webpack.base.config.js</code> 中添加 <code>不打包</code> 的包的名称，这样打包的时候才不会把这些包一起打包进去：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">entry</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">output</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">resolve</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">module</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">externals</span>:&#123;</span><br><span class="line">        <span class="string">&quot;echarts&quot;</span>:<span class="string">&quot;echarts&quot;</span>  <span class="comment">//不打包的包名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在 <code>index.html</code> 中用 <code>&lt;script&gt;&lt;/script&gt;</code> 标签引入依赖包的CDN或者其他地址。</p>
<h2 id="6、优化步骤5-图片压缩"><a href="#6、优化步骤5-图片压缩" class="headerlink" title="6、优化步骤5  图片压缩"></a>6、优化步骤5  图片压缩</h2><p>这个不用怎么说，有个地址很好用，推荐下：<a target="_blank" rel="noopener" href="https://tinypng.com/#">tinypng</a></p>
<h2 id="7、优化后"><a href="#7、优化后" class="headerlink" title="7、优化后"></a>7、优化后</h2><p>通过这几步骤，优化完成的每个文件都会缩小好多倍：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.js        136.2kB</span><br><span class="line">vendor.js     213.2kB</span><br><span class="line">vendor.css    612kB   //css 这个我还没办法</span><br><span class="line">app.js.map    0MB</span><br><span class="line">vendor.js.map 0MB</span><br></pre></td></tr></table></figure>
<h2 id="8、结语"><a href="#8、结语" class="headerlink" title="8、结语"></a>8、结语</h2><p>世上无难事，只怕没灵感，静一静然后灵感就出现了，嘻嘻。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/04/14-%E3%80%90Vuejs%E3%80%91%E7%BC%A9%E5%B0%8FVue-js%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/" data-id="ckts3ejt0002h4d9kbknud95i" data-title="14-【Vuejs】缩小Vue.js打包体积方法总结" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-13-【JavaScript】开发常用简写技巧" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/04/13-%E3%80%90JavaScript%E3%80%91%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%AE%80%E5%86%99%E6%8A%80%E5%B7%A7/" class="article-date">
  <time class="dt-published" datetime="2018-01-04T15:43:21.000Z" itemprop="datePublished">2018-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/04/13-%E3%80%90JavaScript%E3%80%91%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%AE%80%E5%86%99%E6%8A%80%E5%B7%A7/">13-【JavaScript】开发常用简写技巧</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>这里整理了一些常用的js简写代码，有空多看多用，也能提升代码逼格。</p>
<h2 id="初级"><a href="#初级" class="headerlink" title="初级"></a>初级</h2><h3 id="1、三目运算"><a href="#1、三目运算" class="headerlink" title="1、三目运算"></a>1、三目运算</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写：</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> leo;</span><br><span class="line"><span class="keyword">if</span>(x&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    leo = <span class="string">&quot;hello&quot;</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    leo = <span class="string">&quot;bad&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> leo = x&gt;<span class="number">0</span>?<span class="string">&quot;hello&quot;</span>:<span class="string">&quot;bad&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2、循环语句"><a href="#2、循环语句" class="headerlink" title="2、循环语句"></a>2、循环语句</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;all.length;i++)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> all)</span><br></pre></td></tr></table></figure>

<h3 id="3、声明变量"><a href="#3、声明变量" class="headerlink" title="3、声明变量"></a>3、声明变量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">let</span> x ;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> z = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">let</span> x,y-<span class="number">1</span>,z=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4、if语句"><a href="#4、if语句" class="headerlink" title="4、if语句"></a>4、if语句</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">if</span>(leo == <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">if</span>(leo)</span><br></pre></td></tr></table></figure>

<h4 id="5、十进制数"><a href="#5、十进制数" class="headerlink" title="5、十进制数"></a>5、十进制数</h4><p>可以使用科学计数法来代替较大的数据，如可以将 <code>10000000</code> 简写为 <code>1e7</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">10000000</span>;i++)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">1e7</span>;i++)&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6、多行字符串"><a href="#6、多行字符串" class="headerlink" title="6、多行字符串"></a>6、多行字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">const</span> leo = <span class="string">&quot;leo is good boy\n\t&quot;</span></span><br><span class="line">    +  <span class="string">&quot;hahaha\n\t&quot;</span></span><br><span class="line">    +  <span class="string">&quot;end!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">const</span> leo = <span class="string">`leo is good boy</span></span><br><span class="line"><span class="string">        hahaha</span></span><br><span class="line"><span class="string">        end!</span></span><br><span class="line"><span class="string">    `</span></span><br></pre></td></tr></table></figure>

<h2 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h2><h3 id="1、变量赋值"><a href="#1、变量赋值" class="headerlink" title="1、变量赋值"></a>1、变量赋值</h3><p>当将一个变量的值赋给另一个变量时，首先需要确保原值不是 null、未定义的或空值。<br>可以通过编写一个包含多个条件的判断语句来实现：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">if</span> (a1 !== <span class="literal">null</span> || a1 !== <span class="literal">undefined</span> || a1 !== <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> a2 = a1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">const</span> a2 = a1 || <span class="string">&quot;new&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2、默认值赋值"><a href="#2、默认值赋值" class="headerlink" title="2、默认值赋值"></a>2、默认值赋值</h3><p>如果预期参数是 null 或未定义，则不需要写六行代码来分配默认值。<br>我们可以只使用一个简短的逻辑运算符，只用一行代码就能完成相同的操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">let</span> dbHost;</span><br><span class="line"><span class="keyword">if</span> (process.env.DB_HOST) &#123;</span><br><span class="line">  dbHost = process.env.DB_HOST;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  dbHost = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">const</span> dbHost = process.env.DB_HOST || <span class="string">&quot;localhost&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3、对象属性"><a href="#3、对象属性" class="headerlink" title="3、对象属性"></a>3、对象属性</h3><p>如果属性名与 key 名相同，则可以使用简写。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">x</span>:x, <span class="attr">y</span>:y &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; x, y &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4、箭头函数"><a href="#4、箭头函数" class="headerlink" title="4、箭头函数"></a>4、箭头函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Hello&quot;</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Loaded&quot;</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"> </span><br><span class="line">list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line">sayHello = <span class="function"><span class="params">name</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Hello&quot;</span>, name);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Loaded&quot;</span>), <span class="number">2000</span>);</span><br><span class="line">list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(item));</span><br></pre></td></tr></table></figure>

<h3 id="5、隐式返回值"><a href="#5、隐式返回值" class="headerlink" title="5、隐式返回值"></a>5、隐式返回值</h3><p>只有一个语句的箭头函数，可以隐式返回结果（函数必须省略括号（{ }），以便省略返回关键字）。<br>要返回多行语句（例如对象文本），需要使用（）而不是{ }来包裹函数体。这样可以确保代码以单个语句的形式进行求值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcCircumference</span>(<span class="params">diameter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.PI * diameter</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line">calcCircumference = <span class="function"><span class="params">diameter</span> =&gt;</span> (</span><br><span class="line">  <span class="built_in">Math</span>.PI * diameter;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="6、默认参数值"><a href="#6、默认参数值" class="headerlink" title="6、默认参数值"></a>6、默认参数值</h3><p>可以使用 if 语句来定义函数参数的默认值。ES6 中规定了可以在函数声明中定义默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">volume</span>(<span class="params">l, w, h</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (w === <span class="literal">undefined</span>)</span><br><span class="line">    w = <span class="number">3</span>;</span><br><span class="line">  <span class="keyword">if</span> (h === <span class="literal">undefined</span>)</span><br><span class="line">    h = <span class="number">4</span>;</span><br><span class="line">  <span class="keyword">return</span> l * w * h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line">volume = <span class="function">(<span class="params">l, w = <span class="number">3</span>, h = <span class="number">4</span> </span>) =&gt;</span> (l * w * h);</span><br><span class="line">volume(<span class="number">2</span>) <span class="comment">//output: 24</span></span><br></pre></td></tr></table></figure>

<h3 id="7、模板字符串"><a href="#7、模板字符串" class="headerlink" title="7、模板字符串"></a>7、模板字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">const</span> welcome = <span class="string">&quot;You have logged in as &quot;</span> + first + <span class="string">&quot; &quot;</span> + last + <span class="string">&quot;.&quot;</span></span><br><span class="line"><span class="keyword">const</span> db = <span class="string">&quot;http://&quot;</span> + host + <span class="string">&quot;:&quot;</span> + port + <span class="string">&quot;/&quot;</span> + database;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">const</span> welcome = <span class="string">`You have logged in as <span class="subst">$&#123;first&#125;</span> <span class="subst">$&#123;last&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> db = <span class="string">`http://<span class="subst">$&#123;host&#125;</span>:<span class="subst">$&#123;port&#125;</span>/<span class="subst">$&#123;database&#125;</span>`</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8、解构赋值"><a href="#8、解构赋值" class="headerlink" title="8、解构赋值"></a>8、解构赋值</h3><p>解构赋值是一种表达式，用于从数组或对象中快速提取属性值，并赋给定义的变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="keyword">const</span> observable = <span class="built_in">require</span>(<span class="string">&quot;mobx/observable&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> action = <span class="built_in">require</span>(<span class="string">&quot;mobx/action&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> runInAction = <span class="built_in">require</span>(<span class="string">&quot;mobx/runInAction&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> store = <span class="built_in">this</span>.props.store;</span><br><span class="line"><span class="keyword">const</span> form = <span class="built_in">this</span>.props.form;</span><br><span class="line"><span class="keyword">const</span> loading = <span class="built_in">this</span>.props.loading;</span><br><span class="line"><span class="keyword">const</span> errors = <span class="built_in">this</span>.props.errors;</span><br><span class="line"><span class="keyword">const</span> entity = <span class="built_in">this</span>.props.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="keyword">import</span> &#123; observable, action, runInAction &#125; <span class="keyword">from</span> <span class="string">&quot;mobx&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; store, form, loading, errors, entity &#125; = <span class="built_in">this</span>.props;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  甚至可以指定自己的变量名：</span></span><br><span class="line"><span class="keyword">const</span> &#123; store, form, loading, errors, <span class="attr">entity</span>:contact &#125; = <span class="built_in">this</span>.props;</span><br></pre></td></tr></table></figure>

<h3 id="9、展开运算符"><a href="#9、展开运算符" class="headerlink" title="9、展开运算符"></a>9、展开运算符</h3><p>使用展开运算符可以替换某些数组函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="comment">// joining arrays</span></span><br><span class="line"><span class="keyword">const</span> odd = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">2</span> ,<span class="number">4</span> , <span class="number">6</span>].concat(odd);</span><br><span class="line"><span class="comment">// cloning arrays</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = arr.slice()</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line"><span class="comment">// joining arrays</span></span><br><span class="line"><span class="keyword">const</span> odd = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span> ];</span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">2</span> ,<span class="number">4</span> , <span class="number">6</span>, ...odd];</span><br><span class="line"><span class="built_in">console</span>.log(nums); <span class="comment">// [ 2, 4, 6, 1, 3, 5 ]</span></span><br><span class="line"><span class="comment">// cloning arrays</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [...arr];</span><br></pre></td></tr></table></figure>
<p>和 <code>concat()</code> 功能不同的是，用户可以使用扩展运算符在任何一个数组中插入另一个数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const odd = [1, 3, 5 ];</span><br><span class="line">const nums = [2, ...odd, 4 , 6];</span><br></pre></td></tr></table></figure>
<p>也可以将展开运算符和 ES6 解构符号结合使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const &#123; a, b, ...z &#125; = &#123; a: 1, b: 2, c: 3, d: 4 &#125;;</span><br><span class="line">console.log(a)    // 1</span><br><span class="line">console.log(b)    // 2</span><br><span class="line">console.log(z)    // &#123; c: 3, d: 4 &#125;</span><br></pre></td></tr></table></figure>

<h3 id="10、强制参数"><a href="#10、强制参数" class="headerlink" title="10、强制参数"></a>10、强制参数</h3><p>默认情况下，如果不向函数参数传值，那么 JavaScript 会将函数参数设置为未定义。其它一些语言则会发出警告或错误。<br>要执行参数分配，可以使用if语句抛出未定义的错误，或者可以利用“强制参数”。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  未简写</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">bar</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(bar === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Missing parameter!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  简写：</span></span><br><span class="line">mandatory = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Missing parameter!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo = <span class="function">(<span class="params">bar = mandatory( )</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11、Array-find"><a href="#11、Array-find" class="headerlink" title="11、Array.find"></a>11、Array.find</h3><p>如果你曾经编写过普通 <code>JavaScript</code> 中的 <code>find</code> 函数，那么你可能使用了 <code>for</code> 循环。<br>在 <code>ES6</code> 中，介绍了一种名为 <code>find()</code> 的新数组函数，可以实现 <code>for</code> 循环的简写。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//  未简写</span><br><span class="line">const pets = [</span><br><span class="line">  &#123; type: &quot;Dog&quot;, name: &quot;Max&quot;&#125;,</span><br><span class="line">  &#123; type: &quot;Cat&quot;, name: &quot;Karl&quot;&#125;,</span><br><span class="line">  &#123; type: &quot;Dog&quot;, name: &quot;Tommy&quot;&#125;,</span><br><span class="line">]</span><br><span class="line">function findDog(name) &#123;</span><br><span class="line">  for(let i = 0; i&lt;pets.length; ++i) &#123;</span><br><span class="line">    if(pets[i].type === &quot;Dog&quot; &amp;&amp; pets[i].name === name) &#123;</span><br><span class="line">      return pets[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//  简写：</span><br><span class="line">pet = pets.find(pet =&gt; pet.type ===&quot;Dog&quot; &amp;&amp; pet.name === &quot;Tommy&quot;);</span><br><span class="line">console.log(pet); // &#123; type: &quot;Dog&quot;, name: &quot;Tommy&quot; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="12、双位操作符"><a href="#12、双位操作符" class="headerlink" title="12、双位操作符"></a>12、双位操作符</h3><p>位操作符是 JavaScript 初级教程的基本知识点，但是我们却不常使用位操作符。<br>因为在不处理二进制的情况下，没有人愿意使用 <code>1</code> 和 <code>0</code>。<br>但是双位操作符却有一个很实用的案例。你可以使用双位操作符来替代 <code>Math.floor()</code>。<br>双否定位操作符的优势在于它执行相同的操作运行速度更快。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//  未简写</span><br><span class="line">Math.floor(4.9) === 4  //true</span><br><span class="line"></span><br><span class="line">//  简写：</span><br><span class="line">~~4.9 === 4  //true</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/04/13-%E3%80%90JavaScript%E3%80%91%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E7%AE%80%E5%86%99%E6%8A%80%E5%B7%A7/" data-id="ckts3ejsq001w4d9k6dxvhqt1" data-title="13-【JavaScript】开发常用简写技巧" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-12-【JavaScript】20个超常用正则表达式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/02/12-%E3%80%90JavaScript%E3%80%9120%E4%B8%AA%E8%B6%85%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2018-01-02T15:57:20.000Z" itemprop="datePublished">2018-01-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/02/12-%E3%80%90JavaScript%E3%80%9120%E4%B8%AA%E8%B6%85%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">12-【JavaScript】20个超常用正则表达式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>有时候正则表达式可以大大提高我们的开发效率呢。内容来源网络。<br>比如这段校验基本日期格式的javascript代码：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d1 = <span class="string">&quot;2017/12/10&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> r1 = <span class="regexp">/^(\d&#123;1,4&#125;)(-|\/)(\d&#123;1,2&#125;)\2(\d&#123;1,2&#125;)$/</span>;</span><br><span class="line"><span class="keyword">let</span> r = d1.match(r1);</span><br><span class="line"><span class="keyword">if</span>(r == <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;日期格式错误！&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;通过~&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1、校验密码强度"><a href="#1、校验密码强度" class="headerlink" title="1、校验密码强度"></a>1、校验密码强度</h3><p>密码的强度必须包含大小写字母和数字的组合，不能使用特殊符号，长度在8-10之间：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).&#123;<span class="number">8</span>,<span class="number">10</span>&#125;$</span><br></pre></td></tr></table></figure>

<h3 id="2、校验中文"><a href="#2、校验中文" class="headerlink" title="2、校验中文"></a>2、校验中文</h3><p>字符串只能是中文：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[\\u4e00-\\u9fa5]&#123;<span class="number">0</span>,&#125;$</span><br></pre></td></tr></table></figure>
<h3 id="3、由数字，26个英文字母或下划线组成的字符串"><a href="#3、由数字，26个英文字母或下划线组成的字符串" class="headerlink" title="3、由数字，26个英文字母或下划线组成的字符串"></a>3、由数字，26个英文字母或下划线组成的字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\\w+$</span><br></pre></td></tr></table></figure>

<h3 id="4、校验E-Mail-地址"><a href="#4、校验E-Mail-地址" class="headerlink" title="4、校验E-Mail 地址"></a>4、校验E-Mail 地址</h3><p>字符串只能是中文：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[\\w!#$%&amp;<span class="string">&quot;*+/=?^_`&#123;|&#125;~-]+(?:\\.[\\w!#$%&amp;&quot;</span>*+/=?^_<span class="string">`&#123;|&#125;~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?</span></span><br></pre></td></tr></table></figure>

<h3 id="5、校验身份证号码"><a href="#5、校验身份证号码" class="headerlink" title="5、校验身份证号码"></a>5、校验身份证号码</h3><p>15位：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[<span class="number">1</span>-<span class="number">9</span>]\\d&#123;<span class="number">7</span>&#125;((<span class="number">0</span>\\d)|(<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>]))(([<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>]\\d)|<span class="number">3</span>[<span class="number">0</span>-<span class="number">1</span>])\\d&#123;<span class="number">3</span>&#125;$</span><br></pre></td></tr></table></figure>
<p>18位：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[<span class="number">1</span>-<span class="number">9</span>]\\d&#123;<span class="number">5</span>&#125;[<span class="number">1</span>-<span class="number">9</span>]\\d&#123;<span class="number">3</span>&#125;((<span class="number">0</span>\\d)|(<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>]))(([<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>]\\d)|<span class="number">3</span>[<span class="number">0</span>-<span class="number">1</span>])\\d&#123;<span class="number">3</span>&#125;([<span class="number">0</span>-<span class="number">9</span>]|X)$</span><br></pre></td></tr></table></figure>

<h3 id="6、校验日期"><a href="#6、校验日期" class="headerlink" title="6、校验日期"></a>6、校验日期</h3><p>“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(?:(?!<span class="number">0000</span>)[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">4</span>&#125;-(?:(?:<span class="number">0</span>[<span class="number">1</span>-<span class="number">9</span>]|<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>])-(?:<span class="number">0</span>[<span class="number">1</span>-<span class="number">9</span>]|<span class="number">1</span>[<span class="number">0</span>-<span class="number">9</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">8</span>])|(?:<span class="number">0</span>[<span class="number">13</span>-<span class="number">9</span>]|<span class="number">1</span>[<span class="number">0</span>-<span class="number">2</span>])-(?:<span class="number">29</span>|<span class="number">30</span>)|(?:<span class="number">0</span>[<span class="number">13578</span>]|<span class="number">1</span>[<span class="number">02</span>])-<span class="number">31</span>)|(?:[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;(?:<span class="number">0</span>[<span class="number">48</span>]|[<span class="number">2468</span>][<span class="number">048</span>]|[<span class="number">13579</span>][<span class="number">26</span>])|(?:<span class="number">0</span>[<span class="number">48</span>]|[<span class="number">2468</span>][<span class="number">048</span>]|[<span class="number">13579</span>][<span class="number">26</span>])<span class="number">00</span>)-<span class="number">02</span>-<span class="number">29</span>)$</span><br></pre></td></tr></table></figure>

<h3 id="7、校验金额"><a href="#7、校验金额" class="headerlink" title="7、校验金额"></a>7、校验金额</h3><p>金额校验，精确到2位小数：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[<span class="number">0</span>-<span class="number">9</span>]+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;)?$</span><br></pre></td></tr></table></figure>

<h3 id="8、校验手机号"><a href="#8、校验手机号" class="headerlink" title="8、校验手机号"></a>8、校验手机号</h3><p>下面是国内 13、15、18开头的手机号正则表达式：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(<span class="number">13</span>[<span class="number">0</span>-<span class="number">9</span>]|<span class="number">14</span>[<span class="number">5</span>|<span class="number">7</span>]|<span class="number">15</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>]|<span class="number">18</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>])\\d&#123;<span class="number">8</span>&#125;$</span><br></pre></td></tr></table></figure>

<h3 id="9、判断IE的版本"><a href="#9、判断IE的版本" class="headerlink" title="9、判断IE的版本"></a>9、判断IE的版本</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^.*MSIE [<span class="number">5</span>-<span class="number">8</span>](?:\\.[<span class="number">0</span>-<span class="number">9</span>]+)?(?!.*Trident\\/[<span class="number">5</span>-<span class="number">9</span>]\\<span class="number">.0</span>).*$</span><br></pre></td></tr></table></figure>

<h3 id="10、校验IP-v4地址"><a href="#10、校验IP-v4地址" class="headerlink" title="10、校验IP-v4地址"></a>10、校验IP-v4地址</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\<span class="function"><span class="title">b</span>(<span class="params">?:(?:<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>][<span class="number">0</span>-<span class="number">9</span>]|[<span class="number">01</span>]?[<span class="number">0</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]?)\\.</span>)</span>&#123;<span class="number">3</span>&#125;(?:<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>][<span class="number">0</span>-<span class="number">9</span>]|[<span class="number">01</span>]?[<span class="number">0</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]?)\\b</span><br></pre></td></tr></table></figure>

<h3 id="11、校验IP-v6地址"><a href="#11、校验IP-v6地址" class="headerlink" title="11、校验IP-v6地址"></a>11、校验IP-v6地址</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">7</span>,<span class="number">7</span>&#125;[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">7</span>&#125;:|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">6</span>&#125;:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">5</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">2</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">2</span>&#125;(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">5</span>&#125;|[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:((:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">6</span>&#125;)|:((:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">7</span>&#125;|:)|fe80:(:[<span class="number">0</span>-9a-fA-F]&#123;<span class="number">0</span>,<span class="number">4</span>&#125;)&#123;<span class="number">0</span>,<span class="number">4</span>&#125;%[<span class="number">0</span>-9a-zA-Z]&#123;<span class="number">1</span>,&#125;|::(<span class="function"><span class="title">ffff</span>(<span class="params">:<span class="number">0</span>&#123;<span class="number">1</span>,<span class="number">4</span>&#125;</span>)</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;:)&#123;<span class="number">0</span>,<span class="number">1</span>&#125;((<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])\\.)&#123;<span class="number">3</span>,<span class="number">3</span>&#125;(<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])|([<span class="number">0</span>-9a-fA-F]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:((<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])\\.)&#123;<span class="number">3</span>,<span class="number">3</span>&#125;(<span class="number">25</span>[<span class="number">0</span>-<span class="number">5</span>]|(<span class="number">2</span>[<span class="number">0</span>-<span class="number">4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="number">0</span>-<span class="number">9</span>]))</span><br></pre></td></tr></table></figure>

<h3 id="12、检查URL的前缀"><a href="#12、检查URL的前缀" class="headerlink" title="12、检查URL的前缀"></a>12、检查URL的前缀</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!s.match(<span class="regexp">/^[a-zA-Z]+:\\/</span>\\<span class="comment">//))&#123;</span></span><br><span class="line">   s = <span class="string">&quot;http://&quot;</span> + s;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13、提取URL链接"><a href="#13、提取URL链接" class="headerlink" title="13、提取URL链接"></a>13、提取URL链接</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(f|ht)&#123;<span class="number">1</span>&#125;(tp|tps):\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&amp;=]*)?</span><br></pre></td></tr></table></figure>

<h3 id="14、文件路径及扩展名校验"><a href="#14、文件路径及扩展名校验" class="headerlink" title="14、文件路径及扩展名校验"></a>14、文件路径及扩展名校验</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(f|ht)&#123;<span class="number">1</span>&#125;(tp|tps):\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&amp;=]*)?</span><br></pre></td></tr></table></figure>

<h3 id="15、提取Color-Hex-Codes"><a href="#15、提取Color-Hex-Codes" class="headerlink" title="15、提取Color Hex Codes"></a>15、提取Color Hex Codes</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^#([A-Fa-f0-<span class="number">9</span>]&#123;<span class="number">6</span>&#125;|[A-Fa-f0-<span class="number">9</span>]&#123;<span class="number">3</span>&#125;)$</span><br></pre></td></tr></table></figure>

<h3 id="16、提取网页图片"><a href="#16、提取网页图片" class="headerlink" title="16、提取网页图片"></a>16、提取网页图片</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\&lt; *[img][^\\\\&gt;]*[src] *= *[\\<span class="string">&quot;\\&quot;</span>]&#123;<span class="number">0</span>,<span class="number">1</span>&#125;([^\\<span class="string">&quot;\\&quot;</span>\\ &gt;]*)</span><br></pre></td></tr></table></figure>

<h3 id="17、提取页面超链接"><a href="#17、提取页面超链接" class="headerlink" title="17、提取页面超链接"></a>17、提取页面超链接</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="xml">&lt;a\\s*(?!.*\\brel=)[^&gt;]*)(href=&quot;https?:\\/\\/)((?!(?:(?:www\\.)?&quot;.implode(&quot;|(?:www\\.)?&quot;, $follow_list).&quot;))[^&quot;]+)&quot;((?!.*\\brel=)[^&gt;]*)(?:[^&gt;]*)&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="18、查找CSS属性"><a href="#18、查找CSS属性" class="headerlink" title="18、查找CSS属性"></a>18、查找CSS属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\\s*[a-zA-Z\\-]+\\s*[:]&#123;<span class="number">1</span>&#125;\\s[a-zA-Z0-<span class="number">9</span>\\s.#]+[;]&#123;<span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19、抽取注释"><a href="#19、抽取注释" class="headerlink" title="19、抽取注释"></a>19、抽取注释</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--(.*?)--&gt;</span><br></pre></td></tr></table></figure>

<h3 id="20、匹配HTML标签"><a href="#20、匹配HTML标签" class="headerlink" title="20、匹配HTML标签"></a>20、匹配HTML标签</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;\\/?\\w+((\\s+\\w+(\\s*=\\s*(?:<span class="string">&quot;.*?&quot;</span>|<span class="string">&quot;.*?&quot;</span>|[\\^<span class="string">&quot;&quot;</span>&gt;\\s]+))?)+\\s*|\\s*)\\/?&gt;</span><br></pre></td></tr></table></figure>

<h3 id="一、校验数字的表达式"><a href="#一、校验数字的表达式" class="headerlink" title="一、校验数字的表达式"></a>一、校验数字的表达式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 数字：^[<span class="number">0</span>-<span class="number">9</span>]*$ </span><br><span class="line"><span class="number">2</span> n位的数字：^\d&#123;n&#125;$</span><br><span class="line"><span class="number">3</span> 至少n位的数字：^\d&#123;n,&#125;$ </span><br><span class="line"><span class="number">4</span> m-n位的数字：^\d&#123;m,n&#125;$ </span><br><span class="line"><span class="number">5</span> 零和非零开头的数字：^(<span class="number">0</span>|[<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*)$ </span><br><span class="line"><span class="number">6</span> 非零开头的最多带两位小数的数字：^([<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*)+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$ </span><br><span class="line"><span class="number">7</span> 带<span class="number">1</span>-<span class="number">2</span>位小数的正数或负数：^(\-)?\d+(\.\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$ </span><br><span class="line"><span class="number">8</span> 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$ </span><br><span class="line"><span class="number">9</span> 有两位小数的正实数：^[<span class="number">0</span>-<span class="number">9</span>]+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">2</span>&#125;)?$</span><br><span class="line"><span class="number">10</span> 有<span class="number">1</span>~<span class="number">3</span>位小数的正实数：^[<span class="number">0</span>-<span class="number">9</span>]+(.[<span class="number">0</span>-<span class="number">9</span>]&#123;<span class="number">1</span>,<span class="number">3</span>&#125;)?$</span><br><span class="line"><span class="number">11</span> 非零的正整数：^[<span class="number">1</span>-<span class="number">9</span>]\d*$ 或 ^([<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;$ 或 ^\+?[<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*$</span><br><span class="line"><span class="number">12</span> 非零的负整数：^\-[<span class="number">1</span>-<span class="number">9</span>][]<span class="number">0</span>-<span class="number">9</span><span class="string">&quot;*$ 或 ^-[1-9]\d*$</span></span><br><span class="line"><span class="string">13 非负整数：^\d+$ 或 ^[1-9]\d*|0$</span></span><br><span class="line"><span class="string">14 非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</span></span><br><span class="line"><span class="string">15 非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</span></span><br><span class="line"><span class="string">16 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</span></span><br><span class="line"><span class="string">17 正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</span></span><br><span class="line"><span class="string">18 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</span></span><br><span class="line"><span class="string">19 浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span></span><br></pre></td></tr></table></figure>

<h3 id="二、校验字符的表达式"><a href="#二、校验字符的表达式" class="headerlink" title="二、校验字符的表达式"></a>二、校验字符的表达式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 汉字：^[\u4e00-\u9fa5]&#123;<span class="number">0</span>,&#125;$ </span><br><span class="line"><span class="number">2</span> 英文和数字：^[A-Za-z0-<span class="number">9</span>]+$ 或 ^[A-Za-z0-<span class="number">9</span>]&#123;<span class="number">4</span>,<span class="number">40</span>&#125;$ </span><br><span class="line"><span class="number">3</span> 长度为<span class="number">3</span>-<span class="number">20</span>的所有字符：^.&#123;<span class="number">3</span>,<span class="number">20</span>&#125;$ </span><br><span class="line"><span class="number">4</span> 由<span class="number">26</span>个英文字母组成的字符串：^[A-Za-z]+$ </span><br><span class="line"><span class="number">5</span> 由<span class="number">26</span>个大写英文字母组成的字符串：^[A-Z]+$ </span><br><span class="line"><span class="number">6</span> 由<span class="number">26</span>个小写英文字母组成的字符串：^[a-z]+$ </span><br><span class="line"><span class="number">7</span> 由数字和<span class="number">26</span>个英文字母组成的字符串：^[A-Za-z0-<span class="number">9</span>]+$ </span><br><span class="line"><span class="number">8</span> 由数字、<span class="number">26</span>个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w&#123;<span class="number">3</span>,<span class="number">20</span>&#125;$ </span><br><span class="line"><span class="number">9</span> 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</span><br><span class="line"><span class="number">10</span> 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-<span class="number">9</span>]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-<span class="number">9</span>]&#123;<span class="number">2</span>,<span class="number">20</span>&#125;$</span><br><span class="line"><span class="number">11</span> 可以输入含有^%&amp;<span class="string">&quot;,;=?$\&quot;等字符：[^%&amp;&quot;</span>,;=?$\x22]+</span><br><span class="line"><span class="number">12</span> 禁止输入含有~的字符：[^~\x22]+</span><br></pre></td></tr></table></figure>

<h3 id="三、特殊需求表达式"><a href="#三、特殊需求表达式" class="headerlink" title="三、特殊需求表达式"></a>三、特殊需求表达式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$ </span><br><span class="line"><span class="number">2</span> 域名：[a-zA-Z0-<span class="number">9</span>][-a-zA-Z0-<span class="number">9</span>]&#123;<span class="number">0</span>,<span class="number">62</span>&#125;(<span class="regexp">/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/</span>.? </span><br><span class="line"><span class="number">3</span> InternetURL：[a-zA-z]+:<span class="comment">//[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$ </span></span><br><span class="line"><span class="number">4</span> 手机号码：^(<span class="number">13</span>[<span class="number">0</span>-<span class="number">9</span>]|<span class="number">14</span>[<span class="number">5</span>|<span class="number">7</span>]|<span class="number">15</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>]|<span class="number">18</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>])\d&#123;<span class="number">8</span>&#125;$ </span><br><span class="line"><span class="number">5</span> 电话号码(<span class="string">&quot;XXX-XXXXXXX&quot;</span>、<span class="string">&quot;XXXX-XXXXXXXX&quot;</span>、<span class="string">&quot;XXX-XXXXXXX&quot;</span>、<span class="string">&quot;XXX-XXXXXXXX&quot;</span>、<span class="string">&quot;XXXXXXX&quot;</span>和<span class="string">&quot;XXXXXXXX)：^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$  </span></span><br><span class="line"><span class="string">6 国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125; </span></span><br><span class="line"><span class="string">7 身份证号(15位、18位数字)：^\d&#123;15&#125;|\d&#123;18&#125;$ </span></span><br><span class="line"><span class="string">8 短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$ </span></span><br><span class="line"><span class="string">9 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span></span><br><span class="line"><span class="string">10 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</span></span><br><span class="line"><span class="string">11 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$</span></span><br><span class="line"><span class="string">12 日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span></span><br><span class="line"><span class="string">13 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</span></span><br><span class="line"><span class="string">14 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</span></span><br><span class="line"><span class="string">15 钱的输入格式：</span></span><br><span class="line"><span class="string">16 1.有四种钱的表示形式我们可以接受:&quot;</span><span class="number">10000.00</span><span class="string">&quot; 和 &quot;</span><span class="number">10</span>,<span class="number">000</span><span class="number">.00</span><span class="string">&quot;, 和没有 &quot;</span>分<span class="string">&quot; 的 &quot;</span><span class="number">10000</span><span class="string">&quot; 和 &quot;</span><span class="number">10</span>,<span class="number">000</span><span class="string">&quot;：^[1-9][0-9]*$</span></span><br><span class="line"><span class="string">17 2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符&quot;</span><span class="number">0</span><span class="string">&quot;不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$</span></span><br><span class="line"><span class="string">18 3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$</span></span><br><span class="line"><span class="string">19 4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$</span></span><br><span class="line"><span class="string">20 5.必须说明的是,小数点后面至少应该有1位数,所以&quot;</span><span class="number">10.</span><span class="string">&quot;是不通过的,但是 &quot;</span><span class="number">10</span><span class="string">&quot; 和 &quot;</span><span class="number">10.2</span><span class="string">&quot; 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$</span></span><br><span class="line"><span class="string">21 6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$</span></span><br><span class="line"><span class="string">22 7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$</span></span><br><span class="line"><span class="string">23 8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$</span></span><br><span class="line"><span class="string">24 备注：这就是最终结果了,别忘了&quot;</span>+<span class="string">&quot;可以用&quot;</span>*<span class="string">&quot;替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</span></span><br><span class="line"><span class="string">25 xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</span></span><br><span class="line"><span class="string">26 中文字符的正则表达式：[\u4e00-\u9fa5]</span></span><br><span class="line"><span class="string">27 双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</span></span><br><span class="line"><span class="string">28 空白行的正则表达式：\n\s*\r (可以用来删除空白行)</span></span><br><span class="line"><span class="string">29 HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt; (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</span></span><br><span class="line"><span class="string">30 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</span></span><br><span class="line"><span class="string">31 腾讯QQ号：[1-9][0-9]&#123;4,&#125; (腾讯QQ号从10000开始)</span></span><br><span class="line"><span class="string">32 中国邮政编码：[1-9]\d&#123;5&#125;(?!\d) (中国邮政编码为6位数字) 33 IP地址：\d+\.\d+\.\d+\.\d+ (提取IP地址时有用) 34 IP地址：((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)) </span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/02/12-%E3%80%90JavaScript%E3%80%9120%E4%B8%AA%E8%B6%85%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" data-id="ckts3ejsi001c4d9kcr0b8vl5" data-title="12-【JavaScript】20个超常用正则表达式" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-11-【tensorflow】常用生成函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/01/01/11-%E3%80%90tensorflow%E3%80%91%E5%B8%B8%E7%94%A8%E7%94%9F%E6%88%90%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2018-01-01T15:26:06.000Z" itemprop="datePublished">2018-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/01/01/11-%E3%80%90tensorflow%E3%80%91%E5%B8%B8%E7%94%A8%E7%94%9F%E6%88%90%E5%87%BD%E6%95%B0/">11-【Tensorflow】常用生成函数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1-TensirFlow随机数生成函数"><a href="#1-TensirFlow随机数生成函数" class="headerlink" title="1.TensirFlow随机数生成函数"></a>1.TensirFlow随机数生成函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tf.random_normal   <span class="comment"># 随机数分布：正态分布 ； 主要参数：平均值、标准差、取值类型</span></span><br><span class="line">tf.trucated_normal <span class="comment"># 随机数分布：正态分布(若生成的随机数偏离平均值超过2个标准差，则重新随机)</span></span><br><span class="line">                   <span class="comment"># 主要参数：平均值、标准差、取值范围</span></span><br><span class="line">tf.random_uniform  <span class="comment"># 随机数分布：平均分布 ；主要参数：最大 最小取值、取值类型</span></span><br><span class="line">tf.random_gamma    <span class="comment"># 随机数分布：Gamma分布 ； 主要参数：形状参数alpha、尺度参数beta、取值类型。</span></span><br></pre></td></tr></table></figure>

<h3 id="2-TensorFlow常数生成函数"><a href="#2-TensorFlow常数生成函数" class="headerlink" title="2.TensorFlow常数生成函数"></a>2.TensorFlow常数生成函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tf.zeros            <span class="comment"># 功能：产生全0的数组 ； 样例：tf.zeros([2,3],int32) -&gt; [[0,0,0],[0,0,0]]</span></span><br><span class="line">tf.ones             <span class="comment"># 功能：产生全1的数组 ； 样例：tf.ones([2,3],int32) -&gt; [[1,1,1],[1,1,1]]</span></span><br><span class="line">tf.fill             <span class="comment"># 功能：产生一个全部为给定数字的数组 ； 样例：tf.fill([2,3],9)-&gt;[[9,9,9],[9,9,9]]</span></span><br><span class="line">tf.constant         <span class="comment"># 功能：产生一个给定值的常量 ；样例：tf.constant([1,2,3]) -&gt; [1,2,3]</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/01/01/11-%E3%80%90tensorflow%E3%80%91%E5%B8%B8%E7%94%A8%E7%94%9F%E6%88%90%E5%87%BD%E6%95%B0/" data-id="ckts3ejs8000o4d9k0vi5cpfs" data-title="11-【Tensorflow】常用生成函数" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tensorflow/" rel="tag">Tensorflow</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-10-【Python】常用高阶函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/24/10-%E3%80%90Python%E3%80%91%E5%B8%B8%E7%94%A8%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2017-12-24T08:16:34.000Z" itemprop="datePublished">2017-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/24/10-%E3%80%90Python%E3%80%91%E5%B8%B8%E7%94%A8%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/">10-【Python】常用高阶函数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>整理一些python常用的高阶函数。  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="comment"># 1、高阶函数 map()</span></span><br><span class="line"><span class="comment">## 为list每个值执行相同函数操作,只有一个参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x*x</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">map</span>(f,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])            <span class="comment"># 得到一个新list</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">str</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]))    <span class="comment"># str是自带函数，将内容设置为string类型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">format_name</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> name[:<span class="number">1</span>].upper() + name[<span class="number">1</span>:].lower()</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">map</span>(format_name,[<span class="string">&quot;leo&quot;</span>,<span class="string">&quot;lEo&quot;</span>,<span class="string">&quot;leO&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、高阶函数 reduce()</span></span><br><span class="line"><span class="comment">## 为list每个值执行相同函数操作,最少两个参数</span></span><br><span class="line"><span class="comment">## reduce把结果继续和序列的下一个元素做 累积计算，如本次这个和下次一个一起算</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">g</span>(<span class="params">x,y</span>):</span>                            <span class="comment"># 求和函数</span></span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line"><span class="built_in">print</span> reduce(g,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])          </span><br><span class="line"><span class="comment">## 求和运算可以直接用Python内建函数sum()，没必要动用reduce。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prod</span>(<span class="params">x,y</span>):</span>                         <span class="comment"># 求积函数</span></span><br><span class="line">    <span class="keyword">return</span> x*y</span><br><span class="line"><span class="built_in">print</span> reduce(prod,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],<span class="number">100</span>)   <span class="comment"># 第三个参数为初始值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 案例</span></span><br><span class="line"><span class="comment">## 输入：[&quot;adam&quot;, &quot;LISA&quot;, &quot;barT&quot;]，输出：[&quot;Adam&quot;, &quot;Lisa&quot;, &quot;Bart&quot;]</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">normalize</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="keyword">return</span> name[:<span class="number">1</span>].upper()+name[<span class="number">1</span>:].lower();</span><br><span class="line">L1 = [<span class="string">&quot;adam&quot;</span>, <span class="string">&quot;LISA&quot;</span>, <span class="string">&quot;barT&quot;</span>]</span><br><span class="line">L2 = <span class="built_in">list</span>(<span class="built_in">map</span>(normalize, L1))</span><br><span class="line"><span class="built_in">print</span>(L2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、高阶函数 filter()</span></span><br><span class="line"><span class="comment">## 为list每个值执行过滤操作,只要一个参数，filter()函数用于过滤序列。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span>(<span class="params">x</span>):</span>          <span class="comment"># 过滤list中的偶数，保留奇数</span></span><br><span class="line">    <span class="keyword">return</span> x%<span class="number">2</span>==<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">filter</span>(is_odd,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_empty</span>(<span class="params">x</span>):</span>        <span class="comment"># 过滤list中的空值，保留存在值</span></span><br><span class="line">    <span class="keyword">return</span> x <span class="keyword">and</span> <span class="built_in">len</span>(x.strip())&gt;<span class="number">0</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">filter</span>(is_empty,[<span class="string">&quot;leo&quot;</span>,<span class="literal">None</span>,<span class="string">&quot;123&quot;</span>,<span class="string">&quot; &quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;END&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_sqr</span>(<span class="params">x</span>):</span>          <span class="comment"># 过滤1-100中平方根是整数的数</span></span><br><span class="line">    sqr = <span class="built_in">int</span>(math.sqrt(x))</span><br><span class="line">    <span class="keyword">return</span> sqr*sqr == x</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">filter</span>(is_sqr,<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">101</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">primes</span>():</span>           <span class="comment"># 一个计算100以内素数的函数</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    it = _odd_iter()    <span class="comment"># 初始序列</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n = <span class="built_in">next</span>(it)    <span class="comment"># 返回序列的第一个数</span></span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        it = <span class="built_in">filter</span>(_odd_iter(n),it)  <span class="comment"># 构造新序列</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> primes():      <span class="comment"># 由于primes()是一个无限序列，所以调用时需设置一个退出循环的条件：</span></span><br><span class="line">    <span class="keyword">if</span> n &lt;<span class="number">1000</span>:</span><br><span class="line">        <span class="built_in">print</span>(n)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、高阶函数 sorted()</span></span><br><span class="line"><span class="comment">## 自定义排序，x在前y在后 返回-1，反之返回1，相同返回0</span></span><br><span class="line">test_sort = [<span class="number">36</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">9</span>, <span class="number">21</span>]</span><br><span class="line">string_sort = [<span class="string">&quot;bob&quot;</span>, <span class="string">&quot;about&quot;</span>, <span class="string">&quot;Zoo&quot;</span>, <span class="string">&quot;Credit&quot;</span>]</span><br><span class="line">abs_sort = [<span class="number">36</span>, <span class="number">5</span>, -<span class="number">12</span>, <span class="number">9</span>, -<span class="number">21</span>]</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">sorted</span>(test_sort)</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">sorted</span>(string_sort)</span><br><span class="line"><span class="comment">## sorted()函数是一个高阶函数，还可以接收一个key函数来实现自定义的排序，例如按绝对值大小排序</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">sorted</span>(abs_sort,key = <span class="built_in">abs</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">sorted</span>(string_sort,key = <span class="built_in">str</span>.lower)</span><br><span class="line"><span class="comment">## 要进行反向排序，不必改动key函数，可以传入第三个参数reverse=True</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">sorted</span>(string_sort,key = <span class="built_in">str</span>.lower, reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_cmp</span>(<span class="params">x,y</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x&gt;y:</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> x&lt;y:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"><span class="built_in">sorted</span>(test_sort,is_cmp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sort_string</span>(<span class="params">s1,s2</span>):</span>     <span class="comment"># 实现不区分大小写的字符串排序</span></span><br><span class="line">    str1 = s1.upper()</span><br><span class="line">    str2 = s2.upper()</span><br><span class="line">    <span class="keyword">if</span> str1 &lt; str2:</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> str1 &gt; str2:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">sorted</span>(string_sort,sort_string)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/24/10-%E3%80%90Python%E3%80%91%E5%B8%B8%E7%94%A8%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/" data-id="ckts3ejrt00034d9kgroicwwr" data-title="10-【Python】常用高阶函数" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-9-【Python】气象分析案例" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/12/24/9-%E3%80%90Python%E3%80%91%E6%B0%94%E8%B1%A1%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/" class="article-date">
  <time class="dt-published" datetime="2017-12-24T03:12:18.000Z" itemprop="datePublished">2017-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/12/24/9-%E3%80%90Python%E3%80%91%E6%B0%94%E8%B1%A1%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/">9-【Python】气象分析案例</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>原文地址：<a target="_blank" rel="noopener" href="https://www.shiyanlou.com/courses/running#">打开文章</a></p>
</blockquote>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>学习完基础知识，现在需要一些练习项目，所以网上找了些试试。</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="一、实验介绍"><a href="#一、实验介绍" class="headerlink" title="一、实验介绍"></a>一、实验介绍</h2><p>本实验将对意大利北部沿海地区的气象数据进行分析与可视化。我们在实验过程中先会运用 <code>Python</code> 中 <code>matplotlib</code> 库的对数据进行图表化处理，然后调用 <code>scikit-learn</code> 库当中的的 <code>SVM</code> 库对数据进行回归分析，最终在图表分析的支持下得出我们的结论。  </p>
<h3 id="1-1实验知识点"><a href="#1-1实验知识点" class="headerlink" title="1.1实验知识点"></a>1.1实验知识点</h3><ul>
<li>matplotlib 库画出图像</li>
<li>scikit-learn 库对数据进行回归分析</li>
<li>numpy 库对数据进行切片</li>
</ul>
<h3 id="1-2实验环境"><a href="#1-2实验环境" class="headerlink" title="1.2实验环境"></a>1.2实验环境</h3><ul>
<li>python2.7</li>
<li>spyder</li>
<li>scikit-learn<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/caoeryingzi/article/details/20448223">Windows下安装scikit-learn</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/xiaocanxccc/article/details/48950469">Linux下安装scikit-learn</a><br>Linux可以执行命令<code>sudo pip install scikit-learn</code> 安装。</li>
</ul>
<h3 id="1-4-适合人群"><a href="#1-4-适合人群" class="headerlink" title="1.4 适合人群"></a>1.4 适合人群</h3><p>本课程难度为中等，适合具有 <code>Python</code> 基础的用户，如果对 <code>matplotlib</code> 模块有了解会更快的上手。</p>
<h2 id="二、温度数据分析"><a href="#二、温度数据分析" class="headerlink" title="二、温度数据分析"></a>二、温度数据分析</h2><p>这里省略那些介绍内容，具体查看最上面文章，这里贴代码：</p>
<h3 id="2-1实验前准备"><a href="#2-1实验前准备" class="headerlink" title="2.1实验前准备"></a>2.1实验前准备</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## 本案例源代码  命令行执行</span><br><span class="line">$ wget http://labfile.oss.aliyuncs.com/courses/780/SourceCode.zip</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">## 1.下载所需数据源  命令行执行</span><br><span class="line">$ wget http://labfile.oss.aliyuncs.com/courses/780/WeatherData.zip</span><br><span class="line">## unzip WeatherData.zip</span><br><span class="line"></span><br><span class="line">## 2.打开sPyder 并进入目标目录</span><br><span class="line">cd Code</span><br><span class="line">cd WeatherAnalysis</span><br><span class="line">cd WeatherData</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-2单座城市气温变化图的绘制（这里以米兰为例）"><a href="#2-2单座城市气温变化图的绘制（这里以米兰为例）" class="headerlink" title="2.2单座城市气温变化图的绘制（这里以米兰为例）"></a>2.2单座城市气温变化图的绘制（这里以米兰为例）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">## 引入模块</span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">## 引入数据</span><br><span class="line">df_ferrara = pd.read_csv(&quot;ferrara_270615.csv&quot;)</span><br><span class="line">df_milano = pd.read_csv(&quot;milano_270615.csv&quot;)</span><br><span class="line">df_mantova = pd.read_csv(&quot;mantova_270615.csv&quot;)</span><br><span class="line">df_ravenna = pd.read_csv(&quot;ravenna_270615.csv&quot;)</span><br><span class="line">df_torino = pd.read_csv(&quot;torino_270615.csv&quot;)</span><br><span class="line">df_asti = pd.read_csv(&quot;asti_270615.csv&quot;)</span><br><span class="line">df_bologna = pd.read_csv(&quot;bologna_270615.csv&quot;)</span><br><span class="line">df_piacenza = pd.read_csv(&quot;piacenza_270615.csv&quot;)</span><br><span class="line">df_cesena = pd.read_csv(&quot;cesena_270615.csv&quot;)</span><br><span class="line">df_faenza = pd.read_csv(&quot;faenza_270615.csv&quot;)</span><br><span class="line"></span><br><span class="line">## 3.导入必要的库 </span><br><span class="line">%matplotlib inline</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import matplotlib.dates as mdates</span><br><span class="line">from dateutil import parser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 4.读取米兰的城市气象数据</span><br><span class="line">df_milano = pd.read_csv(&quot;milano_270615.csv&quot;)</span><br><span class="line"></span><br><span class="line">## 5.取出我们要分析的温度和日期数据</span><br><span class="line">y1 = df_milano[&quot;temp&quot;]</span><br><span class="line">x1 = df_milano[&quot;day&quot;]</span><br><span class="line"></span><br><span class="line">## 6.把日期数据转换成 datetime 的格式</span><br><span class="line">day_milano = [parser.parse(x) for x in x1]</span><br><span class="line"></span><br><span class="line">## 7.调用 subplot 函数, fig 是图像对象，ax 是坐标轴对象</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">## 8.调整x轴坐标刻度，使其旋转70度，方便查看</span><br><span class="line">plt.xticks(rotation=70)</span><br><span class="line"></span><br><span class="line">## 9.设定时间的格式</span><br><span class="line">hours = mdates.DateFormatter(&quot;%H:%M&quot;)</span><br><span class="line"></span><br><span class="line">## 10.设定X轴显示的格式</span><br><span class="line">ax.xaxis.set_major_formatter(hours)</span><br><span class="line"></span><br><span class="line">## 11.画出图像，day_milano是X轴数据，y1是Y轴数据，‘r’代表的是&quot;red&quot; 红色</span><br><span class="line">ax.plot(day_milano ,y1, &quot;r&quot;)</span><br><span class="line"></span><br><span class="line">## 12.显示图像</span><br><span class="line">fig</span><br></pre></td></tr></table></figure>
<p>由生成的图像可见，气温走势接近正弦曲线，从早上开始气温逐渐升高，最高温出现在下午两点到六点之间，随后气温逐渐下降，在第二天早上六点时达到最低值。  </p>
<p>我们进行数据分析的目的是尝试解释是否能够评估海洋是怎样影响气温的，以及是否能够影响气温趋势，因此我们同时来看几个不同城市的气温趋势。这是检验分析方向是否正确的唯一方式。因此，我们选择三个离海最近以及三个离海最远的城市。    </p>
<h3 id="2-3离海最近的三座城市和最远的三座城市气温变化图的绘制"><a href="#2-3离海最近的三座城市和最远的三座城市气温变化图的绘制" class="headerlink" title="2.3离海最近的三座城市和最远的三座城市气温变化图的绘制"></a>2.3离海最近的三座城市和最远的三座城市气温变化图的绘制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">##  1.读取数据文件(之前没读取数据的同学，这里一定要读取啦)</span><br><span class="line">df_ravenna = pd.read_csv(&quot;ravenna_270615.csv&quot;)</span><br><span class="line">df_faenza = pd.read_csv(&quot;faenza_270615.csv&quot;)</span><br><span class="line">df_cesena = pd.read_csv(&quot;cesena_270615.csv&quot;)</span><br><span class="line">df_asti = pd.read_csv(&quot;asti_270615.csv&quot;)</span><br><span class="line">df_torino = pd.read_csv(&quot;torino_270615.csv&quot;)</span><br><span class="line">df_milano = pd.read_csv(&quot;milano_270615.csv&quot;)</span><br><span class="line"></span><br><span class="line">##  2.读取温度和日期数据</span><br><span class="line">y1 = df_ravenna[&quot;temp&quot;]</span><br><span class="line">x1 = df_ravenna[&quot;day&quot;]</span><br><span class="line">y2 = df_faenza[&quot;temp&quot;]</span><br><span class="line">x2 = df_faenza[&quot;day&quot;]</span><br><span class="line">y3 = df_cesena[&quot;temp&quot;]</span><br><span class="line">x3 = df_cesena[&quot;day&quot;]</span><br><span class="line">y4 = df_milano[&quot;temp&quot;]</span><br><span class="line">x4 = df_milano[&quot;day&quot;]</span><br><span class="line">y5 = df_asti[&quot;temp&quot;]</span><br><span class="line">x5 = df_asti[&quot;day&quot;]</span><br><span class="line">y6 = df_torino[&quot;temp&quot;]</span><br><span class="line">x6 = df_torino[&quot;day&quot;]</span><br><span class="line"></span><br><span class="line">##  3.把日期从 string 类型转化为标准的 datetime 类型</span><br><span class="line">day_ravenna = [parser.parse(x) for x in x1]</span><br><span class="line">day_faenza = [parser.parse(x) for x in x2]</span><br><span class="line">day_cesena = [parser.parse(x) for x in x3]</span><br><span class="line">dat_milano = [parser.parse(x) for x in x4]</span><br><span class="line">day_asti = [parser.parse(x) for x in x5]</span><br><span class="line">day_torino = [parser.parse(x) for x in x6]</span><br><span class="line"></span><br><span class="line">##  4.调用 subplots() 函数，重新定义 fig, ax 变量</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">plt.xticks(rotation=70)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hours = mdates.DateFormatter(&quot;%H:%M&quot;)</span><br><span class="line">ax.xaxis.set_major_formatter(hours)</span><br><span class="line"></span><br><span class="line">##  5.这里需要画出三根线，所以需要三组参数， &quot;g&quot;代表&quot;green&quot;</span><br><span class="line">ax.plot(day_ravenna,y1,&quot;r&quot;,day_faenza,y2,&quot;r&quot;,day_cesena,y3,&quot;r&quot;)</span><br><span class="line">ax.plot(day_milano,y4,&quot;g&quot;,day_asti,y5,&quot;g&quot;,day_torino,y6,&quot;g&quot;)</span><br><span class="line">fig</span><br></pre></td></tr></table></figure>
<p>上述代码将生成的图表。离海最近的三个城市的气温曲线使用红色，而离海最远的三个城市的曲线使用绿色。<br>如生成的图像所示，结果看起来不错。离海最近的三个城市的最高气温比离海最远的三个城市低不少，而最低气温看起来差别较小。  </p>
<p>我们可以沿着这个方向做深入研究，收集10个城市的最高温和最低温，用线性图表示气温最值点和离海远近之间的关系。  </p>
<h3 id="2-4收集10座城市最高温和最低温，用线形图表示气温最值点和离海远近之间的关系"><a href="#2-4收集10座城市最高温和最低温，用线形图表示气温最值点和离海远近之间的关系" class="headerlink" title="2.4收集10座城市最高温和最低温，用线形图表示气温最值点和离海远近之间的关系"></a>2.4收集10座城市最高温和最低温，用线形图表示气温最值点和离海远近之间的关系</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">##  1.dist 是一个装城市距离海边距离的列表</span><br><span class="line">dist = [df_ravenna[&quot;dist&quot;][0],</span><br><span class="line">    df_cesena[&quot;dist&quot;][0],</span><br><span class="line">    df_faenza[&quot;dist&quot;][0],</span><br><span class="line">    df_ferrara[&quot;dist&quot;][0],</span><br><span class="line">    df_bologna[&quot;dist&quot;][0],</span><br><span class="line">    df_mantova[&quot;dist&quot;][0],</span><br><span class="line">    df_piacenza[&quot;dist&quot;][0],</span><br><span class="line">    df_milano[&quot;dist&quot;][0],</span><br><span class="line">    df_asti[&quot;dist&quot;][0],</span><br><span class="line">    df_torino[&quot;dist&quot;][0]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">##  2.temp_max 是一个存放每个城市最高温度的列表</span><br><span class="line">temp_max = [df_ravenna[&quot;temp&quot;].max(),</span><br><span class="line">    df_cesena[&quot;temp&quot;].max(),</span><br><span class="line">    df_faenza[&quot;temp&quot;].max(),</span><br><span class="line">    df_ferrara[&quot;temp&quot;].max(),</span><br><span class="line">    df_bologna[&quot;temp&quot;].max(),</span><br><span class="line">    df_mantova[&quot;temp&quot;].max(),</span><br><span class="line">    df_piacenza[&quot;temp&quot;].max(),</span><br><span class="line">    df_milano[&quot;temp&quot;].max(),</span><br><span class="line">    df_asti[&quot;temp&quot;].max(),</span><br><span class="line">    df_torino[&quot;temp&quot;].max()</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">##  3.temp_min 是一个存放每个城市最低温度的列表</span><br><span class="line">temp_min = [df_ravenna[&quot;temp&quot;].min(),</span><br><span class="line">    df_cesena[&quot;temp&quot;].min(),</span><br><span class="line">    df_faenza[&quot;temp&quot;].min(),</span><br><span class="line">    df_ferrara[&quot;temp&quot;].min(),</span><br><span class="line">    df_bologna[&quot;temp&quot;].min(),</span><br><span class="line">    df_mantova[&quot;temp&quot;].min(),</span><br><span class="line">    df_piacenza[&quot;temp&quot;].min(),</span><br><span class="line">    df_milano[&quot;temp&quot;].min(),</span><br><span class="line">    df_asti[&quot;temp&quot;].min(),</span><br><span class="line">    df_torino[&quot;temp&quot;].min()</span><br><span class="line">]</span><br><span class="line">##  4.绘图</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.plot(dist,temp_max,&quot;ro&quot;)</span><br><span class="line">fig</span><br></pre></td></tr></table></figure>
<p>如生成的图像所示，现在你可以证实，海洋对气象数据具有一定程度的影响这个假设是正确的（至少这一天如此）。</p>
<p>进一步观察上图，你会发现海洋的影响衰减得很快，离海60～70公里开外，气温就已攀升到高位。<br>用线性回归算法得到两条直线，分别表示两种不同的气温趋势，这样做很有趣。我们可以使<br>用scikit-learn库的SVR方法。（注意：这段代码会跑比较久的时间）  </p>
<h2 id="2-5scikit-learn分析两种气温变化趋势"><a href="#2-5scikit-learn分析两种气温变化趋势" class="headerlink" title="2.5scikit-learn分析两种气温变化趋势"></a>2.5scikit-learn分析两种气温变化趋势</h2><p>这里首先要安装 <code>scikit-learn库</code> ，安装方法具体可以 <a target="_blank" rel="noopener" href="http://blog.csdn.net/shizhixin/article/details/50488520">打开链接查看</a>。<br>这里做简单介绍：先通过 <code>easy_install</code> 命令安装 <code>numpy，scipy，matplotlib</code> ， 然后<code>easy_install scikit-learn</code>命令直接安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.svm import SVR</span><br><span class="line"></span><br><span class="line"># dist1是靠近海的城市集合，dist2是远离海洋的城市集合</span><br><span class="line">dist1 = dist[0:5]</span><br><span class="line">dist2 = dist[5:10]</span><br><span class="line"></span><br><span class="line"># 改变列表的结构，dist1现在是5个列表的集合</span><br><span class="line"># 之后我们会看到 numpy 中 reshape() 函数也有同样的作用</span><br><span class="line">dist1 = [[x] for x in dist1]</span><br><span class="line">dist2 = [[x] for x in dist2]</span><br><span class="line"></span><br><span class="line"># temp_max1 是 dist1 中城市的对应最高温度</span><br><span class="line">temp_max1 = temp_max[0:5]</span><br><span class="line"># temp_max2 是 dist2 中城市的对应最高温度</span><br><span class="line">temp_max2 = temp_max[5:10]</span><br><span class="line"></span><br><span class="line"># 我们调用SVR函数，在参数中规定了使用线性的拟合函数</span><br><span class="line"># 并且把 C 设为1000来尽量拟合数据（因为不需要精确预测不用担心过拟合）</span><br><span class="line">svr_lin1 = SVR(kernel=&quot;linear&quot;, C=1e3)</span><br><span class="line">svr_lin2 = SVR(kernel=&quot;linear&quot;, C=1e3)</span><br><span class="line"></span><br><span class="line"># 加入数据，进行拟合（这一步可能会跑很久，大概10多分钟，休息一下:) ）</span><br><span class="line">svr_lin1.fit(dist1, temp_max1)</span><br><span class="line">svr_lin2.fit(dist2, temp_max2)</span><br><span class="line"></span><br><span class="line"># 关于 reshape 函数请看代码后面的详细讨论</span><br><span class="line">xp1 = np.arange(10,100,10).reshape((9,1))</span><br><span class="line">xp2 = np.arange(50,400,50).reshape((7,1))</span><br><span class="line">yp1 = svr_lin1.predict(xp1)</span><br><span class="line">yp2 = svr_lin2.predict(xp2)</span><br><span class="line"></span><br><span class="line"># 限制了 x 轴的取值范围</span><br><span class="line">ax.set_xlim(0,400)</span><br><span class="line"></span><br><span class="line"># 画出图像</span><br><span class="line">ax.plot(xp1, yp1, c=&quot;b&quot;, label=&quot;Strong sea effect&quot;)</span><br><span class="line">ax.plot(xp2, yp2, c=&quot;g&quot;, label=&quot;Light sea effect&quot;)</span><br><span class="line">fig</span><br></pre></td></tr></table></figure>

<p>这里 <code>np.arange(10,100,10)</code> 会返回 <code>[10, 20, 30,..., 90]</code>，如果把列表看成是一个矩阵，那么这个矩阵是 <code>1 9</code> 的。这里 <code>reshape((9,1))</code> 函数就会把该列表变为 <code>9 1</code> 的， <code>[[10], [20], ..., [90]]</code>。这么做的原因是因为 <code>predict()</code> 函数的只能接受一个<code> N 1</code> 的列表，返回一个<code>1 N</code> 的列表。   </p>
<p>如生成图像所见，离海60公里以内，气温上升速度很快，从28度陡升至31度，随后增速渐趋缓和（如果还继续增长的话），更长的距离才会有小幅上升。这两种趋势可分别用两条直线来表示，直线的表达式为：x = ax + b 其中a为斜率，b为截距。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print svr_lin1.coef_  #斜率</span><br><span class="line">print svr_lin1.intercept_  # 截距</span><br><span class="line">print svr_lin2.coef_</span><br><span class="line">print svr_lin2.intercept_</span><br><span class="line">[[0.04794118]]</span><br><span class="line">[ 27.65617647]</span><br><span class="line">[[0.00401274]]</span><br><span class="line">[ 29.98745223]</span><br></pre></td></tr></table></figure>

<h2 id="2-6找到受海洋影响和不受海洋影响的区域的分界点"><a href="#2-6找到受海洋影响和不受海洋影响的区域的分界点" class="headerlink" title="2.6找到受海洋影响和不受海洋影响的区域的分界点"></a>2.6找到受海洋影响和不受海洋影响的区域的分界点</h2><p>你可能会考虑将这两条直线的交点作为受海洋影响和不受海洋影响的区域的分界点，或者至少是海洋影响较弱的分界点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">from scipy.optimize import fsolve</span><br><span class="line"></span><br><span class="line"># 定义了第一条拟合直线</span><br><span class="line">def line1(x):</span><br><span class="line">    a1 = svr_lin1.coef_[0][0]</span><br><span class="line">    b1 = svr_lin1.intercept_[0]</span><br><span class="line">    return a1*x + b1</span><br><span class="line"></span><br><span class="line"># 定义了第二条拟合直线</span><br><span class="line">def line2(x):</span><br><span class="line">    a2 = svr_lin2.coef_[0][0]</span><br><span class="line">    b2 = svr_lin2.intercept_[0]</span><br><span class="line">    return a2*x + b2</span><br><span class="line"></span><br><span class="line"># 定义了找到两条直线的交点的 x 坐标的函数</span><br><span class="line">def findIntersection(fun1,fun2,x0):</span><br><span class="line">    return fsolve(lambda x : fun1(x) - fun2(x),x0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = findIntersection(line1,line2,0.0)</span><br><span class="line">print &quot;[x,y] = [ %d , %d ]&quot; % (result,line1(result))</span><br><span class="line"></span><br><span class="line"># x = [0,10,20, ..., 300]</span><br><span class="line">x = np.linspace(0,300,31)</span><br><span class="line">plt.plot(x,line1(x),x,line2(x),result,line1(result),&quot;ro&quot;)</span><br></pre></td></tr></table></figure>
<p>执行上述代码，将得到交点的坐标 [x,y] = [ 53, 30 ]<br>因此，你可以说海洋对气温产生影响的平均距离（该天的情况）为53公里。<br>现在，我们可以转而分析最低气温。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># axis 函数规定了 x 轴和 y 轴的取值范围</span><br><span class="line">plt.axis((0,400,15,25))</span><br><span class="line">plt.plot(dist,temp_min,&quot;bo&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="三、湿度数据分析"><a href="#三、湿度数据分析" class="headerlink" title="三、湿度数据分析"></a>三、湿度数据分析</h2><p>10个DataFrame对象中还包含湿度这个气象数据。因此，你也可以考察当天三个近海城市和三个内陆城市的湿度趋势。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># 读取湿度数据</span><br><span class="line">y1 = df_ravenna[&quot;humidity&quot;]</span><br><span class="line">x1 = df_ravenna[&quot;day&quot;]</span><br><span class="line">y2 = df_faenza[&quot;humidity&quot;]</span><br><span class="line">x2 = df_faenza[&quot;day&quot;]</span><br><span class="line">y3 = df_cesena[&quot;humidity&quot;]</span><br><span class="line">x3 = df_cesena[&quot;day&quot;]</span><br><span class="line">y4 = df_milano[&quot;humidity&quot;]</span><br><span class="line">x4 = df_milano[&quot;day&quot;]</span><br><span class="line">y5 = df_asti[&quot;humidity&quot;]</span><br><span class="line">x5 = df_asti[&quot;day&quot;]</span><br><span class="line">y6 = df_torino[&quot;humidity&quot;]</span><br><span class="line">x6 = df_torino[&quot;day&quot;]</span><br><span class="line"></span><br><span class="line"># 重新定义 fig 和 ax 变量</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">plt.xticks(rotation=70)</span><br><span class="line"></span><br><span class="line"># 把时间从 string 类型转化为标准的 datetime 类型</span><br><span class="line">day_ravenna = [parser.parse(x) for x in x1]</span><br><span class="line">day_faenza = [parser.parse(x) for x in x2]</span><br><span class="line">day_cesena = [parser.parse(x) for x in x3]</span><br><span class="line">day_milano = [parser.parse(x) for x in x4]</span><br><span class="line">day_asti = [parser.parse(x) for x in x5]</span><br><span class="line">day_torino = [parser.parse(x) for x in x6]</span><br><span class="line"></span><br><span class="line"># 规定时间的表示方式</span><br><span class="line">hours = mdates.DateFormatter(&quot;%H:%M&quot;)</span><br><span class="line">ax.xaxis.set_major_formatter(hours)</span><br><span class="line"></span><br><span class="line">#表示在图上</span><br><span class="line">ax.plot(day_ravenna,y1,&quot;r&quot;,day_faenza,y2,&quot;r&quot;,day_cesena,y3,&quot;r&quot;)</span><br><span class="line">ax.plot(day_milano,y4,&quot;g&quot;,day_asti,y5,&quot;g&quot;,day_torino,y6,&quot;g&quot;)</span><br><span class="line">fig</span><br></pre></td></tr></table></figure>
<p>乍看上去好像近海城市的湿度要大于内陆城市，全天湿度差距在20%左右。我们再来看一下湿度的极值和离海远近之间的关系，是否跟我们的第一印象相符。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 获取最大湿度数据</span><br><span class="line">hum_max = [df_ravenna[&quot;humidity&quot;].max(),</span><br><span class="line">df_cesena[&quot;humidity&quot;].max(),</span><br><span class="line">df_faenza[&quot;humidity&quot;].max(),</span><br><span class="line">df_ferrara[&quot;humidity&quot;].max(),</span><br><span class="line">df_bologna[&quot;humidity&quot;].max(),</span><br><span class="line">df_mantova[&quot;humidity&quot;].max(),</span><br><span class="line">df_piacenza[&quot;humidity&quot;].max(),</span><br><span class="line">df_milano[&quot;humidity&quot;].max(),</span><br><span class="line">df_asti[&quot;humidity&quot;].max(),</span><br><span class="line">df_torino[&quot;humidity&quot;].max()</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">plt.plot(dist,hum_max,&quot;bo&quot;)</span><br></pre></td></tr></table></figure>
<p>我们把10个城市的最大湿度与离海远近之间的关系做成图表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 获取最小湿度</span><br><span class="line">hum_min = [df_ravenna[&quot;humidity&quot;].min(),</span><br><span class="line">df_cesena[&quot;humidity&quot;].min(),</span><br><span class="line">df_faenza[&quot;humidity&quot;].min(),</span><br><span class="line">df_ferrara[&quot;humidity&quot;].min(),</span><br><span class="line">df_bologna[&quot;humidity&quot;].min(),</span><br><span class="line">df_mantova[&quot;humidity&quot;].min(),</span><br><span class="line">df_piacenza[&quot;humidity&quot;].min(),</span><br><span class="line">df_milano[&quot;humidity&quot;].min(),</span><br><span class="line">df_asti[&quot;humidity&quot;].min(),</span><br><span class="line">df_torino[&quot;humidity&quot;].min()</span><br><span class="line">]</span><br><span class="line">plt.plot(dist,hum_min,&quot;bo&quot;)</span><br></pre></td></tr></table></figure>
<p>再来把10个城市的最小湿度与离海远近之间的关系做成图表。  </p>
<p>由上面两张图可以确定，近海城市无论是最大还是最小湿度都要高于内陆城市。然而在我看来，我们还不能说湿度和距离之间存在线性关系或者其他能用曲线表示的关系。我们采集的数据点数量（10）太少，不足以描述这类趋势。  </p>
<h2 id="四、风向频率玫瑰图"><a href="#四、风向频率玫瑰图" class="headerlink" title="四、风向频率玫瑰图"></a>四、风向频率玫瑰图</h2><p>在我们采集的每个城市的气象数据中，下面两个与风有关：</p>
<ul>
<li>风力（风向）</li>
<li>风速</li>
</ul>
<p>分析存放每个城市气象数据的DataFrame就会发现，风速不仅跟一天的时间段相关联，还与一个介于0~360度的方向有关。例如，每一条测量数据也包含风吹来的方向。  </p>
<p>要是把一个DataFrame中的数据点做成散点图：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(df_ravenna[&quot;wind_deg&quot;],df_ravenna[&quot;wind_speed&quot;],&quot;ro&quot;)</span><br></pre></td></tr></table></figure>
<p>很显然该图的表现力也有不足。<br>要表示呈360度分布的数据点，最好使用另一种可视化方法：<code>极区图</code>。<br>首先，创建一个直方图，也就是将360度分为八个面元，每个面元为45度，把所有的数据点分到这八个面元中。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hist, bins = np.histogram(df_ravenna[&quot;wind_deg&quot;],8,[0,360])</span><br><span class="line">print hist</span><br><span class="line">print bins</span><br></pre></td></tr></table></figure>
<p>histogram()函数返回结果中的数组hist为落在每个面元的数据点数量。<br>[ 0 5 11 1 0 1 0 0]  </p>
<p>返回结果中的数组bins定义了360度范围内各面元的边界。  </p>
<p>[ 0. 45. 90. 135. 180. 225. 270. 315. 360.]  </p>
<p>要想正确定义极区图，离不开这两个数组。我们将创建一个函数来绘制极区图，其中部分代码在第7章已讲过。我们把这个函数定义为 <code>showRoseWind()</code> ，它有三个参数：<code>values数组</code>，指的是想为其作图的数据，也就是这里的 <code>hist数组</code> ；第二个参数 <code>city_name</code>为字符串类型，指定图表标题所用的城市名称；最后一个参数 <code>max_value</code> 为整型，指定最大的蓝色值。<br>定义这样一个函数很有用，它既能避免多次重复编写相同的代码，还能增强代码的模块化程度，便于你把精力放到与函数内部操作相关的概念上。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def showRoseWind(values,city_name,max_value):</span><br><span class="line">    N = 8</span><br><span class="line"></span><br><span class="line">    # theta = [pi*1/4, pi*2/4, pi*3/4, ..., pi*2]</span><br><span class="line">    theta = np.arange(0.,2 * np.pi, 2 * np.pi / N)</span><br><span class="line">    radii = np.array(values)</span><br><span class="line">    # 绘制极区图的坐标系</span><br><span class="line">    plt.axes([0.025, 0.025, 0.95, 0.95], polar=True)</span><br><span class="line"></span><br><span class="line">    # 列表中包含的是每一个扇区的 rgb 值，x越大，对应的color越接近蓝色</span><br><span class="line">    colors = [(1-x/max_value, 1-x/max_value, 0.75) for x in radii]</span><br><span class="line"></span><br><span class="line">    # 画出每个扇区</span><br><span class="line">    plt.bar(theta, radii, width=(2*np.pi/N), bottom=0.0, color=colors)</span><br><span class="line"></span><br><span class="line">    # 设置极区图的标题</span><br><span class="line">    plt.title(city_name, x=0.2, fontsize=20)</span><br></pre></td></tr></table></figure>
<p>你需要修改变量colors存储的颜色表。这里，扇形的颜色越接近蓝色，值越大。定义好函数之后，调用它即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showRoseWind(hist,&quot;Ravenna&quot;,max(hist))</span><br></pre></td></tr></table></figure>
<p>由生成图像可见，整个360度的范围被分成八个区域（面元），每个区域弧长为45度，此外每个区域还有一列呈放射状排列的刻度值。在每个区域中，用半径长度可以改变的扇形表示一个数值，半径越长，扇形所表示的数值就越大。为了增强图表的可读性，我们使用与扇形半径相对应的颜色表。半径越长，扇形跨度越大，颜色越接近于深蓝色。  </p>
<p>从刚得到的极区图可以得知风向在极坐标系中的分布方式。该图表示这一天大部分时间风都吹向西南和正西方向。  </p>
<p>定义好 <code>showRoseWind()</code> 函数之后，查看其他城市的风向情况也非常简单。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hist, bin = np.histogram(df_ferrara[&quot;wind_deg&quot;],8,[0,360])</span><br><span class="line">print hist</span><br><span class="line">showRoseWind(hist,&quot;Ferrara&quot;, max(hist))</span><br></pre></td></tr></table></figure>

<h2 id="五、计算风速均值的分布情况"><a href="#五、计算风速均值的分布情况" class="headerlink" title="五、计算风速均值的分布情况"></a>五、计算风速均值的分布情况</h2><p>即使是跟风速相关的其他数据，也可以用极区图来表示。<br>定义RoseWind_Speed函数，计算将360度范围划分成的八个面元中每个面元的平均风速。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def RoseWind_Speed(df_city):</span><br><span class="line">    # degs = [45, 90, ..., 360]</span><br><span class="line">    degs = np.arange(45,361,45)</span><br><span class="line">    tmp = []</span><br><span class="line">    for deg in degs:</span><br><span class="line">        # 获取 wind_deg 在指定范围的风速平均值数据</span><br><span class="line">        tmp.append(df_city[(df_city[&quot;wind_deg&quot;]&gt;(deg-46)) &amp; (df_city[&quot;wind_deg&quot;]&lt;deg)]</span><br><span class="line">        [&quot;wind_speed&quot;].mean())</span><br><span class="line">    return np.array(tmp)</span><br></pre></td></tr></table></figure>
<p>这里 <code>df_city[(df_city[&quot;wind_deg&quot;]&gt;(deg-46)) &amp; (df_city[&quot;wind_deg&quot;]&lt;deg)]</code> 获取的是风向大于 <code>&quot;deg-46&quot;</code> 度和风向小于 <code>&quot;deg&quot;</code> 的数据。  </p>
<p><code>RoseWind_Speed()</code> 函数返回一个包含八个平均风速值的NumPy数组。该数组将作为先前定义的 <code>showRoseWind()函数</code> 的第一个参数，这个函数是用来绘制极区图的。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showRoseWind(RoseWind_Speed(df_ravenna),&quot;Ravenna&quot;,max(hist))</span><br></pre></td></tr></table></figure>
<p>如生成图像所示的风向频率玫瑰图表示风速在360度范围内的分布情况。</p>
<h2 id="六、实验总结"><a href="#六、实验总结" class="headerlink" title="六、实验总结"></a>六、实验总结</h2><p>本章主要目的是演示如何从原始数据获取信息。其中有些信息无法给出重要结论，而有些信息能够验证假设，增加我们对系统状态的认识，而找出这种信息也就意味着数据分析取得了成功。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/12/24/9-%E3%80%90Python%E3%80%91%E6%B0%94%E8%B1%A1%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/" data-id="ckts3ejzg00o94d9kee5i0pl6" data-title="9-【Python】气象分析案例" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/21/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/23/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E5%8A%A8%E7%94%BB/" rel="tag">CSS动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6-ES7-ES8/" rel="tag">ES6/ES7/ES8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eslint/" rel="tag">Eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/" rel="tag">GraphQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5/" rel="tag">H5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" rel="tag">HTTP协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hybrid/" rel="tag">Hybrid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/" rel="tag">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Numpy/" rel="tag">Numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tensorflow/" rel="tag">Tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TyeScript/" rel="tag">TyeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/" rel="tag">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/demo/" rel="tag">demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" rel="tag">全栈开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" rel="tag">前端探索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" rel="tag">前端知乎系列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" rel="tag">常用技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" rel="tag">微前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" rel="tag">源码精读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%83%AD%E9%97%A8/" rel="tag">热门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" rel="tag">生活杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" rel="tag">网络请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 11.88px;">Angular</a> <a href="/tags/CSS/" style="font-size: 18.13px;">CSS</a> <a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 12.5px;">CSS动画</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/ES6-ES7-ES8/" style="font-size: 10.63px;">ES6/ES7/ES8</a> <a href="/tags/Eslint/" style="font-size: 10px;">Eslint</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/H5/" style="font-size: 10px;">H5</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 11.88px;">HTTP</a> <a href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" style="font-size: 11.25px;">HTTP协议</a> <a href="/tags/Hybrid/" style="font-size: 10.63px;">Hybrid</a> <a href="/tags/JavaScript/" style="font-size: 19.38px;">JavaScript</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Nodejs/" style="font-size: 11.25px;">Nodejs</a> <a href="/tags/Numpy/" style="font-size: 10.63px;">Numpy</a> <a href="/tags/Python/" style="font-size: 17.5px;">Python</a> <a href="/tags/React/" style="font-size: 12.5px;">React</a> <a href="/tags/Tensorflow/" style="font-size: 10.63px;">Tensorflow</a> <a href="/tags/TyeScript/" style="font-size: 10px;">TyeScript</a> <a href="/tags/TypeScript/" style="font-size: 11.25px;">TypeScript</a> <a href="/tags/Vuejs/" style="font-size: 14.38px;">Vuejs</a> <a href="/tags/WebSocket/" style="font-size: 10px;">WebSocket</a> <a href="/tags/Webpack/" style="font-size: 15.63px;">Webpack</a> <a href="/tags/demo/" style="font-size: 10.63px;">demo</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">中间件</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 16.25px;">人工智能</a> <a href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" style="font-size: 11.25px;">全栈开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 20px;">前端开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" style="font-size: 11.25px;">前端探索</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" style="font-size: 10.63px;">前端知乎系列</a> <a href="/tags/%E5%8E%9F%E5%88%9B/" style="font-size: 18.75px;">原创</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" style="font-size: 10.63px;">常用技术</a> <a href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">微前端</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 13.75px;">总结</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 10.63px;">构建工具</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10.63px;">正则表达式</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 10px;">源码</a> <a href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" style="font-size: 10px;">源码精读</a> <a href="/tags/%E7%83%AD%E9%97%A8/" style="font-size: 10px;">热门</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" style="font-size: 10px;">生活杂记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13.13px;">算法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 10px;">编译原理</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" style="font-size: 10px;">网络请求</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 14.38px;">读书笔记</a> <a href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" style="font-size: 16.88px;">重温基础</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 10px;">面试题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/28/227-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%9C%A8%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8SVG%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87/">227-【总结】如何优雅的在微信小程序使用SVG字体图标</a>
          </li>
        
          <li>
            <a href="/2021/07/28/226-%E3%80%90HTTP%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%AE%A1%E7%90%86HTTP%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9F/">226-【HTTP】如何优雅的管理HTTP请求和响应拦截器？</a>
          </li>
        
          <li>
            <a href="/2021/07/28/225-%E3%80%90Vue%E3%80%91%E4%BB%8E%E6%89%8B%E5%86%99Vue3%E7%9A%84Reactivity%E5%BC%80%E5%A7%8B%E6%B7%B1%E5%85%A5Vue3%E6%BA%90%E7%A0%81/">225-【Vue】从手写Vue3的Reactivity开始深入Vue3源码</a>
          </li>
        
          <li>
            <a href="/2021/05/30/224-%E3%80%90Chrome%E3%80%915%E4%B8%AAChrome%E8%B0%83%E8%AF%95%E6%B7%B7%E5%90%88%E5%BA%94%E7%94%A8%E7%9A%84%E6%8A%80%E5%B7%A7/">224-【Chrome】5个Chrome调试混合应用的技巧</a>
          </li>
        
          <li>
            <a href="/2021/03/19/223-%E3%80%90%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2%E3%80%91%E6%8E%A2%E7%B4%A2Snabbdom%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/">223-【前端探索】探索Snabbdom模块系统原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
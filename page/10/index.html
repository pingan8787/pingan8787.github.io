<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/10/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-137-【生活杂记】画了两张草稿图" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/29/137-%E3%80%90%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0%E3%80%91%E7%94%BB%E4%BA%86%E4%B8%A4%E5%BC%A0%E8%8D%89%E7%A8%BF%E5%9B%BE/" class="article-date">
  <time class="dt-published" datetime="2019-01-29T15:18:44.000Z" itemprop="datePublished">2019-01-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/29/137-%E3%80%90%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0%E3%80%91%E7%94%BB%E4%BA%86%E4%B8%A4%E5%BC%A0%E8%8D%89%E7%A8%BF%E5%9B%BE/">137-【生活杂记】画了两张草稿图</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>我喜欢在迷茫的时候，拿起笔写一写最近画一画将来，也对照自己的计划，规划具体的事情。</p>
<p>今天画了两张草稿图。   </p>
<p><img src="http://images.pingan8787.com/20190129%E8%8D%89%E7%A8%BF%E5%9B%BE1.jpg" alt="草稿图1"></p>
<p><img src="http://images.pingan8787.com/20190129%E8%8D%89%E7%A8%BF%E5%9B%BE2.jpg" alt="草稿图2"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/29/137-%E3%80%90%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0%E3%80%91%E7%94%BB%E4%BA%86%E4%B8%A4%E5%BC%A0%E8%8D%89%E7%A8%BF%E5%9B%BE/" data-id="ckts3ejsx002a4d9k75llh292" data-title="137-【生活杂记】画了两张草稿图" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" rel="tag">生活杂记</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-136-【JavaScript】【重温基础】20-事件" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/27/136-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9120-%E4%BA%8B%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2019-01-27T04:07:14.000Z" itemprop="datePublished">2019-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/27/136-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9120-%E4%BA%8B%E4%BB%B6/">136-【JavaScript】【重温基础】20.事件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#110;&#x67;&#x61;&#x6e;&#56;&#55;&#x38;&#55;&#64;&#113;&#x71;&#46;&#x63;&#111;&#109;">&#112;&#105;&#110;&#x67;&#x61;&#x6e;&#56;&#55;&#x38;&#55;&#64;&#113;&#x71;&#46;&#x63;&#111;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<p>本文是 <strong>重温基础</strong> 系列文章的第二十篇。</p>
<p>这是第三个基础系列的第一篇，欢迎持续关注呀！<br><strong>重温基础</strong> 系列的【初级】和【中级】的文章，已经统一整理到我的【<a target="_blank" rel="noopener" href="http://js.pingan8787.com/">Cute-JavaScript</a>】的JavaScript基础系列中。<br>今日感受：电影有时候看的是缘分。   </p>
<p><strong>本章节复习的是JS中的事件，事件冒泡捕获代理模拟等等。</strong>          </p>
<p><strong>前置知识：</strong><br>JavaScript与HTML的交互式通过<strong>事件</strong>来实现的，是文档或浏览器窗口中发生的一些特定的交互瞬间。   </p>
<h2 id="1-事件流"><a href="#1-事件流" class="headerlink" title="1.事件流"></a>1.事件流</h2><p>事件流描述的是从页面中接收事件的顺序，通常有这样两种完全相反的事件流概念：<strong>事件冒泡流</strong>（IE团队提出）和<strong>事件捕获流</strong>（网景团队提出）。   </p>
<h3 id="1-1-事件冒泡"><a href="#1-1-事件冒泡" class="headerlink" title="1.1 事件冒泡"></a>1.1 事件冒泡</h3><p>冒泡事件（Event Bubbling）：事件开始时由最具体的元素接收（文档中嵌套层次最深的那个节点），然后逐层向上传播到较为不具体的节点（文档），看下示例代码：    </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>leo 事件冒泡<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;leo&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击页面中<code>&lt;div&gt;</code>元素，这个<code>click</code>事件就会按照下面顺序传播：   </p>
<ol>
<li><code>&lt;div&gt; </code>   </li>
<li><code>&lt;body&gt;</code>   </li>
<li><code>&lt;html&gt; </code>   </li>
<li><code>document</code>   </li>
</ol>
<p>由此可见，元素绑定的事件会通过DOM树向上传播，每层节点都会发生，直到<code>document对象</code>，如图展示了冒泡过程：<br><img src="http://images.pingan8787.com/20190127%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%E6%B5%81.png" alt="事件冒泡流">   </p>
<h3 id="1-2-事件捕获"><a href="#1-2-事件捕获" class="headerlink" title="1.2 事件捕获"></a>1.2 事件捕获</h3><p>事件捕获（Event Capturing）：让不太具体的节点更早接收事件，而最具体的节点最后接收事件，即在事件到达预定目标之前捕获到，看下示例代码（HTML代码和前面一样），事件捕获的过程是这样的：   </p>
<ol>
<li><code>document</code>   </li>
<li><code>&lt;html&gt; </code>   </li>
<li><code>&lt;body&gt;</code>   </li>
<li><code>&lt;div&gt; </code>   </li>
</ol>
<p>看得出，<code>document对象</code>最新接收事件，然后沿DOM树依次向下，直到最后的实际目标<code>&lt;div&gt;</code>元素，如图展示了捕获过程：   </p>
<p><img src="http://images.pingan8787.com/20190127%E4%BA%8B%E4%BB%B6%E6%8D%95%E8%8E%B7%E6%B5%81.png" alt="事件捕获流">   </p>
<p>注意：由于老版本的浏览器不支持，因此很少人使用事件捕获，不过如果特殊需求还是可以使用事件捕获，建议还是使用事件冒泡。    </p>
<h3 id="1-3-DOM事件流"><a href="#1-3-DOM事件流" class="headerlink" title="1.3 DOM事件流"></a>1.3 DOM事件流</h3><p>“DOM2级事件”规定的事件流包含三个阶段：<strong>事件捕获阶段</strong>，<strong>处于目标阶段</strong>和<strong>事件冒泡阶段</strong>。<br>事件捕获为截获事件提供机会，然后实际的目标接收到事件，最后事件冒泡，对事件作出响应。按照前面的HTML代码，整个流程是这样的：   </p>
<p><img src="http://images.pingan8787.com/20190127DOM%E4%BA%8B%E4%BB%B6%E6%B5%81.png" alt="DOM事件流">   </p>
<p>在DOM事件流中，实际目标（<code>&lt;div&gt;</code>元素）在捕获阶段不接收事件，即在捕获阶段，事件从<code>document对象</code>到<code>&lt;html&gt;</code>再到<code>&lt;body&gt;</code>后就停止，进入“处于目标”阶段，事件在<code>&lt;div&gt;</code>元素上发生，然后才进入冒泡阶段，将事件传回给文档。   </p>
<p>注意：目前主流浏览器都支持DOM事件流，只有IE8和之前版本不支持。    </p>
<h2 id="2-事件处理"><a href="#2-事件处理" class="headerlink" title="2.事件处理"></a>2.事件处理</h2><p>事件处理，即响应某个事件。我们把事件处理的函数，称为“事件处理程序”。<br>事件处理程序的名称一般都以<code>on</code>开头，如<code>click</code>事件的事件处理程序就是<code>onclick</code>，<code>load</code>事件的事件处理程序就是<code>onload</code>。<br>我们将事件处理程序，分为这么几类：    </p>
<ul>
<li>HTML事件处理程序   </li>
<li>DOM0级事件处理程序    </li>
<li>DOM2级事件处理程序   </li>
<li>IE事件处理程序   </li>
<li>跨浏览器事件处理程序   </li>
</ul>
<h3 id="2-1-HTML事件处理程序"><a href="#2-1-HTML事件处理程序" class="headerlink" title="2.1 HTML事件处理程序"></a>2.1 HTML事件处理程序</h3><p>某个元素支持的事件，都可以用一个与相应事件处理程序同名的HTML特性来指定，这个特性的值应该是能够执行的JavaScript代码。比如：    </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;hello leo&#x27;);&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以把需要执行的具体事件单独定义出来，可以放置与单独<code>.js</code>文件，也可以在文档内用<code>&lt;script&gt;</code>标签引入：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello leo&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;fun()&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们通过这样指定事件处理程序，可以有一个局部变量<code>event</code>来获取事件对象本身，在这个函数内部，<code>this</code>值等于这个变量<code>event</code>。  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;fun(event)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>另外，HTML中指定事件处理程序，会有2个缺点：   </p>
<ol>
<li>存在时间差<br>可能出现这样的情况：HTML元素触发事件，但是事件处理程序还未定义（函数的定义在HTML最底下定义），就会出现报错，这与HTML代码加载顺序有关。    </li>
<li>作用域链的异常<br>由于不同浏览器JavaScript引擎遵循的标识符解析规则存在差异，导致访问非限定对象成员时出错，表现为事件处理程序的作用域链在不同浏览器结果不同。</li>
<li>HTML和JavaScript代码紧密耦合<br>这常常就是很多开发人员放弃HTML事件处理程序的原因。   </li>
</ol>
<h3 id="2-2-DOM0级事件处理程序"><a href="#2-2-DOM0级事件处理程序" class="headerlink" title="2.2 DOM0级事件处理程序"></a>2.2 DOM0级事件处理程序</h3><p>通过赋值形式，将一个函数赋值给一个事件处理程序属性。每个元素（包含<code>window</code>和<code>document</code>）都有自己的事件处理属性，这些属性通常全部小写，如<code>onclick</code>，将这种属性的值设置成一个函数，就可以指定事件处理程序：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello leo!&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<strong>DOM0级</strong>方法指定事件处理程序，被认为是元素的方法。此时的事件处理程序是在元素的作用域执行，那么，this就引用当前元素，可以访问元素的任何属性和方法：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.id);  <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们也可以通过设置事件处理程序属性来删除<strong>DOM0级</strong>的事件处理程序。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">leo.onclick = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-DOM2级事件处理程序"><a href="#2-3-DOM2级事件处理程序" class="headerlink" title="2.3 DOM2级事件处理程序"></a>2.3 DOM2级事件处理程序</h3><p>有2个方法：   </p>
<ul>
<li>添加事件处理程序：<code>addEventListener()</code>      </li>
<li>删除事件处理程序：<code>removeEventListener()</code>   </li>
</ul>
<p>所有的DOM节点都包含这两个方法，并且它们都接收三个参数：   </p>
<ul>
<li>处理的事件名称   </li>
<li>事件处理程序的函数   </li>
<li>布尔值（true：事件捕获阶段调用，false：事件冒泡阶段调用） </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.id);        <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>与DOM0级方法一样，这里的事件处理程序也会是在元素的作用域中执行，因此this也是指向元素，可以访问元素的任何属性和方法。   </p>
<p>使用DOM2级方法，可以添加多个事件处理程序，并<strong>按照添加顺序触发</strong>：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.id);       <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line">leo.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello leo!&#x27;</span>);  <span class="comment">// &quot;hello leo!&quot;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：通过<code>addEventListener()</code>添加的事件只能通过<code>removeEventListener()</code>移除，并且两者传入的参数一致，这就意味着通过<code>addEventListener()</code>添加的匿名函数不能被移除，看下面代码：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.id);       <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有效果</span></span><br><span class="line">leo.removeEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// do some thing</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>没有效果是因为这两个方法传入的函数，是完全不同的，为了达到删除事件处理程序的效果，我们可以将处理函数单独定义出来：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.id);</span><br><span class="line">&#125;</span><br><span class="line">leo.addEventListener(<span class="string">&#x27;click&#x27;</span>,fun,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 有效果</span></span><br><span class="line">leo.removeEventListener(<span class="string">&#x27;click&#x27;</span>,fun,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-4-IE事件处理程序"><a href="#2-4-IE事件处理程序" class="headerlink" title="2.4 IE事件处理程序"></a>2.4 IE事件处理程序</h3><p>IE实现两种方法： <code>attachEvent()</code>和<code>detachEvent()</code>。这两个方法接收相同的两个参数：<strong>事件处理程序名称</strong>和<strong>事件处理程序函数</strong>。<br>由于IE8和更早版本只支持事件冒泡，所以通过<code>attachEvent()</code>添加的事件处理程序会被添加到冒泡阶段。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.attachEvent(<span class="string">&#x27;onclick&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello leo&#x27;</span>);       <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">// attachEvent也支持添加多个事件处理程序</span></span><br><span class="line"></span><br><span class="line">leo.attachEvent(<span class="string">&#x27;onclick&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello world&#x27;</span>);       <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：这里的第一个参数是<code>onclick</code>而不是DOM的<code>addEventListener()</code>的<code>click</code>。   </p>
<p><strong>IE的attachEvent()和DOM0级方法区别</strong>：<br>两者事件处理程序的作用域不同。   </p>
<ul>
<li>DOM0级方法，作用域在所属元素的作用域。   </li>
<li>attachEvent()，作用域在全局作用域，即<code>this</code>指向<code>window</code>。   </li>
</ul>
<p>和DOM0级方法一样，<code>detachEvent()</code>只能移除使用<code>attachEvent()</code>添加的方法，为了避免无法移除，也是需要将处理的函数单独定义出来：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>.id);</span><br><span class="line">&#125;</span><br><span class="line">leo.attachEvent(<span class="string">&#x27;onclick&#x27;</span>,fun,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 有效果</span></span><br><span class="line">leo.detachEvent(<span class="string">&#x27;onclick&#x27;</span>,fun,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-6-跨浏览器事件处理程序"><a href="#2-6-跨浏览器事件处理程序" class="headerlink" title="2.6 跨浏览器事件处理程序"></a>2.6 跨浏览器事件处理程序</h3><p>在做跨浏览器事件处理程序，我们可以有两种方式：   </p>
<ol>
<li>使用能够隔离浏览器差异的JavaScript库   </li>
<li>单独手写一个处理方法</li>
</ol>
<p>我们单独受写一个处理方法也不难，只需关注好事件冒泡阶段，我们可以创建一个方法，区分使用<strong>DOM0级方法</strong>、<strong>DOM2级方法</strong>或<strong>IE方法</strong>即可，默认采用<strong>DOM0级方法</strong>。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> my_event = &#123;</span><br><span class="line">    <span class="attr">addMyEvent</span>:<span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(element.addEventListener)&#123;</span><br><span class="line">            element.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(element.attachEvent)&#123;</span><br><span class="line">            element.attachEvent(<span class="string">&#x27;on&#x27;</span> + type, handler);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            element[<span class="string">&#x27;on&#x27;</span> + type] = handler;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    removeMyEvent:<span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(element.removeEventListener)&#123;</span><br><span class="line">            element.removeEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(element.detachEvent)&#123;</span><br><span class="line">            element.detachEvent(<span class="string">&#x27;on&#x27;</span> + type, handler);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            element[<span class="string">&#x27;on&#x27;</span> + type] = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-事件对象"><a href="#3-事件对象" class="headerlink" title="3.事件对象"></a>3.事件对象</h2><p>当触发一个DOM上的事件时，都会产生一个事件对象<code>event</code>，并作为参数传入事件处理程序，这个对象包含所有与事件相关的信息。包括导致事件的元素、事件类型等其他信息。   </p>
<h3 id="3-1-DOM中的事件对象"><a href="#3-1-DOM中的事件对象" class="headerlink" title="3.1 DOM中的事件对象"></a>3.1 DOM中的事件对象</h3><p>无论指定事件处理程序时使用什么方法（DOM0级方法或DOM2级方法），都会传入<code>event</code>对象：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(event.type);  <span class="comment">// &#x27;click&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">leo.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(event.type);  <span class="comment">// &#x27;click&#x27;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p><code>event</code>对象包含与创建它的特定事件相关的属性和方法，常常有如下成员：<br><img src="http://images.pingan8787.com/20190127%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E6%88%90%E5%91%981.png" alt="event成员1">   </p>
<p><img src="http://images.pingan8787.com/20190127%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E6%88%90%E5%91%982.png" alt="event成员2">   </p>
<p>我们可以使用<code>event</code>中的对象和方法：   </p>
<ul>
<li>阻止事件的默认行为    <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 只有当 event 中的 cancelable 属性为true的事件</span></span><br><span class="line">    event.preventDefault();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>立即停止事件在DOM的传播   </li>
</ul>
<p>通过调用<code>event.stopPropagation()</code>方法避免弹框出现两次。    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">    event.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello leo&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-IE中的事件对象"><a href="#3-2-IE中的事件对象" class="headerlink" title="3.2 IE中的事件对象"></a>3.2 IE中的事件对象</h3><p>访问IE中的事件对象<code>event</code>，方法有多种，取决于事件处理程序的方法：    </p>
<ul>
<li>DOM0级方法，使用<code>window.event</code>     </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> event = <span class="built_in">window</span>.event;</span><br><span class="line">    alert(event.type);   <span class="comment">// &#x27;click&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>IE的<code>attachEvent</code>方法，<code>event</code>作为参数传入（也可以使用<code>window.event</code>）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.attachEvent(<span class="string">&#x27;onclick&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(event.type);   <span class="comment">// &#x27;click&#x27;</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h3 id="3-3-跨浏览器的事件对象"><a href="#3-3-跨浏览器的事件对象" class="headerlink" title="3.3 跨浏览器的事件对象"></a>3.3 跨浏览器的事件对象</h3><p>虽然DOM和IE中<code>event</code>对象不同，但我们也可以和前面的 <strong>跨浏览器事件处理程序</strong> 处理一样，通过他们之间的区别，实现映射：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> my_event = &#123;</span><br><span class="line">    <span class="attr">myAddFun</span> : <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// do some thing</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 返回对event的引用</span></span><br><span class="line">    <span class="attr">getMyEvent</span> : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event?event:<span class="built_in">window</span>.event;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 返回事件的目标</span></span><br><span class="line">    <span class="attr">getMyTarget</span> : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 取消事件的默认行为</span></span><br><span class="line">    <span class="attr">preventDefault</span> : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(event.preventDefault)&#123;</span><br><span class="line">            event.preventDefault();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            event.returnValue = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">myRemoveFun</span> : <span class="function"><span class="keyword">function</span>(<span class="params">element, type, handler</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// do some thing</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 阻止事件流</span></span><br><span class="line">    <span class="attr">stopPropagetion</span> : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(event.stopPropagetion)&#123;</span><br><span class="line">            event.stopPropagetion();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> leo = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">    event = my_event(event);</span><br><span class="line">    my_event.stopPropagation(event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">leo.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-事件类型"><a href="#4-事件类型" class="headerlink" title="4.事件类型"></a>4.事件类型</h2><p>Web浏览器中的事件类型有很多，<strong>DOM3级事件</strong>规定有以下几类事件类型：    </p>
<ul>
<li><strong>UI事件</strong>：当用户与页面上元素交互时触发；   </li>
<li><strong>焦点事件</strong>：当元素失去或获取焦点时触发；    </li>
<li><strong>鼠标事件</strong>：当用户通过鼠标在页面操作时触发；    </li>
<li><strong>滚轮事件</strong>：当使用鼠标滚轮（或类似设备）时触发；    </li>
<li><strong>文本事件</strong>：当在文档中输入文本时触发；    </li>
<li><strong>键盘事件</strong>：当用户通过键盘操作时触发；    </li>
<li><strong>合成事件</strong>：当为IME输入字符时触发；    </li>
<li><strong>变动事件</strong>：当底层DOM结构变动时触发；    </li>
</ul>
<p>具体每个方法的详细介绍，可以查看**<a target="_blank" rel="noopener" href="http://www.w3school.com.cn/jsref/dom_obj_event.asp">W3school HTML DOM Event 对象</a>**<br>或者查看《JavaScript高级程序设计（第三版）》的第362页开始。<br>我后面会单独整理一篇，介绍这些事件的文章。     </p>
<h2 id="5-事件委托"><a href="#5-事件委托" class="headerlink" title="5.事件委托"></a>5.事件委托</h2><p>简单理解就是讲一个响应事件委托到另一个元素。<br><strong>事件委托</strong>利用事件冒泡，指定一个事件处理程序来管理某一类型的所有事件，比如我们通过一个函数来代替其他三个函数：    </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;btn3&quot;</span>&gt;</span>按钮3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn1&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> btn2 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn2&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> btn3 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn3&#x27;</span>);</span><br><span class="line"><span class="comment">// my_event 在前面定义了</span></span><br><span class="line">my_event.myAddFun(btn1, <span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;btn1点击&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">my_event.myAddFun(btn2, <span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;btn2点击&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">my_event.myAddFun(btn3, <span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;btn3点击&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>下面我们在<strong>DOM树层级更高的元素上添加一个事件处理函数</strong>，来做事件委托，我们这么重写这段代码：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line">my_event.myAddFun(btn, <span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    event = my_event.getMyEvent(event);</span><br><span class="line">    <span class="keyword">var</span> target = my_event.getMyTarget(event);</span><br><span class="line">    <span class="keyword">switch</span>(target.id)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;btn1&quot;</span>:</span><br><span class="line">            alert(<span class="string">&#x27;btn1点击&#x27;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;btn2&quot;</span>:</span><br><span class="line">            alert(<span class="string">&#x27;btn2点击&#x27;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;btn3&quot;</span>:</span><br><span class="line">            alert(<span class="string">&#x27;btn3点击&#x27;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>最适合采用事件委托技术的事件包括：<code>click</code>/<code>mousedown</code>/<code>mouseup</code>/<code>keyup</code>/<code>keydown</code>/<code>keypress</code>，虽然<code>mouseover</code>和<code>mouseout</code>事件也有冒泡，但因为不好处理它们并且经常需要重新计算元素位置。   </p>
<p>可以看出，<strong>事件委托</strong>有以下优点：   </p>
<ul>
<li>减少内存消耗   </li>
<li>动态绑定事件</li>
</ul>
<h2 id="6-事件模拟"><a href="#6-事件模拟" class="headerlink" title="6.事件模拟"></a>6.事件模拟</h2><p>JavaScript的事件模拟主要用来在任意时刻触发特定事件。   </p>
<h3 id="6-1-DOM中的事件模拟"><a href="#6-1-DOM中的事件模拟" class="headerlink" title="6.1 DOM中的事件模拟"></a>6.1 DOM中的事件模拟</h3><p>在<code>document</code>对象上使用<code>createEvent()</code>方法创建一个<code>event</code>对象。<br><code>createEvent()</code>接收一个参数，即要创建的事件类型的字符串。<br>DOM2级中，所有这些字符串都使用英文复数形式，DOM3级中都变成单数，也可以是下面中的字符串：   </p>
<ul>
<li>UIEvents : 一般化的UI事件（鼠标和键盘事件都继承自UI事件）（DOM3级中<code>UIEvent</code>）   </li>
<li>MouseEvents : 一般化的鼠标事件（DOM3级中<code>MouseEvent</code>）</li>
<li>MutationEvents : 一般化的DOM滚动事件（DOM3级中<code>MutationEvent</code>）   </li>
<li>HTMLEvents : 一般化的HTML事件（DOM3级中<code>HTMLEvent</code>）   </li>
</ul>
<p>创建<code>event</code>之后，我们需要使用<code>dispatchEvent()</code>方法去触发这个事件，需要传入一个参数，参数是需要触发事件的event对象。</p>
<p>所有支持事件的DOM节点都支持这个方法。事件触发之后，事件就能照样冒泡并引发响应事件处理程序的执行。      </p>
<h4 id="6-1-1-模拟鼠标事件"><a href="#6-1-1-模拟鼠标事件" class="headerlink" title="6.1.1 模拟鼠标事件"></a>6.1.1 模拟鼠标事件</h4><p>使用<code>createEvent()</code>方法传入<code>MouseEvents</code>创建一个鼠标事件，返回的对象有一个<code>initMouseEvent()</code>方法，用于指定与该鼠标事件相关的信息，有15个参数：    </p>
<ul>
<li>type ： 字符串，表示触发的事件类型，如<code>click</code>    </li>
<li>bubble : 布尔值，表示是否冒泡，为了精确模拟鼠标事件，通常设置为true    </li>
<li>cancelable ：布尔值，表示是否可以取消，为了精确模拟鼠标事件，通常设置为true    </li>
<li>view : 与事件关联的视图，基本都设置为<code>document.defaultView</code>   </li>
<li>detail : 整数，与事件有关的详细信息，基本设置为0    </li>
<li>screenX : 整数，事件相对屏幕的X坐标    </li>
<li>screenY : 整数，事件相对屏幕的Y坐标    </li>
<li>clientX : 整数，事件相对视口的X坐标    </li>
<li>clientY : 整数，事件相对视口的Y坐标    </li>
<li>ctrlKey : 布尔值，表示是否按下Ctrl键，默认false   </li>
<li>altKey : 布尔值，表示是否按下Alt键，默认false   </li>
<li>shiftKey : 布尔值，表示是否按下Shift键，默认false   </li>
<li>metaKey : 布尔值，表示是否按下Meta键，默认false   </li>
<li>button : 整数，表示按下哪个鼠标键，默认0       </li>
<li>relatedTarget : 对象，表示与事件相关的对象，只在<code>mouseover</code>和<code>mouseout</code>时使用   </li>
</ul>
<p>案例：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myEvent = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;MouseEvents&#x27;</span>);</span><br><span class="line">myEvent.initMouseEvent(</span><br><span class="line">    <span class="string">&#x27;click&#x27;</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="built_in">document</span>.defaultView, </span><br><span class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="literal">null</span></span><br><span class="line">)</span><br><span class="line">btn.dispatchEvent(myEvent);</span><br><span class="line"><span class="string">``</span><span class="string">`   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 6.1.2 模拟键盘事件</span></span><br><span class="line"><span class="string">DOM3级规定，使用`</span>createEvent()<span class="string">`方法传入`</span>KeyboardEvent<span class="string">`创建一个键盘事件，返回的对象有一个`</span>initKeyEvent()<span class="string">`方法，有8个参数：    </span></span><br><span class="line"><span class="string">* type ： 字符串，表示触发的事件类型，如`</span>keydown<span class="string">`    </span></span><br><span class="line"><span class="string">* bubble : 布尔值，表示是否冒泡，为了精确模拟键盘事件，通常设置为true    </span></span><br><span class="line"><span class="string">* cancelable ：布尔值，表示是否可以取消，为了精确模拟键盘事件，通常设置为true    </span></span><br><span class="line"><span class="string">* view : 与事件关联的视图，基本都设置为`</span><span class="built_in">document</span>.defaultView<span class="string">`   </span></span><br><span class="line"><span class="string">* key : 整数，表示按下的键的键码       </span></span><br><span class="line"><span class="string">* localtion : 整数，表示按下哪里的键，默认0表示主键盘，1表示左，2表示右，3表示数字键盘，4表示移动设备（即虚拟键盘），5表示手柄    </span></span><br><span class="line"><span class="string">* modifiers : 字符串，空格分隔的修改件列表，如&quot;shift&quot;   </span></span><br><span class="line"><span class="string">* repeat : 整数，在一行中按了多少次这个键       </span></span><br><span class="line"><span class="string">由于DOM3级不提倡使用`</span>keypress<span class="string">`事件，因此只能用这个方式来模拟`</span>keyup<span class="string">`/`</span>keydown<span class="string">`事件。   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">模拟按住Shift和A键的案例：   </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myEvent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以DOM3级方式创建</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">document</span>.implementation.hasFeature(<span class="string">&#x27;KeyboardEvents&#x27;</span>, <span class="string">&#x27;3.0&#x27;</span>))&#123;</span><br><span class="line">    myEvent = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;KeyboardEvent&#x27;</span>);</span><br><span class="line">    myEvent.initKeyboardEvent(</span><br><span class="line">        <span class="string">&#x27;keydown&#x27;</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="built_in">document</span>.defaultView,</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>, <span class="number">0</span>, <span class="string">&#x27;Shift&#x27;</span>, <span class="number">0</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">btn.dispatchEvent(myEvent);</span><br></pre></td></tr></table></figure>

<h4 id="6-1-3-模拟其他事件"><a href="#6-1-3-模拟其他事件" class="headerlink" title="6.1.3 模拟其他事件"></a>6.1.3 模拟其他事件</h4><p>如模拟<strong>变动事件</strong>和<strong>HTML事件</strong>。    </p>
<ul>
<li>模拟<strong>变动事件</strong></li>
</ul>
<p>通过<code>createEvent()</code>传入<code>MutationEvents</code>参数创建，返回一个<code>initMutationEvent()</code>方法，这个方法接收参数包括：<code>type</code>/<code>bubbles</code>/<code>cancelable</code>/<code>relatedNode</code>/<code>preValue</code>/<code>newValue</code>/<code>attrName</code>/<code>attrChange</code>，下面模拟一个案例：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myEvent = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;MutationEvents&#x27;</span>);</span><br><span class="line">myEvent.initMutationEvent(</span><br><span class="line">    <span class="string">&#x27;DOMNodeInserted&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>, someNode, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="number">0</span></span><br><span class="line">);</span><br><span class="line">btn.dispatchEvent(myEvent);</span><br></pre></td></tr></table></figure>

<ul>
<li>模拟<strong>HTML事件</strong></li>
</ul>
<p>通过<code>createEvent()</code>传入<code>HTMLEvents</code>参数创建，返回一个<code>initEvent()</code>方法，下面模拟一个案例：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myEvent = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;HTMLEvents&#x27;</span>);</span><br><span class="line">myEvent.initEvent(<span class="string">&#x27;focus&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">btn.dispatchEvent(myEvent);</span><br></pre></td></tr></table></figure>

<h4 id="6-1-4-自定义DOM事件"><a href="#6-1-4-自定义DOM事件" class="headerlink" title="6.1.4 自定义DOM事件"></a>6.1.4 自定义DOM事件</h4><p>通过<code>createEvent()</code>传入<code>CustomEvent</code>参数创建，返回一个<code>initCustomEvent()</code>方法，有4个参数：    </p>
<ul>
<li>type ： 字符串，表示触发的事件类型，如<code>keydown</code>    </li>
<li>bubble : 布尔值，表示是否冒泡，为了精确模拟键盘事件，通常设置为true    </li>
<li>cancelable ：布尔值，表示是否可以取消，为了精确模拟键盘事件，通常设置为true    </li>
<li>detail : 对象，任意值，保存在<code>event</code>对象的<code>detail</code>属性中   </li>
</ul>
<p>案例：      </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myEvent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// my_event在前面定义 2.6 跨浏览器事件处理程序</span></span><br><span class="line">my_event.addMyEvent(btn, <span class="string">&#x27;myevent&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;btn detail &#x27;</span>, event.detail);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">my_event.addMyEvent(<span class="built_in">document</span>, <span class="string">&#x27;myevent&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;document detail &#x27;</span>, event.detail);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以DOM3级方式穿件</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">document</span>.implementation.hasFeature(<span class="string">&#x27;CustomEvents&#x27;</span>, <span class="string">&#x27;3.0&#x27;</span>))&#123;</span><br><span class="line">    myEvent = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;CustomEvent&#x27;</span>);</span><br><span class="line">    myEvent.initCustomEvent(</span><br><span class="line">        <span class="string">&#x27;myevent&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="string">&#x27;hello leo&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">    btn.dispatchEvent(myEvent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-IE中的事件模拟"><a href="#6-2-IE中的事件模拟" class="headerlink" title="6.2 IE中的事件模拟"></a>6.2 IE中的事件模拟</h3><p>IE8及之前的版本模拟事件和DOM中模拟思路相似：想创建<code>event对象</code>再指定信息，最后触发。<br>区别在于，IE中使用<code>document.createEventObject()</code>方法创建<code>event对象</code>，并且不接收参数，返回一个通用<code>event对象</code>，我们要做的就是给这个<code>event对象</code>添加信息，最后在目标上调用<code>fireEvent()</code>方法，并接受两个参数（事件处理程序的名称和<code>event对象</code>）。<br>在调用<code>fireEvent()</code>方法会自动添加<code>srcElement</code>和<code>type</code>属性，我们需要手动添加其他属性，下面模拟一个click事件：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> myEvent = <span class="built_in">document</span>.createEventObject();</span><br><span class="line"></span><br><span class="line">myEvent.screenX = <span class="number">100</span>;</span><br><span class="line">myEvent.screenY = <span class="number">0</span>;</span><br><span class="line">myEvent.clientX = <span class="number">100</span>;</span><br><span class="line">myEvent.clientY = <span class="number">0</span>;</span><br><span class="line">myEvent.ctrlKey = <span class="literal">false</span>;</span><br><span class="line">myEvent.altKey = <span class="literal">false</span>;</span><br><span class="line">myEvent.shiftKey = <span class="literal">false</span>;</span><br><span class="line">myEvent.button = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">btn.fireEvent(<span class="string">&#x27;onclick&#x27;</span>, event);</span><br></pre></td></tr></table></figure>

<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ol>
<li>《JavaScript高级程序设计》第13章 事件    </li>
</ol>
<p><strong>本部分内容到这结束</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#110;&#103;&#x61;&#x6e;&#56;&#x37;&#x38;&#55;&#64;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#109;">&#x70;&#x69;&#110;&#103;&#x61;&#x6e;&#56;&#x37;&#x38;&#55;&#64;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/27/136-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9120-%E4%BA%8B%E4%BB%B6/" data-id="ckts3ejxz00ls4d9ke7w5b5sf" data-title="136-【JavaScript】【重温基础】20.事件" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-135-【JavaScript】【重温基础】19-闭包" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/23/135-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9119-%E9%97%AD%E5%8C%85/" class="article-date">
  <time class="dt-published" datetime="2019-01-23T14:41:21.000Z" itemprop="datePublished">2019-01-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/23/135-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9119-%E9%97%AD%E5%8C%85/">135-【JavaScript】【重温基础】19.闭包</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#110;&#103;&#x61;&#x6e;&#x38;&#x37;&#x38;&#55;&#x40;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;">&#x70;&#x69;&#110;&#103;&#x61;&#x6e;&#x38;&#x37;&#x38;&#55;&#x40;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>本文是 <strong>重温基础</strong> 系列文章的第十九篇。<br>今日感受：将混乱的事情找出之间的联系，也是种能力。   </p>
<p><strong>本章节复习的是JS中的关于闭包，这个小哥哥呀，看看。</strong>          </p>
<p><strong>前置知识：</strong><br>声明函数两种方法：   </p>
<ul>
<li>函数声明，存在<strong>函数声明提升</strong>，因此可以在函数声明之前调用（不会报错）。   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fun();  <span class="comment">// ok</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br></pre></td></tr></table></figure></li>
<li>函数表达式，不存在<strong>函数声明提升</strong>，若定义前调用，会报错（函数还不存在）。   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fun();  <span class="comment">// error</span></span><br><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h2><h3 id="2-1-词法作用域"><a href="#2-1-词法作用域" class="headerlink" title="2.1 词法作用域"></a>2.1 词法作用域</h3><p>这里先要了解一个概念，<strong>词法作用域</strong>：它是静态的作用域，是书写变量和块作用域的作用域**。     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot;leo&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(a)&#125;;</span><br><span class="line">    g();</span><br><span class="line">&#125;</span><br><span class="line">f(); <span class="comment">// &quot;leo&quot;</span></span><br></pre></td></tr></table></figure>
<p>由于函数<code>g</code>的作用域中没有<code>a</code>这个变量，但是它可以访问父作用域，并使用父作用域下的变量<code>a</code>，最后输出<code>&quot;leo&quot;</code>。   </p>
<p>词法作用域中使用的域，是变量在代码中声明的位置所决定的。嵌套的函数可以访问在其外部声明的变量。   </p>
<h3 id="2-2-闭包"><a href="#2-2-闭包" class="headerlink" title="2.2 闭包"></a>2.2 闭包</h3><p>接下来介绍下<strong>闭包</strong>概念，<strong>闭包</strong>是指<strong>有权访问另一个函数作用域中的变量的函数</strong>。     </p>
<p><strong>闭包</strong>是由函数以及创建该函数的词法环境组合而成。这个环境包含了这个闭包创建时所能访问的所有局部变量。   </p>
<p>创建闭包的常见方式：<strong>在一个函数内创建另一个函数</strong>。如：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot;leo&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> g = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> g;<span class="comment">// 这里g就是一个闭包函数，可以访问到g作用域的变量a</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fun = f();</span><br><span class="line">fun(); <span class="comment">// &quot;leo&quot;</span></span><br></pre></td></tr></table></figure>
<p>通过概念可以看出，闭包有以下三个特征：   </p>
<ul>
<li>函数嵌套函数  </li>
<li>函数内部可以引用函数外部的参数和变量   </li>
<li>参数和变量不会被垃圾回收机制回收   </li>
</ul>
<p>注：关于内存回收机制，可以查看阮一峰老师的<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2017/04/memory-leak.html">《JavaScript 内存泄漏教程》</a>。   </p>
<p>另外，使用闭包有以下好处：   </p>
<ul>
<li>将一个变量长期保存在内存中   </li>
<li>避免全局变量的污染   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fun = f();</span><br><span class="line">fun(); <span class="comment">// 2</span></span><br><span class="line">fun(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
因为垃圾回收机制没有回收，所以每次调用<code>fun()</code>都会返回新的值。   </li>
<li>私有化成员，使得外部不能访问   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f1</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f2</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">g1</span>:f1, <span class="attr">g2</span>:f2&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> fun = f();</span><br><span class="line">fun.g1(); <span class="comment">// 2</span></span><br><span class="line">fun.g2(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-易错点"><a href="#2-易错点" class="headerlink" title="2.易错点"></a>2.易错点</h2><h3 id="2-1-引用的变量发生变化"><a href="#2-1-引用的变量发生变化" class="headerlink" title="2.1 引用的变量发生变化"></a>2.1 引用的变量发生变化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">        a[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fun = f();</span><br><span class="line">fun[<span class="number">0</span>]();  <span class="comment">// 10</span></span><br><span class="line">fun[<span class="number">1</span>]();  <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">fun[<span class="number">10</span>]();  <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<p>原本照我们的想法，<code>fun</code>方法中每个元素上的方法执行的结果应该是<code>1,2,3,...,10</code>，而实际上，每个返回都是<code>10</code>，因为每个闭包函数引用的变量<code>i</code>是<code>f</code>执行环境下的变量<code>i</code>，循环结束后，<code>i</code>已经变成<code>10</code>，所以都会返回<code>10</code>。<br>解决办法可以这样：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">        a[i] = <span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(index);</span><br><span class="line">                <span class="comment">// 此时的index，是父函数作用域的index，</span></span><br><span class="line">                <span class="comment">// 数组的10个函数对象，每个对象的执行环境下的index都不同</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;(i);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> fun = f();</span><br><span class="line">fun[<span class="number">0</span>]();  <span class="comment">// 0</span></span><br><span class="line">fun[<span class="number">1</span>]();  <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">fun[<span class="number">10</span>]();  <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-this指向问题"><a href="#2-2-this指向问题" class="headerlink" title="2.2 this指向问题"></a>2.2 this指向问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&quot;leo&quot;</span>, </span><br><span class="line">    <span class="attr">f</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.f()();  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>由于里面的闭包函数是在<code>window</code>作用域下执行，因此<code>this</code>指向<code>window</code>。   </p>
<h3 id="2-3-内存泄漏"><a href="#2-3-内存泄漏" class="headerlink" title="2.3 内存泄漏"></a>2.3 内存泄漏</h3><p>当我们在闭包内引用父作用域的变量，会使得变量无法被回收。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">&quot;leo&quot;</span>);</span><br><span class="line">    a.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(a.id)&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样做的话，变量<code>a</code>会一直存在无法释放，类似的变量越来越多的话，很容易引起内存泄漏。我们可以这么解决：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">&quot;leo&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> id = a.id;</span><br><span class="line">    a.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    a = <span class="literal">null</span>;  <span class="comment">//主动释放变量a</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过把变量赋值成<code>null</code>来主动释放掉。   </p>
<h2 id="3-案例"><a href="#3-案例" class="headerlink" title="3.案例"></a>3.案例</h2><h3 id="3-1-经典案例——定时器和闭包"><a href="#3-1-经典案例——定时器和闭包" class="headerlink" title="3.1 经典案例——定时器和闭包"></a>3.1 经典案例——定时器和闭包</h3><p>代码如下：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i&lt;<span class="number">10</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;,<span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不出所料，返回的不是我们想要的<code>0,1,2,3,...,9</code>，而是10个<code>10</code>。<br>这是因为js是单进程，所以在执行<code>for循环</code>的时候定时器<code>setTimeout</code>被安排到任务队列中排队等候执行，而在等待过程中，<code>for循环</code>已经在执行，等到<code>setTimeout</code>要执行的时候，<code>for循环</code>已经执行完成，<code>i</code>的值就是<code>10</code>，所以就打印了10个<code>10</code>。<br>解决方法 ：   </p>
<ul>
<li><p>1.使用ES6新增的<code>let</code>。<br>把<code>for循环</code>中的<code>var</code>替换成<code>let</code>。   </p>
</li>
<li><p>2.使用闭包   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;<span class="number">10</span> ; i++)&#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;, i*<span class="number">100</span>);</span><br><span class="line">    &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-2-使用闭包解决递归调用问题"><a href="#3-2-使用闭包解决递归调用问题" class="headerlink" title="3.2 使用闭包解决递归调用问题"></a>3.2 使用闭包解决递归调用问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num &gt;<span class="number">1</span> ? num*f(num-<span class="number">1</span>) : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fun = f;</span><br><span class="line">f = <span class="literal">null</span>;</span><br><span class="line">fun(<span class="number">4</span>)   <span class="comment">// 报错 ，因为最好是return num* arguments.callee（num-1），arguments.callee指向当前执行函数，但是在严格模式下不能使用该属性也会报错，所以借助闭包来实现</span></span><br></pre></td></tr></table></figure>
<p>这里可以使用<code>return num &gt;1 ? num* arguments.callee(num-1)  : 1;</code>，因为<code>arguments.callee</code>指向<strong>当前执行函数</strong>，但是在严格模式下不能使用，也会报错，所以这里需要使用闭包来实现。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span> = (<span class="params"><span class="keyword">function</span> f(num)&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">return</span> num &gt;<span class="number">1</span> ? num*f(num-<span class="number">1</span>) : <span class="number">1</span>;</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>)</span></span><br></pre></td></tr></table></figure>
<p>这样做，实际上起作用的是闭包函数<code>f</code>，而不是外面的<code>fun</code>。   </p>
<h3 id="3-3-使用闭包模仿块级作用域"><a href="#3-3-使用闭包模仿块级作用域" class="headerlink" title="3.3 使用闭包模仿块级作用域"></a>3.3 使用闭包模仿块级作用域</h3><p>ES6之前，使用<code>var</code>声明变量会有变量提升问题：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i&lt;<span class="number">10</span>; i++)&#123;<span class="built_in">console</span>.log(i)&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(i);  <span class="comment">// 变量提升 返回10</span></span><br></pre></td></tr></table></figure>
<p>为了避免这个问题，我们这样使用闭包（匿名自执行函数）：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i&lt;<span class="number">10</span>; i++)&#123;<span class="built_in">console</span>.log(i)&#125;;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="built_in">console</span>.log(i);  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在函数执行完后会立刻释放资源，关键是不污染全局对象。这里<code>i</code>随着闭包函数的结束，执行环境销毁，变量回收。<br>但是现在，我们用的更多的是ES6规范的<code>let</code>和<code>const</code>来声明。    </p>
<h2 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h2><ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures#%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F">MDN 闭包</a>    </li>
<li>《JavaScript高级程序设计》  </li>
</ol>
<p><strong>本部分内容到这结束</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#x69;&#x6e;&#103;&#x61;&#110;&#56;&#x37;&#56;&#55;&#x40;&#113;&#113;&#46;&#x63;&#x6f;&#109;">&#112;&#x69;&#x6e;&#103;&#x61;&#110;&#56;&#x37;&#56;&#55;&#x40;&#113;&#113;&#46;&#x63;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/23/135-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9119-%E9%97%AD%E5%8C%85/" data-id="ckts3ejsu00274d9k54kt8p0x" data-title="135-【JavaScript】【重温基础】19.闭包" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-134-【JavaScript】【重温基础】18-相等性判断" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/22/134-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9118-%E7%9B%B8%E7%AD%89%E6%80%A7%E5%88%A4%E6%96%AD/" class="article-date">
  <time class="dt-published" datetime="2019-01-22T14:49:29.000Z" itemprop="datePublished">2019-01-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/22/134-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9118-%E7%9B%B8%E7%AD%89%E6%80%A7%E5%88%A4%E6%96%AD/">134-【JavaScript】【重温基础】18.相等性判断</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#x6e;&#x67;&#x61;&#110;&#x38;&#55;&#x38;&#x37;&#64;&#113;&#x71;&#46;&#x63;&#x6f;&#x6d;">&#x70;&#x69;&#x6e;&#x67;&#x61;&#110;&#x38;&#55;&#x38;&#x37;&#64;&#113;&#x71;&#46;&#x63;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>本文是 <strong>重温基础</strong> 系列文章的第十八篇。<br>今日感受：优化自己的代码，也是很愉快的事情。   </p>
<p><strong>本章节复习的是JS中的关于严格相等和非严格相等的一些知识。</strong>       </p>
<p><strong>前置知识：</strong><br>判断两个变量的值是否相等，是编程中非常重要的一个操作。这里我们心里面先有两组对照，思考下：   </p>
<ul>
<li>相等 和 不相等</li>
<li>全等 和 不全等  </li>
</ul>
<h1 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h1><p>在我们比较字符串、数值和布尔值的相等性，是比较简单的，但是到了比较对象的时候，问题就比较复杂。<br>早期的时候ECMAScript规范中，在判断相等和不相等时，会先将对象转换成相似的类型，再执行比较。后面有人质疑其合理性，最后ECMAScript提出解决方法：提供两组操作符：   </p>
<ul>
<li><strong>相等</strong>和<strong>不相等</strong>（宽松相等）：先转换再比较，使用<code>==</code>    </li>
<li><strong>全等</strong>和<strong>不全等</strong>（严格相等）：仅比较不转换，使用<code>===</code>     </li>
</ul>
<p>另外还有一类ES6新增的方法：   </p>
<ul>
<li><code>Object.is</code> （ES6新增）   </li>
</ul>
<h1 id="2-相等和不相等"><a href="#2-相等和不相等" class="headerlink" title="2.相等和不相等"></a>2.相等和不相等</h1><p>JavaScript中用<strong>相等操作符</strong>使用<code>==</code>进行比较，若两个操作数相等，则返回<code>true</code>，否则返回<code>false</code>。反之，<strong>不相等操作符</strong>使用<code>!=</code>。<br>这两个操作符都会<strong>先转换操作数类型</strong>，再进行<strong>比较</strong>。   </p>
<p>通常在转换不同数据类型时，相等和不相等会遵循以下规则：   </p>
<ul>
<li>若有一个操作数是<strong>布尔值</strong>，则比较前会将<strong>布尔值</strong>转换为<strong>数值</strong>：<code>false</code>转为<code>0</code>，<code>true</code>转为<code>1</code>。   </li>
<li>若一个操作数是<strong>字符串</strong>，另一个是<strong>数值</strong>，则比较前会将<strong>字符串</strong>转换为<strong>数值</strong>。   </li>
<li>若一个操作数是<strong>对象</strong>，另一个不是，则比较前会调用<code>valueOf()</code>方法，用返回的基本类型值来判断。   </li>
</ul>
<p>两个操作符进行比较时会遵循下面规则：   </p>
<ul>
<li><code>null</code>和<code>undefined</code>相等。   </li>
<li>比较前不能讲<code>null</code>和<code>undefined</code>转换成其他值。   </li>
<li>若一个操作数是<code>NaN</code>，则不相同（<code>==</code>时返回<code>false</code>，<code>!=</code>时返回<code>true</code>）。   </li>
<li>若两个操作数是<code>NaN</code>，则不相同（<code>==</code>时返回<code>false</code>，<code>!=</code>时返回<code>true</code>）。   </li>
<li>若两个操作数都是<code>对象</code>，则比较它们是不是同一个对象。   </li>
<li>若两个操作数都指向同一个<code>对象</code>，则相等操作符返回<code>true</code>，否则返回<code>false</code>。   </li>
</ul>
<p>下面列出一些特殊情况的比较 ：    </p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>null == undefined</td>
<td>true</td>
</tr>
<tr>
<td>“NaN” == NaN</td>
<td>false</td>
</tr>
<tr>
<td>9 == NaN</td>
<td>false</td>
</tr>
<tr>
<td>NaN == NaN</td>
<td>false</td>
</tr>
<tr>
<td>NaN != NaN</td>
<td>true</td>
</tr>
<tr>
<td>false == 0</td>
<td>true</td>
</tr>
<tr>
<td>true == 1</td>
<td>true</td>
</tr>
<tr>
<td>true == 2</td>
<td>false</td>
</tr>
<tr>
<td>undefined == 0</td>
<td>false</td>
</tr>
<tr>
<td>null == 0</td>
<td>false</td>
</tr>
<tr>
<td>“9” == 9</td>
<td>true</td>
</tr>
</tbody></table>
<h1 id="3-全等和不全等"><a href="#3-全等和不全等" class="headerlink" title="3.全等和不全等"></a>3.全等和不全等</h1><p>除了比较前不转换操作数歪，全等和不全等与相等和不相等并无区别，但使用的是<code>===</code>，只有当不转换的情况下两个操作数相同，才会返回<code>true</code>。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;99&quot;</span> == <span class="number">99</span> ;  <span class="comment">// true   因为先转换类型 number 和 number</span></span><br><span class="line"><span class="string">&quot;99&quot;</span> === <span class="number">99</span> ; <span class="comment">// false  因为不转换类型 string 和 number</span></span><br></pre></td></tr></table></figure>
<p>不全等操作符就相对应的使用<code>!==</code>：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;99&quot;</span> != <span class="number">99</span> ;  <span class="comment">// false   因为先转换类型 number 和 number</span></span><br><span class="line"><span class="string">&quot;99&quot;</span> !== <span class="number">99</span> ; <span class="comment">// true    因为不转换类型 string 和 number</span></span><br></pre></td></tr></table></figure>
<p>特殊的：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>;   <span class="comment">// true  类似的值</span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span>;  <span class="comment">// false 类型不同</span></span><br></pre></td></tr></table></figure>

<p><strong>由于相等和不相等操作符存在类型转换问题，因此为了保持代码中数据类型的完整性，我们推荐使用去哪等和不全等操作符。</strong>   </p>
<h1 id="4-同值相等（Object-is）"><a href="#4-同值相等（Object-is）" class="headerlink" title="4.同值相等（Object.is）"></a>4.同值相等（Object.is）</h1><p><code>Object.is(value1, value2);</code>，传入两个需要对比的值。<br><code>Object.is()</code> 判断两个值是否相同，并且<strong>不会对参数进行类型转换</strong>。如果下列任何一项成立，则两个值相同：    </p>
<ul>
<li>两个值都是 <code>undefined</code>    </li>
<li>两个值都是 <code>null</code>    </li>
<li>两个值都是 <code>true</code> 或者都是 <code>false</code>    </li>
<li>两个值是由相同个数的字符按照相同的顺序组成的<strong>字符串</strong>    </li>
<li>两个值指向<strong>同一个对象</strong>    </li>
<li>两个值<strong>都是数字</strong>并且    <ul>
<li>都是正零<code> +0</code>    </li>
<li>都是负零 <code>-0</code>    </li>
<li>都是 <code>NaN</code>    </li>
<li>都是<code>除零</code>和 <code>NaN</code> 外的其它同一个<strong>数字</strong>    </li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="string">&#x27;leo&#x27;</span>, <span class="string">&#x27;leo&#x27;</span>);     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="built_in">window</span>, <span class="built_in">window</span>);   <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="string">&#x27;leo&#x27;</span>, <span class="string">&#x27;pingan&#x27;</span>);     <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is([], []);           <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> leo = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="built_in">Object</span>.is(leo, leo);       <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">null</span>, <span class="literal">null</span>);       <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 特例</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, -<span class="number">0</span>);            <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(-<span class="number">0</span>, -<span class="number">0</span>);           <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="number">0</span>/<span class="number">0</span>);         <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>另外还有特殊的：  </p>
<ul>
<li>零值相等：<br>与同值相等类似，不过会认为 <code>+0</code> 与 <code>-0</code> 相等。   </li>
</ul>
<h1 id="5-对比图"><a href="#5-对比图" class="headerlink" title="5.对比图"></a>5.对比图</h1><p>相等操作符对于不同类型的值，进行的比较如下图所示（来源 MDN）：     </p>
<p><img src="http://images.pingan8787.com/MDN%20%E7%9B%B8%E7%AD%891.png" alt="MDN 相等1">  </p>
<p><strong>注意：</strong>    </p>
<ul>
<li><code>ToNumber(A)</code> 表示比较前将参数 <code>A</code> 转换为数字    </li>
<li><code>ToPrimitive(A)</code>通过尝试调用 <code>A</code> 的<code>A.toString()</code> 和 <code>A.valueOf()</code> 方法，将参数 <code>A</code> 转换为原始值（Primitive）。   </li>
</ul>
<p><img src="http://images.pingan8787.com/MDN%20%E7%9B%B8%E7%AD%892.png" alt="MDN 相等2">    </p>
<p><img src="http://images.pingan8787.com/MDN%20%E7%9B%B8%E7%AD%893.png" alt="MDN 相等3"></p>
<p><img src="http://images.pingan8787.com/MDN%20%E7%9B%B8%E7%AD%894.png" alt="MDN 相等4">    </p>
<h1 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h1><ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness">MDN JavaScript 中的相等性判断</a>    </li>
<li>JavaScript高级程序设计  </li>
</ol>
<p><strong>本部分内容到这结束</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#x6e;&#103;&#x61;&#x6e;&#56;&#x37;&#x38;&#x37;&#64;&#x71;&#113;&#x2e;&#99;&#111;&#x6d;">&#x70;&#x69;&#x6e;&#103;&#x61;&#x6e;&#56;&#x37;&#x38;&#x37;&#64;&#x71;&#113;&#x2e;&#99;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/22/134-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9118-%E7%9B%B8%E7%AD%89%E6%80%A7%E5%88%A4%E6%96%AD/" data-id="ckts3ejst00254d9khx9511re" data-title="134-【JavaScript】【重温基础】18.相等性判断" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-133-【JavaScript】【重温基础】17-WebApi介绍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/20/133-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9117-WebApi%E4%BB%8B%E7%BB%8D/" class="article-date">
  <time class="dt-published" datetime="2019-01-20T07:19:22.000Z" itemprop="datePublished">2019-01-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/20/133-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9117-WebApi%E4%BB%8B%E7%BB%8D/">133-【JavaScript】【重温基础】17.WebApi介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#x69;&#x6e;&#x67;&#97;&#110;&#x38;&#55;&#56;&#x37;&#64;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#x6d;">&#112;&#x69;&#x6e;&#x67;&#97;&#110;&#x38;&#55;&#56;&#x37;&#64;&#x71;&#x71;&#x2e;&#x63;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>本文是 <strong>重温基础</strong> 系列文章的第十七篇。<br>今日感受：挑战。   </p>
<p><strong>本章节复习的是JS中的关于WebAPI相关知识，介绍的API比较多。</strong>    </p>
<p><strong>前置知识：</strong><br>需要了解 <a target="_blank" rel="noopener" href="http://pingan8787.com/2019/01/14/131-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9115-JS%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/">JS 对象</a> 的相关知识。   </p>
<h1 id="1-WebAPI介绍"><a href="#1-WebAPI介绍" class="headerlink" title="1.WebAPI介绍"></a>1.WebAPI介绍</h1><blockquote>
<p>API：应用程序接口，是基于编程语言构建的结构，使开发人员更容易地创建复杂的功能。它们抽象了复杂的代码，并提供一些简单的接口规则直接使用。   </p>
</blockquote>
<p>客户端JavaScript提供很多可用的API，他们本身不是JavaScript语言的一部分，却建立在JavaScript语言核心的顶部，为使用JavaScript代码提供额外的超强能力。他们通常分为两类：    </p>
<ul>
<li><p><strong>浏览器API</strong>：<br>内置于Web浏览器，可以从浏览器和电脑周围环境获取数据，并用于复杂的操作。例如<code>Geolocation API</code>提供了一些简单的JavaScript结构来获取位置数据，这种API通常抽象很多复杂逻辑，我们只要调用API即可。   </p>
</li>
<li><p><strong>第三方API</strong>：<br>缺省情况下不会内置于浏览器，而必须在Wen中某个地方获取代码和信息，例如<code>Twitter API</code>可以推送最新推文给我们，它提供一系列第三方API让我们获取Twitter的服务和信息。   </p>
</li>
</ul>
<h2 id="1-1-API如何工作"><a href="#1-1-API如何工作" class="headerlink" title="1.1 API如何工作"></a>1.1 API如何工作</h2><p><strong>那么，这些API是如何工作的？</strong><br>不同的JavaScript的API工作内容不同，但具有以下几个相同点：  </p>
<ol>
<li><strong>都是基于对象</strong><br>API通过使用一个或多个JavaScript对象与我们的代码交互，这些对象作为API使用的数据（包含在对象属性中）的容器，和API提供的功能（包含在对象的方法中）。<br>如<code>Geolocation API</code>则是由以下几个对象组成：   </li>
</ol>
<ul>
<li><code>Geolocation</code>, 包含三种控制地理数据检索的方法。     </li>
<li><code>Position</code>, 表示在给定的时间的相关设备的位置。它包含一个当前位置的<code>Coordinates</code> 对象。还包含了一个时间戳,这个时间戳表示获取到位置的时间。     </li>
<li><code>Coordinates</code>,包含有关设备位置的大量有用数据，包括经纬度，高度，运动速度和运动方向等。    </li>
</ul>
<p>通常这么使用：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">navigator.geolocation.getCurrentPosition(<span class="function"><span class="keyword">function</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ... do something</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p><strong>都有可识别的入口点</strong><br>即API的入口位置，如<code>Geolocation API</code>的入口在<code>Navigator.geolocation</code> 属性, 它返回浏览器的 <code>Geolocation</code> 对象，所有有用的地理定位方法都可用。<br>在**文档对象模型(DOM)**的API入口位置更简单，常常都挂载在<code>Document</code>对象上，或者<code>HTML</code>元素上：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);<span class="comment">// 创建一个新的div元素</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>);<span class="comment">// 获取一个已经存在的div元素</span></span><br><span class="line">a.textContent = <span class="string">&quot;hi leo!&quot;</span>;  <span class="comment">// 给a元素设置文本</span></span><br><span class="line">b.appendChild(a);           <span class="comment">// 将a元素添加到b元素下</span></span><br><span class="line"><span class="comment">// &lt;div&gt;hi leo!&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>详细的后面介绍。</p>
</li>
<li><p><strong>都使用事件来处理状态的变化</strong><br>有些特定的API会包含一些事件，当事件触发，我们便可以运行函数的处理属性，做一些不同的操作。例如<code>XMLHttpRequest</code>对象的实例，有很多的事件可以调用。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简单写</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="string">&quot;https://www.baidu.com&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">req.open(<span class="string">&#x27;GET&#x27;</span>, url);</span><br><span class="line">req.responseType = <span class="string">&quot;json&quot;</span>;</span><br><span class="line">req.send();</span><br><span class="line">req.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ... do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>都会在适当位置提供额外的安全机制</strong><br>主要还是处于安全考虑，提供额外的安全机制，比如常见同源策略，一些特定页面只能在https协议的网页工作等。   </p>
</li>
</ol>
<p>接下来看看这些API都能实现什么作用。   </p>
<h1 id="2-文档API"><a href="#2-文档API" class="headerlink" title="2.文档API"></a>2.文档API</h1><p>我们在开发web页面和应用时，就会经常操作页面文档的结构，这里就会大量用到<code>document</code>对象，控制HTML和样式信息的<strong>文档对象模型（DOM）</strong>。<br>下面贴一张web页面视图中的浏览器的主要部分（来源MDN）：<br><img src="https://mdn.mozillademos.org/files/14557/document-window-navigator.png" alt="浏览器">    </p>
<p><strong>介绍</strong>：  </p>
<ul>
<li><code>window</code>：是载入浏览器的标签，JavaScript中用<code>Window</code>对象表示，可以实现很多操作：获取窗口大小，操作载入窗口的文档，存储文档数据等。   </li>
<li><code>navigator</code>：浏览器存在web上的状态和表示（即用户代理），JavaScript中用<code>Navigator</code>对象表示，用于获取对象的一些信息，如：摄像头的地理信息，用户偏爱的语言等。   </li>
<li><code>document</code>：是实际载入窗口的页面，JavaScript中用<code>Document</code>对象表示，可以实现很多文档操作：获取DOM元素，修改文本内容，设置新样式等。   </li>
</ul>
<h2 id="2-1-文档对象模型-DOM"><a href="#2-1-文档对象模型-DOM" class="headerlink" title="2.1 文档对象模型(DOM)"></a>2.1 文档对象模型(DOM)</h2><p>在浏览器标签中当前载入的文档用文档对象模型(Document Object Model，简称DOM)表示。<br>这是一个由浏览器生成的“树结构”，使得编程语言可以很容易访问HTML结构，操作等。   </p>
<p>下面是基本的DOM操作：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);<span class="comment">// 1. 创建一个新的a元素</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;a&#x27;</span>);<span class="comment">// 2. 获取一个已经存在的a元素</span></span><br><span class="line">a.textContent = <span class="string">&quot;进入pingan8787博客&quot;</span>;  <span class="comment">// 3. 给a元素设置文本</span></span><br><span class="line">a.href = <span class="string">&quot;http://www.pingan8787.com&quot;</span>; <span class="comment">// 4. 给a元素添加跳转地址</span></span><br><span class="line">a.style.color = <span class="string">&quot;red&quot;</span>;                <span class="comment">// 5. 给a元素添加样式</span></span><br><span class="line">a.style.backgroundColor = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">a.setAttribute(<span class="string">&quot;my_class&quot;</span>);    <span class="comment">// 6. 给a元素添加class类名</span></span><br><span class="line">b.appendChild(a);              <span class="comment">// 7. 将a元素添加到b元素下</span></span><br></pre></td></tr></table></figure>

<p>这么一个简单的例子，实际可以看出DOM提供的方法很多，下面分类介绍下这些方法：   </p>
<ol>
<li><strong>DOM HTML操作</strong>    </li>
</ol>
<ul>
<li><p><strong>改变HTML输出流</strong>：<br>通过<code>document.write()</code>直接修改HTML输出流写内容。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">&quot;hello leo&quot;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>*注意：**千万不要在文档加载之后使用，否则覆盖文档。   </p>
</li>
<li><p><strong>改变HTML内容</strong>：<br>通过<code>innerHTML</code>属性来改变HTML元素的内容：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(id).innerHTML = <span class="keyword">new</span> HTML;</span><br><span class="line"><span class="comment">// 通过ID获取  （getElementById）</span></span><br><span class="line"><span class="comment">// 通过name属性（getElementsByName）</span></span><br><span class="line"><span class="comment">// 通过标签名  （getElementsByTagName）</span></span><br><span class="line"><span class="comment">// 通过类名    （getElementsByClassName）</span></span><br><span class="line"><span class="comment">// 获取html的方法 （document.documentElement）</span></span><br><span class="line"><span class="comment">// 获取body的方法 （document.body）</span></span><br><span class="line"><span class="comment">// 通过选择器获取一个元素（querySelector）</span></span><br><span class="line"><span class="comment">// 通过选择器获取一组元素（querySelectorAll）</span></span><br></pre></td></tr></table></figure>
<p>例子：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;id1&quot;</span>).innerHTML = <span class="string">&quot;hello leo!&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>改变HTML属性</strong>：<br>通过<code>attribute</code>属性来改变元素的属性：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(id).attribute = <span class="keyword">new</span> value</span><br></pre></td></tr></table></figure>
<p>例子：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span> = <span class="string">&quot;id1&quot;</span> <span class="attr">src</span> =<span class="string">&quot;a.jpg&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;id1&quot;</span>).src = <span class="string">&quot;leo.png&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>详细的文档可以查看<a target="_blank" rel="noopener" href="http://www.w3school.com.cn/jsref/dom_obj_document.asp">HTML DOM Document 对象</a>   </p>
</li>
</ul>
<ol start="2">
<li><strong>DOM CSS操作</strong>    </li>
</ol>
<ul>
<li><strong>改变HTML样式</strong><br>通过<code>style.styleName</code>属性修改元素的样式：   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(id).style.property = <span class="keyword">new</span> style;</span><br></pre></td></tr></table></figure>
例子：   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;id1&quot;</span>).style.color = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;id1&quot;</span>).style.backgroundColor = <span class="string">&quot;green&quot;</span>;</span><br></pre></td></tr></table></figure>
注意：<code>style</code>后面的样式的属性名只能使用<strong>命名小驼峰</strong>。   </li>
</ul>
<ol start="3">
<li><p><strong>DOM 事件操作</strong><br>如要对元素做点击事件的绑定，可以在HTML的<code>onclick</code>事件属性上绑定方法：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;fun()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;fun(prams)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>另外可以绑定的事件类型还有很多：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onload=<span class="string">&quot;fun()&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onchange</span>=<span class="string">&quot;fun()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onmouseover</span>=<span class="string">&quot;fun()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onmousedown</span>=<span class="string">&quot;fun()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>详细的文档可以查看<a target="_blank" rel="noopener" href="http://www.w3school.com.cn/jsref/dom_obj_event.asp">HTML DOM Event 对象</a>  </p>
</li>
<li><p><strong>DOM 节点操作</strong>   </p>
</li>
</ol>
<ul>
<li><p><strong>创建新的HTML元素</strong><br>需要先创建一个新元素节点，然后在使用<code>appendChild</code>方法，向一个已存在的元素上追加这个新元素：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;id1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建新元素节点</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">document</span>.createTextNode(<span class="string">&#x27;新的文本&#x27;</span>);</span><br><span class="line">a.appendChild(b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取已存在元素</span></span><br><span class="line"><span class="keyword">let</span> div = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;id1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 追加新元素</span></span><br><span class="line">div.appendChild(a);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>删除已有的HTML元素</strong><br>如果需要删除HTML元素，就必须先获得该元素的父元素，再使用<code>removeChild</code>方法删除：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;id1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span> = <span class="string">&quot;id2&quot;</span>&gt;</span>hello leo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">document</span>.getElementById(<span class="string">&quot;id1&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> b = <span class="built_in">document</span>.getElementById(<span class="string">&quot;id2&quot;</span>);</span><br><span class="line">a.removeChild(b);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-2-Window对象"><a href="#2-2-Window对象" class="headerlink" title="2.2 Window对象"></a>2.2 Window对象</h2><p>Window 对象表示浏览器中打开的窗口。<br>Window 对象涉及到的属性和方法非常多，具体可以查看 <a target="_blank" rel="noopener" href="http://www.w3school.com.cn/jsref/dom_obj_window.asp">Window 对象</a>  比较详细。<br>这里一个简单的例子，实现获取视窗（显示文档的内部窗口）的宽高，并设置给指定的Div元素，并且当我们调整窗口时候，也会及时改变Div的宽高。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取宽高</span></span><br><span class="line"><span class="keyword">let</span> w = <span class="built_in">window</span>.innerWidth;</span><br><span class="line"><span class="keyword">let</span> h = <span class="built_in">window</span>.innerHeight;</span><br><span class="line"><span class="comment">// 设置宽高</span></span><br><span class="line">div.style.width = w + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">div.style.heitgh = h + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"><span class="comment">// 设置及时调整div宽高</span></span><br><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    w = <span class="built_in">window</span>.innerWidth;</span><br><span class="line">    h = <span class="built_in">window</span>.innerHeight;</span><br><span class="line">    div.style.width = w + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    div.style.heitgh = h + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-获取服务器数据API"><a href="#3-获取服务器数据API" class="headerlink" title="3.获取服务器数据API"></a>3.获取服务器数据API</h1><p>这一部分主要复习<code>Ajax</code>（全称：Asynchronous JavaScript and XML）。<br><code>Ajax</code>主要要解决的问题是：避免重复加载刷新整个页面，因为有时候我们只是小部分数据更新，这时候我们这要刷新这部分的数据，而不是整个页面。<br><code>Ajax</code>不是新的编程语言，而是一种使用现有标准的新方法。   </p>
<p>下面看一下<strong>Ajax</strong>模型图：<br><img src="https://mdn.mozillademos.org/files/6477/moderne-web-site-architechture@2x.png" alt="Ajax模型"></p>
<p>Ajax模型包括使用Web API作为代理来更智能地请求数据，而不仅仅是让浏览器重新加载整个页面。让我们来思考这个意义：<br>比如：我们逛淘宝，搜索或打开商品页面时，顶部导航来和页眉页脚等，都保持不变。<br>这样做的好处：   </p>
<ul>
<li>页面更新更快，减少等待刷新，体验更好，响应更快。   </li>
<li>下载的数据更少，减少带宽的浪费。   </li>
</ul>
<p>另外为了提高加载速度，网站有时候也会将首次请求和数据存储在用户计算机中，下次再请求就直接先使用本地版本，如果内容有更新才会去服务器获取新数据，原理图：<br><img src="https://mdn.mozillademos.org/files/6479/web-app-architecture@2x.png" alt="存储和获取新数据"></p>
<h2 id="3-1-Ajax基础使用"><a href="#3-1-Ajax基础使用" class="headerlink" title="3.1 Ajax基础使用"></a>3.1 Ajax基础使用</h2><p><code>XMLHttpRequest</code> 是 <code>AJAX</code> 的基础。<br>所有现代浏览器均支持 <code>XMLHttpRequest</code> 对象（IE5 和 IE6 使用 <code>ActiveXObject</code>）。</p>
<p>创建 <code>XMLHttpRequest</code> 对象的语法：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">variable=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">// IE5 和 IE使用 ActiveX 对象：</span></span><br><span class="line">variable=<span class="keyword">new</span> ActiveXObject(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>为了兼容所有浏览器（包括IE5 IE6），我们就必须检查浏览器是否支持<code>XMLHttpRequest</code>对象，若支持则创建<code>XMLHttpRequest</code>对象，否则创建<code>ActiveXObject</code>对象。 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> my_http;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest)&#123;</span><br><span class="line">    <span class="comment">// 非 ES5 ES6</span></span><br><span class="line">    my_http=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)&#123;</span><br><span class="line">        <span class="comment">// 网络请求成功后，执行的操作</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// ES5 ES6</span></span><br><span class="line">    my_http=<span class="keyword">new</span> ActiveXObject(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-Ajax发送请求"><a href="#3-2-Ajax发送请求" class="headerlink" title="3.2 Ajax发送请求"></a>3.2 Ajax发送请求</h2><p>向服务器发送请求时，我们可以使用 <code>XMLHttpRequest</code> 对象的 <code>open()</code> 和 <code>send()</code> 方法：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_http.open(method,url,<span class="keyword">async</span>);  </span><br><span class="line">my_http.send(string);</span><br></pre></td></tr></table></figure>
<p>参数解释：<br><code>open(method,url,async)</code>方法接收三个参数：   </p>
<ul>
<li><code>method</code>：请求的类型；<code>GET</code> 或 <code>POST</code>。   </li>
<li><code>url</code>：文件在服务器上的位置。   </li>
<li><code>async</code>：<code>true</code>（异步）或 <code>false</code>（同步）。   </li>
</ul>
<p><code>send(string)</code>方法接收一个参数：    </p>
<ul>
<li><code>string</code>：仅用于 <code>POST</code> 请求。   </li>
</ul>
<p>例子：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GET</span></span><br><span class="line">my_http.open(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;http://www.baidu.com&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">my_http.send();</span><br><span class="line"></span><br><span class="line"><span class="comment">// POST</span></span><br><span class="line">my_http.open(<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;http://www.baidu.com&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">my_http.setRequestHeader(</span><br><span class="line">    <span class="string">&quot;Content-type&quot;</span>,</span><br><span class="line">    <span class="string">&quot;application/x-www-form-urlencoded&quot;</span></span><br><span class="line">);  <span class="comment">// 添加 HTTP 头</span></span><br><span class="line">my_http.send(<span class="string">&quot;name=leo&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>如果POST请求的话需要设置HTTP头：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setRequestHeader(header,value)</span><br></pre></td></tr></table></figure>
<p>参数解释：<br><code>setRequestHeader(header,value)</code>方法接收两个参数：    </p>
<ul>
<li><code>header</code>: 规定头的名称。   </li>
<li><code>value</code>: 规定头的值。     </li>
</ul>
<h2 id="3-3-Ajax服务器响应"><a href="#3-3-Ajax服务器响应" class="headerlink" title="3.3 Ajax服务器响应"></a>3.3 Ajax服务器响应</h2><p>接收服务器响应，我们可以使用 <code>XMLHttpRequest</code> 对象的 <code>responseText</code> 或 <code>responseXML</code> 属性。   </p>
<ul>
<li><p><code>responseText</code>：获得<code>字符串形式</code>的响应数据。</p>
</li>
<li><p><code>responseXML</code>：获得 <code>XML</code> 形式的响应数据。</p>
</li>
<li><p><strong>responseText属性</strong><br>当服务端的响应不是XML，使用<code>responseText</code>属性。<br>若是字符串的响应就可以直接使用。    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;id1&quot;</span>).inndeHTML = my_http.responseText;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-4-Ajax-readyState"><a href="#3-4-Ajax-readyState" class="headerlink" title="3.4 Ajax readyState"></a>3.4 Ajax readyState</h2><p><code>readyState</code>保存着<code>XMLHttpRequest</code>对象的状态。<br>我们发送Ajax请求的整个过程中，<code>XMLHttpRequest</code>对象的<code>readyState</code>会改变，当<code>readyState</code>改变的时候会触发<code>onreadystatechange</code>事件。   </p>
<p><code>XMLHttpRequest</code>对象的三个重要属性：    </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>onreadystatechange</td>
<td>存储函数（或函数名），每当 <code>readyState</code> 属性改变时，就会调用该函数。</td>
</tr>
<tr>
<td>readyState</td>
<td>存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。0（请求未初始化），1（服务器连接已建立），2（请求已接收），3（请求处理中），4（请求已完成，且响应已就绪）</td>
</tr>
<tr>
<td>status</td>
<td>200（”OK”），404（未找到页面）</td>
</tr>
</tbody></table>
<p>通常我们会在<code>readyState</code>等于4且<code>status</code>等于200时候表示响应已就绪，可以执行业务操作：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)&#123;</span><br><span class="line">    <span class="comment">// 网络请求成功后，执行的操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-图形绘制API"><a href="#4-图形绘制API" class="headerlink" title="4.图形绘制API"></a>4.图形绘制API</h1><p>这里主要介绍的是HTML5新增的<code>canvas</code>元素，JavaScript为<code>canvas</code>添加了很多API，进一步增强<code>canvas</code>。<br><code>canvas</code> 元素可以通过JavaScript脚本，在网页上绘制图形。<br>比如,它可以被用来绘制图形,制作图片集合,甚至用来实现动画效果。你可以(也应该)在元素标签内写入可提供替代的的代码内容，这些内容将会在在旧的、不支持<code>canvas</code>元素的浏览器或是禁用了JavaScript的浏览器内渲染并展现。   </p>
<p>详细完整的课程推荐：   </p>
<ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial">MDN Canvas教程</a>   </li>
<li><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/html5/html_5_canvas.asp">W3C HTML5 Canvas</a>   </li>
</ol>
<p>下面复习一下<code>canvas</code>的一个使用流程：    </p>
<h2 id="4-1-简单绘制"><a href="#4-1-简单绘制" class="headerlink" title="4.1 简单绘制"></a>4.1 简单绘制</h2><ol>
<li><strong>创建画布，规定元素id、宽度和高度</strong>   </li>
</ol>
<p>要在网页中创建 2D 或者 3D 场景，必须在 HTML 文件中插入一个<code>canvas</code>元素，以界定网页中的绘图区域。   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;id1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">    卧槽你的浏览器竟然不支持 canvas！</span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>canvas</code>标签内，写一些浏览器不支持画布功能时候的提示内容。<br>画布默认尺寸为 300 × 150 像素。  </p>
<ol start="2">
<li><strong>获取画布上下文，并完成设置</strong>    </li>
</ol>
<p>我们需要获得一个对绘画区域的特殊的引用（称为“<strong>上下文</strong>”）用来在画布上绘图。可通过 <code>HTMLCanvasElement.getContext()</code> 方法获得基础的绘画功能，需要提供一个字符串参数来表示所需上下文的类型。<br>下面创建一个2d画布：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ctx = canvas.getContext(<span class="string">&quot;2d&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><code>ctx</code> 变量包含一个 <code>CanvasRenderingContext2D 对象</code>，画布上所有绘画操作都会涉及到这个对象。<br>下面将画布背景涂黑：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">&#x27;rgb(0, 0, 0)&#x27;</span>;</span><br><span class="line">ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure>

<h2 id="4-2-绘制基础"><a href="#4-2-绘制基础" class="headerlink" title="4.2 绘制基础"></a>4.2 绘制基础</h2><p>首先需要知道一些2D画布的知识，画布左上角的坐标是(0, 0)，横坐标（x）轴向右延伸，纵坐标（y）轴向下延伸。<br><img src="https://mdn.mozillademos.org/files/224/Canvas_default_grid.png" alt="2D画布"></p>
<ol>
<li><p>绘制实线</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctx.lineTo(<span class="number">100</span>,<span class="number">50</span>);  <span class="comment">// 绘制目标坐标</span></span><br><span class="line">ctx.lineWidth = <span class="number">5</span>;   <span class="comment">// 线条宽度</span></span><br><span class="line">ctx.stroke();  <span class="comment">// 绘制实线</span></span><br></pre></td></tr></table></figure></li>
<li><p>绘制矩形<br><code>fillRect(x, y, width, height)</code>    绘制一个填充的矩形<br><code>strokeRect(x, y, width, height)</code>  绘制一个矩形的边框<br><code>clearRect(x, y, width, height)</code>   清除指定矩形区域，让清除部分完全透明。<br>x与y指定了在canvas画布上所绘制的矩形的左上角（相对于原点）的坐标。<br>width和height设置矩形的尺寸。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实心矩形</span></span><br><span class="line">ctx.fillStyle = <span class="string">&#x27;rgb(255, 0, 0)&#x27;</span>; <span class="comment">// 矩形颜色</span></span><br><span class="line">ctx.fillRect(<span class="number">50</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">150</span>);   <span class="comment">// 矩形起止坐标</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空心矩形</span></span><br><span class="line">ctx.strokeStyle = <span class="string">&#x27;rgb(255, 255, 255)&#x27;</span>;<span class="comment">// 矩形边框颜色</span></span><br><span class="line">ctx.strokeRect(<span class="number">25</span>, <span class="number">25</span>, <span class="number">175</span>, <span class="number">200</span>);<span class="comment">// 矩形起止坐标</span></span><br></pre></td></tr></table></figure></li>
<li><p>绘制路径<br>可以通过路径来实现复杂的图形，下面整理了一些常用到的方法：   </p>
</li>
</ol>
<ul>
<li><code>beginPath()</code>：在画笔当前所在位置开始绘制一条路径。在新的画布中，画笔起始位置为 (0, 0)。   </li>
<li><code>moveTo()</code>：将画笔移动至另一个坐标点，不记录、不留痕迹，只将画笔“跳”至新位置。   </li>
<li><code>fill()</code>：通过为当前所绘制路径的区域填充颜色来绘制一个新的填充形状。</li>
<li><code>stroke()</code>：通过为当前绘制路径的区域描边，来绘制一个只有边框的形状。</li>
<li>路径也可和矩形一样使用 <code>lineWidth</code> 和 <code>fillStyle</code> / <code>strokeStyle</code> 等功能。   </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle = <span class="string">&#x27;rgb(255, 0, 0)&#x27;</span>; <span class="comment">// 设置填充颜色</span></span><br><span class="line">ctx.beginPath();      <span class="comment">// 开始</span></span><br><span class="line">ctx.moveTo(<span class="number">50</span>, <span class="number">50</span>);   <span class="comment">// 移动到结束点的坐标</span></span><br><span class="line"><span class="comment">// .. 可以在到处移动</span></span><br><span class="line">ctx.fill();           <span class="comment">// 绘制</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>绘制圆形<br><code>arc(x, y, radius, startAngle, endAngle, anticlockwise)</code><br>画一个以（x,y）为圆心的以radius为半径的圆弧（圆），从startAngle开始到endAngle结束，按照anticlockwise给定的方向（默认为顺时针）来生成。<br><code>arcTo(x1, y1, x2, y2, radius)</code><br>根据给定的控制点和半径画一段圆弧，再以直线连接两个控制点。   </li>
</ol>
<p><code>arc</code>方法，该方法有六个参数：   </p>
<ul>
<li><code>x,y</code>为绘制圆弧所在圆上的圆心坐标。   </li>
<li><code>radius</code>为半径。   </li>
<li><code>startAngle</code>以及<code>endAngle</code>参数用弧度定义了开始以及结束的弧度。   </li>
<li><code>anticlockwise</code>是布尔值，为true时，是逆时针方向，否则顺时针方向。<br>这些都是以x轴为基准。   </li>
</ul>
<p><strong>注意</strong>：arc()函数中表示角的单位是弧度，不是角度。角度与弧度的js表达式:<br>弧度=(Math.PI/180)*角度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cxt.fillStyle=<span class="string">&quot;#FF0000&quot;</span>;</span><br><span class="line">cxt.beginPath();</span><br><span class="line">cxt.arc(<span class="number">70</span>,<span class="number">18</span>,<span class="number">15</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI*<span class="number">2</span>,<span class="literal">true</span>);</span><br><span class="line">cxt.closePath();</span><br><span class="line">cxt.fill();</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>绘制文本<br><code>fillText(text, x, y [, maxWidth])</code><br>在指定的(x,y)位置填充指定的文本，绘制的最大宽度是可选的.<br><code>strokeText(text, x, y [, maxWidth])</code><br>在指定的(x,y)位置绘制文本边框，绘制的最大宽度是可选的.   </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ctx.strokeStyle = <span class="string">&#x27;white&#x27;</span>;</span><br><span class="line">ctx.lineWidth = <span class="number">1</span>;</span><br><span class="line">ctx.font = <span class="string">&#x27;36px arial&#x27;</span>;</span><br><span class="line">ctx.strokeText(<span class="string">&#x27;hello leo !&#x27;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">ctx.fillStyle = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">ctx.font = <span class="string">&#x27;48px georgia&#x27;</span>;</span><br><span class="line">ctx.fillText(<span class="string">&#x27;hello leo !&#x27;</span>, <span class="number">50</span>, <span class="number">150</span>);</span><br></pre></td></tr></table></figure>
<p>另外还有一些有样式的文本，可以使用这些属性：  </p>
<ul>
<li><code>font = value</code><br>当前绘制的文本字体.默认是 10px sans-serif。   </li>
<li><code>textAlign = value</code><br>文本对齐选项. 可选的值包括：<code>start</code>, <code>end</code>, <code>left</code>, <code>right</code> or <code>center</code>. 默认值是 start。     </li>
<li><code>textBaseline = value</code><br>基线对齐选项. 可选的值包括：<code>top</code>, <code>hanging</code>, <code>middle</code>, <code>alphabetic</code>, <code>ideographic</code>, <code>bottom</code>。默认值是 <code>alphabetic</code>。    </li>
<li><code>direction = value</code><br>文本方向。可能的值包括：<code>ltr</code>, <code>rtl</code>, <code>inherit</code>。默认值是 <code>inherit</code>。    <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctx.font = <span class="string">&quot;48px serif&quot;</span>;</span><br><span class="line">ctx.textBaseline = <span class="string">&quot;hanging&quot;</span>;</span><br><span class="line">ctx.strokeText(<span class="string">&quot;Hello leo &quot;</span>, <span class="number">0</span>, <span class="number">100</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="6">
<li>绘制图片  </li>
</ol>
<ul>
<li><code>drawImage(image, x, y)</code><br>其中 <code>image</code> 是 <code>image</code> 或者 <code>canvas</code> 对象，<code>x</code> 和 <code>y</code> 是其在目标 <code>canvas</code> 里的起始坐标。    <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">img.src = <span class="string">&quot;leo.png&quot;</span>;</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ctx.drawImage(img, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<code>drawImage</code>方法还有更多参数：   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.drawImage(image, <span class="number">20</span>, <span class="number">20</span>, <span class="number">185</span>, <span class="number">175</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">185</span>, <span class="number">175</span>);</span><br></pre></td></tr></table></figure></li>
<li>第一个参数不变，为图片引用。   </li>
<li>参数 2、3 表示裁切部分左上顶点的坐标，参考原点为原图片本身左上角的坐标。原图片在该坐标左、上的部分均不会绘制出来。   </li>
<li>参数 4、5 表示裁切部分的长、宽。   </li>
<li>参数 6、7 表示裁切部分左上顶点在画布中的位置坐标，参考原点为画布左上顶点。   </li>
<li>参数 8、9 表示裁切部分在画布中绘制的长、宽。本例中绘制时与裁切时面积相同，你也可以定制绘制的尺寸。   </li>
</ul>
<p>详细完整的课程推荐：   </p>
<ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial">MDN Canvas教程</a>   </li>
<li><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/html5/html_5_canvas.asp">W3C HTML5 Canvas</a>   </li>
</ol>
<h1 id="5-视频音频API"><a href="#5-视频音频API" class="headerlink" title="5.视频音频API"></a>5.视频音频API</h1><p>HTML5提供了用于文档中嵌入富媒体的元素<code>&lt;video&gt;</code>和<code>&lt;audio&gt;</code>标签，通过元素自带的API来控制视频和音频的播放搜索等。   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;1.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;2.webm&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/webm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;3.mp4&quot;</span>&gt;</span>打开mp4<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-1-视频"><a href="#5-1-视频" class="headerlink" title="5.1 视频"></a>5.1 视频</h2><p>当前，video 元素支持三种视频格式：<code>Ogg</code>/<code>MPEG4</code>和<code>WebM</code>。<br>简单使用：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;1.ogg&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;1.ogg&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">width</span>=<span class="string">&quot;320&quot;</span> <span class="attr">height</span>=<span class="string">&quot;240&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>连接不同视频：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">&quot;320&quot;</span> <span class="attr">height</span>=<span class="string">&quot;240&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;1.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/ogg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;2.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">    您的浏览器不支持！</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;video&gt; 与 &lt;/video&gt;</code> 之间插入的内容是供不支持 <code>video</code> 元素的浏览器显示的。<br><code>&lt;video&gt;</code> 标签的属性：   </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>autoplay</code></td>
<td>视频在就绪后马上播放</td>
</tr>
<tr>
<td><code>controls</code></td>
<td>向用户显示控件，比如播放按钮</td>
</tr>
<tr>
<td><code>height</code></td>
<td>设置视频播放器的高度</td>
</tr>
<tr>
<td><code>width</code></td>
<td>设置视频播放器的宽度</td>
</tr>
<tr>
<td><code>src</code></td>
<td>要播放的视频的 URL</td>
</tr>
<tr>
<td><code>preload</code></td>
<td>视频在页面加载时进行加载，并预备播放，如果使用 “autoplay”，则忽略该属性</td>
</tr>
<tr>
<td><code>loop</code></td>
<td>当媒介文件完成播放后再次开始播放</td>
</tr>
</tbody></table>
<p>另外我们可以为视频创建简单的播放/暂停和调整尺寸的控件，这里需要使用<code>play()</code>和 <code>pause()</code> 还有两个属性：<code>paused</code> 和 <code>width</code>。<br>更多方法可以查看 <a target="_blank" rel="noopener" href="http://www.w3school.com.cn/html5/html_5_video_dom.asp">HTML5 video - 方法、属性以及事件</a></p>
<h2 id="5-2-音频"><a href="#5-2-音频" class="headerlink" title="5.2 音频"></a>5.2 音频</h2><p><code>audio</code> 元素能够播放声音文件或者音频流。<br>当前，<code>audio</code> 元素支持三种视频格式：<code>Ogg Vorbis</code>/<code>MP3</code>和<code>Wav</code>。<br>简单使用：   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;1.ogg&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>control</code> 属性供添加播放、暂停和音量控件。<br><code>&lt;audio&gt; 与 &lt;/audio&gt;</code> 之间插入的内容是供不支持 <code>audio</code> 元素的浏览器显示的。<br>连接不同音频：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio controls=<span class="string">&quot;controls&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;1.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/ogg&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;2.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    您的浏览器不支持！</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><code>&lt;audio&gt;</code> 标签的属性：   </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>autoplay</code></td>
<td>视频在就绪后马上播放</td>
</tr>
<tr>
<td><code>controls</code></td>
<td>向用户显示控件，比如播放按钮</td>
</tr>
<tr>
<td><code>src</code></td>
<td>要播放的视频的 URL</td>
</tr>
<tr>
<td><code>preload</code></td>
<td>视频在页面加载时进行加载，并预备播放，如果使用 “autoplay”，则忽略该属性</td>
</tr>
<tr>
<td><code>loop</code></td>
<td>当媒介文件完成播放后再次开始播放</td>
</tr>
</tbody></table>
<h1 id="6-客户端存储API"><a href="#6-客户端存储API" class="headerlink" title="6.客户端存储API"></a>6.客户端存储API</h1><p>现代web浏览器会提供一些在客户端存储用户数据的方法，只要用户允许，可以随时取出使用。<br>使用客户端存储API可以存储的数据量是优先的，具体取决于浏览器或者用户设置 。<br>存储的方式可以这样分类：   </p>
<ol>
<li><p><strong>传统方法：cookies</strong><br>cookie使用比较久了，过时，存在各种安全问题，而且无法存储复杂数据，可能唯一的优势就是对非常老旧浏览器支持，如果业务需要，也可以使用cookie</p>
</li>
<li><p><strong>新流派：Web Storage 和 IndexedDB</strong><br>现代浏览器所提供的更加简单有效的客户端储存API。    </p>
</li>
<li><p><strong>未来：Cache API</strong><br>一些现代浏览器支持新的 <code>Cache</code> API。这个API是为存储特定HTTP请求的响应文件而设计的，它对于像存储离线网站文件这样的事情非常有用，这样网站就可以在没有网络连接的情况下使用。缓存通常与 <code>Service Worker</code> API 组合使用，尽管不一定非要这么做。</p>
</li>
</ol>
<h2 id="6-1-WebStorage"><a href="#6-1-WebStorage" class="headerlink" title="6.1 WebStorage"></a>6.1 WebStorage</h2><p><code>web storage</code>API只需存储简单的 <strong>键/值</strong>对的数据（限制为字符串、数字等类型），并在需要的时候检索其值。<br><code>web storage</code>API提供了两种在客户端存储数据的新方法：   </p>
<ul>
<li><code>localStorage</code> : 一直保存数据，甚至到浏览器关闭又开启后也是这样   </li>
<li><code>sessionStorage</code> : 只要浏览器开着，数据就会一直保存 (关闭浏览器时数据会丢失)  </li>
</ul>
<p><strong>localStorage</strong>方法：    </p>
<ul>
<li><code>localStorage.setItem(key, value)</code>：存储一个数据。   </li>
<li><code>localStorage.getItem(key)</code>：读取一个数据。   </li>
<li><code>localStorage.removeItem(key)</code>：删除一个数据。   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> leo = <span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">leo ; <span class="comment">// &quot;leo&quot;</span></span><br><span class="line"><span class="built_in">localStorage</span>.removeItem(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure>
关闭浏览器以后数据还在。   </li>
</ul>
<p><strong>sessionStorage</strong>方法：    </p>
<ul>
<li><code>sessionStorage.setItem(key, value)</code>：存储一个数据。   </li>
<li><code>sessionStorage.getItem(key)</code>：读取一个数据。   </li>
<li><code>sessionStorage.removeItem(key)</code>：删除一个数据。   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.setItem(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> leo = sessionStorage.getItem(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">leo ; <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">sessionStorage.removeItem(<span class="string">&#x27;name&#x27;</span>);</span><br></pre></td></tr></table></figure>
关闭浏览器以后数据不在。   </li>
</ul>
<h1 id="7-第三方API"><a href="#7-第三方API" class="headerlink" title="7.第三方API"></a>7.第三方API</h1><p>并不是所有的API都是内置在浏览器中，有一些可能是其他网站（如谷歌，Facebook等）提供的API，让开发者调用，从而使用他们的服务和数据等。   </p>
<p>API通过使用一个或多个JavaScript对象与我们的代码交互，这些对象作为API使用的数据（包含在对象属性中）的容器，和API提供的功能（包含在对象的方法中）。<br>例如我们调用谷歌地图的Google Maps APIs ，需要先引入他们开放的JavaScript库。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;https://maps.google.com/maps/api/js?key=AIzaSyDDuGt0E5IEGkcE6ZfrKfUtE9Ko_de66pA&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="string">``</span><span class="string">`   </span></span><br><span class="line"><span class="string">然后就可以这么使用：   </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">navigator.geolocation.getCurrentPosition(<span class="function"><span class="keyword">function</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ... do something</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如<code>Geolocation API</code>则是由以下几个对象组成：   </p>
<ul>
<li><code>Geolocation</code>, 包含三种控制地理数据检索的方法。     </li>
<li><code>Position</code>, 表示在给定的时间的相关设备的位置。它包含一个当前位置的<code>Coordinates</code> 对象。还包含了一个时间戳,这个时间戳表示获取到位置的时间。     </li>
<li><code>Coordinates</code>,包含有关设备位置的大量有用数据，包括经纬度，高度，运动速度和运动方向等。 </li>
</ul>
<p><strong>本部分内容到这结束</strong></p>
<h1 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h1><ol>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs">MDN JavaScript指南</a>    </li>
<li><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/">W3school JavaScript</a>    </li>
</ol>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#x6e;&#103;&#x61;&#110;&#56;&#x37;&#56;&#55;&#64;&#x71;&#x71;&#x2e;&#99;&#x6f;&#109;">&#x70;&#x69;&#x6e;&#103;&#x61;&#110;&#56;&#x37;&#56;&#55;&#64;&#x71;&#x71;&#x2e;&#99;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/20/133-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9117-WebApi%E4%BB%8B%E7%BB%8D/" data-id="ckts3ejxy00lq4d9k1f64871y" data-title="133-【JavaScript】【重温基础】17.WebApi介绍" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-132-【JavaScript】【重温基础】16-JSON对象介绍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/17/132-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9116-JSON%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/" class="article-date">
  <time class="dt-published" datetime="2019-01-17T15:49:26.000Z" itemprop="datePublished">2019-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/17/132-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9116-JSON%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/">132-【JavaScript】【重温基础】16.JSON对象介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#x6e;&#103;&#x61;&#110;&#56;&#x37;&#56;&#55;&#64;&#x71;&#113;&#x2e;&#x63;&#x6f;&#109;">&#112;&#105;&#x6e;&#103;&#x61;&#110;&#56;&#x37;&#56;&#55;&#64;&#x71;&#113;&#x2e;&#x63;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>本文是 <strong>重温基础</strong> 系列文章的第十六篇。<br>今日感受：静。   </p>
<p><strong>本章节复习的是JS中的关于JSON对象相关知识。</strong>    </p>
<p><strong>前置知识</strong>：<br><code>JSON</code>是一种按照<code>JavaScript</code>对象语法的数据格式。</p>
<h1 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h1><p>概念有三点：   </p>
<blockquote>
<p><code>JSON</code>全称<code>JavaScript</code> 对象表示法（JavaScript Object Notation）。<br><code>JSON</code> 是<strong>存储</strong>和<strong>交换文本信息</strong>的语法。类似 <code>XML</code>。<br><code>JSON</code> 比 <code>XML</code> 更小、更快，更易解析。<br>———— 摘自 <a target="_blank" rel="noopener" href="http://www.w3school.com.cn/json/index.asp">W3school JSON教程</a></p>
</blockquote>
<p><code>JSON</code> 使用 <code>JavaScript</code> 语法来描述数据对象，但是 <code>JSON</code> 仍然独立于语言和平台。<code>JSON</code> 解析器和 <code>JSON</code> 库支持许多不同的编程语言。  </p>
<h1 id="2-语法"><a href="#2-语法" class="headerlink" title="2.语法"></a>2.语法</h1><p><code>JSON</code>在使用过程中可作为一个<strong>对象</strong>或者<strong>字符串</strong>存在，当作为<strong>对象</strong>时，用于获取<code>JSON</code>中的数据，而作为<strong>字符串</strong>时常用于网络数据传输。   </p>
<p><code>JSON</code>语法规则：   </p>
<ol>
<li>数据在名称/值对中   </li>
<li>数据由逗号分隔   </li>
<li>花括号保存对象   </li>
<li>方括号保存数组  </li>
</ol>
<p>通常，<code>JSON</code>数据书写格式是<code>名称/键值</code>：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;name&quot;</span> : <span class="string">&quot;pingan&quot;</span></span><br></pre></td></tr></table></figure>

<p>而<code>JSON</code>的值可以是 ：    </p>
<ol>
<li>数字（整数或浮点数）  </li>
<li>字符串（在双引号中）  </li>
<li>逻辑值（<code>true</code> 或 <code>false</code>）  </li>
<li>数组（在方括号中）  </li>
<li>对象（在花括号中）  </li>
<li><code>null</code>   </li>
</ol>
<p><strong>JSON常常有三种类型：</strong><br>三种类型：简单之，对象和数组。<br>必须注意：JSON字符串必须是<strong>双引号</strong>，单引号会语法错误。   </p>
<h2 id="2-1-简单值"><a href="#2-1-简单值" class="headerlink" title="2.1 简单值"></a>2.1 简单值</h2><p>简单值可以是字符串:   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello leo!&quot;</span></span><br></pre></td></tr></table></figure>
<p>也可以是数字,逻辑值：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-对象类型"><a href="#2-2-对象类型" class="headerlink" title="2.2 对象类型"></a>2.2 对象类型</h2><p>内容放在<code>花括号</code>内，是多个键值对。<br>JSON对象 与 js 对象的三个区别：   </p>
<ol>
<li>JSON对象 必须加双引号，而 js 对象属性名可以不加双引号。</li>
<li>JSON对象 没有变量声明，而 js 对象有。</li>
<li>JSON对象 没有分号，而 js 对象有。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js 对象</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&quot;pingan&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>  : <span class="string">&quot;25&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// json 对象</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;pingan&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>  : <span class="string">&quot;25&quot;</span>,</span><br><span class="line">    <span class="string">&quot;box&quot;</span>  : [</span><br><span class="line">        <span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-3-数组类型"><a href="#2-3-数组类型" class="headerlink" title="2.3 数组类型"></a>2.3 数组类型</h2><p>内容放在<code>方括号</code>内。<br>JSON数组也没有分号和变量，常常可以把JSON数组和对象结合使用，构成更复杂的数据集合。    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>  : <span class="number">25</span>,</span><br><span class="line">        <span class="string">&quot;box&quot;</span>  : [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span> : <span class="string">&quot;pingan&quot;</span>,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>  : <span class="number">25</span>,</span><br><span class="line">        <span class="string">&quot;box&quot;</span>  : [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h1 id="3-使用"><a href="#3-使用" class="headerlink" title="3. 使用"></a>3. 使用</h1><p>JSON最常见的用法就是，从服务端获取JSON数据，再将JSON数据转成JavaScrip对象使用。<br>JSON对象有两个方法：   </p>
<ul>
<li><code>JSON.stringify()</code>： 序列化操作，将<code>JavaScript对象</code>转换成<code>JSON字符串</code>。    </li>
<li><code>JSON.prase()</code>：反序列化操作，将<code>JSON字符串</code>解析成<code>JavaScript值</code>。   </li>
</ul>
<h2 id="3-1-序列化操作"><a href="#3-1-序列化操作" class="headerlink" title="3.1 序列化操作"></a>3.1 序列化操作</h2><p>序列化操作常常使用<code>JSON.stringify()</code>。<br>简单例子:   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo =  &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>  : <span class="number">25</span>,</span><br><span class="line">    <span class="attr">box</span>  : [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> pingan = <span class="built_in">JSON</span>.stringify(leo);</span><br><span class="line"><span class="built_in">console</span>.log(pingan); <span class="comment">// &quot;&#123;&quot;name&quot;:&quot;leo&quot;,&quot;age&quot;:25,&quot;box&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：   </p>
<ol>
<li>默认情况下，<code>JSON.stringify()</code>输出的JSON字符串不包含任何空格字符或缩进，因此结果就像上面那样。   </li>
<li>序列化<code>JavaScript对象</code>时，所有函数及原型成员都会被忽略，不体现在结果上。   </li>
<li>值为<code>undefined</code>的任何属性都会被跳过。   </li>
</ol>
<p>因此，最终的值都是有效的JSON数据类型的实例属性。   </p>
<h2 id="3-2-反序列化操作"><a href="#3-2-反序列化操作" class="headerlink" title="3.2 反序列化操作"></a>3.2 反序列化操作</h2><p>序列化操作常常使用<code>JSON.parse()</code>。<br>简单例子：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> copyPingan = <span class="built_in">JSON</span>.parse(pingan);</span><br><span class="line">copyPingan; <span class="comment">// &#123;name: &quot;leo&quot;, age: 25, box: Array(3)&#125;</span></span><br></pre></td></tr></table></figure>
<p>如果传入<code>JSON.parse()</code>的字符串不是有效的JSON，则会抛出错误。<br><strong>注意</strong>：<br>虽然<code>pingan</code>和<code>copyPingan</code>属性相同，但两者独立，没有任何关系。   </p>
<h1 id="4-序列化选项"><a href="#4-序列化选项" class="headerlink" title="4.序列化选项"></a>4.序列化选项</h1><p><code>JSON.stringify()</code>除了要传入序列化对象作为参数，还可以接收其他两个参数，用来指定序列化JavaScript对象的方式：      </p>
<ol>
<li>过滤器：可以是个<strong>数组</strong>，也可以是个<strong>函数</strong>。   </li>
<li>选项：表示是否在<code>JSON字符串</code>中<strong>保留缩进</strong>。  </li>
</ol>
<p>单独或组合使用两者，可以更加全面深入的控制JSON的序列化。   </p>
<h2 id="4-1-过滤器"><a href="#4-1-过滤器" class="headerlink" title="4.1 过滤器"></a>4.1 过滤器</h2><p>若过滤器的参数是<strong>数组</strong>，则<code>JSON.stringify()</code>返回的结果将只包含数组中的属性：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo =  &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>  : <span class="number">25</span>,</span><br><span class="line">    <span class="attr">box</span>  : [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pingan = <span class="built_in">JSON</span>.stringify(leo,[<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(pingan); <span class="comment">// &quot;&#123;&quot;name&quot;:&quot;leo&quot;,&quot;age&quot;:25&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<p>若过滤器的参数是<strong>函数</strong>，则情况就不一样了，传入的函数需有两个参数（属性名和属性值）：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo =  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>  : <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;box&quot;</span>  : [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pingan = <span class="built_in">JSON</span>.stringify(leo,<span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(key)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;name&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;我叫&quot;</span> + value</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;age&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> value + <span class="string">&quot;岁&quot;</span></span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">			<span class="keyword">return</span> value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(pingan); <span class="comment">// &quot;&#123;&quot;name&quot;:&quot;我叫leo&quot;,&quot;age&quot;:&quot;25岁&quot;,&quot;box&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]&#125;&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：使用<code>switch</code>的时候，必须指定<code>default</code>否则会返回<code>undefined</code>。  </p>
<h2 id="4-2-选项"><a href="#4-2-选项" class="headerlink" title="4.2 选项"></a>4.2 选项</h2><p><code>JSON.stringify()</code>第三个参数是个选项，控制结果中的缩进和空白符。   </p>
<ol>
<li>若选项只有一个值，则表示<strong>每个级别缩进的空格数</strong>，最大值为<code>10</code>，超过<code>10</code>则只会是<code>10</code>。    <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo =  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>  : <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;box&quot;</span>  : [<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pingan = <span class="built_in">JSON</span>.stringify(leo, <span class="literal">null</span>, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(pingan);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&quot;&#123;</span></span><br><span class="line"><span class="comment">    &quot;name&quot;: &quot;leo&quot;,</span></span><br><span class="line"><span class="comment">    &quot;age&quot;: 25,</span></span><br><span class="line"><span class="comment">    &quot;box&quot;: [</span></span><br><span class="line"><span class="comment">        &quot;a&quot;,</span></span><br><span class="line"><span class="comment">        &quot;b&quot;,</span></span><br><span class="line"><span class="comment">        &quot;c&quot;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">&#125;&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="5-解析选项"><a href="#5-解析选项" class="headerlink" title="5.解析选项"></a>5.解析选项</h1><p><code>JSON.parse()</code>可以接收一个函数作为参数，对每个键值对调用，为了跟<code>JSON.stringify()</code>的<code>过滤函数</code>区别，这个函数成为<code>还原函数</code>。   </p>
<ul>
<li>若还原函数返回<code>undefined</code>，则表示要从结果中删除对应的键。   </li>
<li>若还原函数返回其他值，则将该值插入结果中。   </li>
</ul>
<p>还原函数接收两个参数：属性名和属性值。   </p>
<p>举例，在日期字符串转换为Date对象中，经常要用到还原函数：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> leo =  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>  : <span class="number">25</span>,</span><br><span class="line">    <span class="string">&quot;date&quot;</span> : <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1993</span>, <span class="number">9</span>, <span class="number">9</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pingan = <span class="built_in">JSON</span>.stringify(leo);</span><br><span class="line"><span class="keyword">var</span> copy = <span class="built_in">JSON</span>.parse(pingan,<span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// return key == &quot;date&quot; ? new Date(value) : value;</span></span><br><span class="line">    <span class="keyword">if</span>(key == <span class="string">&quot;date&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(value);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(copy);</span><br><span class="line"><span class="comment">// &quot;&#123;&quot;name&quot;:&quot;leo&quot;,&quot;age&quot;:25,&quot;date&quot;:&quot;1993-10-08T16:00:00.000Z&quot;&#125;&quot;</span></span><br></pre></td></tr></table></figure>


<h1 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h1><ol>
<li><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/json/index.asp">W3school JSON教程</a>    </li>
<li>《JavaScrip高级程序设计》    </li>
</ol>
<p><strong>本部分内容到这结束</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#x6e;&#x67;&#x61;&#x6e;&#x38;&#x37;&#x38;&#55;&#64;&#x71;&#113;&#x2e;&#x63;&#111;&#x6d;">&#x70;&#x69;&#x6e;&#x67;&#x61;&#x6e;&#x38;&#x37;&#x38;&#55;&#64;&#x71;&#113;&#x2e;&#x63;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/17/132-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9116-JSON%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/" data-id="ckts3ejst00224d9kad3s44ne" data-title="132-【JavaScript】【重温基础】16.JSON对象介绍" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-131-【JavaScript】【重温基础】15-JS对象介绍" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/14/131-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9115-JS%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/" class="article-date">
  <time class="dt-published" datetime="2019-01-14T15:20:43.000Z" itemprop="datePublished">2019-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/14/131-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9115-JS%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/">131-【JavaScript】【重温基础】15.JS对象介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#x69;&#x6e;&#103;&#x61;&#110;&#x38;&#x37;&#56;&#x37;&#64;&#x71;&#113;&#46;&#x63;&#x6f;&#x6d;">&#x70;&#x69;&#x6e;&#103;&#x61;&#110;&#x38;&#x37;&#56;&#x37;&#64;&#x71;&#113;&#46;&#x63;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>从这篇文章开始，复习 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Working_with_Objects">MDN 中级教程</a> 的内容了，在<strong>初级教程</strong>中，我和大家分享了一些比较简单基础的知识点，并放在我的 【<a target="_blank" rel="noopener" href="http://js.pingan8787.com/">Cute-JavaScript</a>】系列文章中。  </p>
<p><strong>关于【<a target="_blank" rel="noopener" href="http://js.pingan8787.com/">Cute-JavaScript</a>】</strong>：<br>一本可爱的JavaScript小书，内容分成三大部分：<strong>ES规范系列</strong>、<strong>JS基础系列</strong>和<strong>面试题系列</strong>，目前我还在抓紧更新，喜欢的朋友可以 <a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo-JavaScript/tree/master/Cute-JavaScript">github</a> 上Star一下呀，下面放一张首页图：<br><img src="http://images.pingan8787.com/Cute-JavaScript.png" alt="Cute-JavaScript"></p>
<hr>
<p>正文开始   </p>
<p>本文是 <strong>重温基础</strong> 系列文章的第十五篇。<br>今日感受：耐心为人处世。   </p>
<p><strong>本章节复习的是JS中的关于对象还有原型等相关知识。</strong>    </p>
<p><strong>前置知识</strong>：<br>关于使用对象，可以先阅读一下我的<a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo-JavaScript/blob/master/Cute-JavaScript/Cute-JS/level1/12.%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1.md">《12.使用对象》</a>这篇文章。   </p>
<p>下面也先重温一点基础。   </p>
<h1 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h1><p>对象是一个包含相关数据和方法的集合，由<strong>变量</strong>和<strong>方法</strong>组成，通常称为对象的<strong>属性</strong>和<strong>方法</strong>，比如：    </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> me = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&#x27;pingan&#x27;</span>,</span><br><span class="line">    <span class="attr">eat</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;eat eat eat!!!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，<code>name</code>就是<code>me</code>这个对象的一个属性，<code>eat</code>就是<code>me</code>这个对象的一个方法。<br>访问对象的属性是这样的：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">me.name;   <span class="comment">// &quot;pingan&quot;</span></span><br><span class="line">me.eat();  <span class="comment">// &quot;eat eat eat!!!&quot;</span></span><br></pre></td></tr></table></figure>
<p>另外在访问对象属性时，有以下两种方式：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> me = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&#x27;pingan&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 点表示法</span></span><br><span class="line">me.name;   <span class="comment">// me.name =&gt; &quot;pingan&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 括号表示法</span></span><br><span class="line">me[<span class="string">&quot;name&quot;</span>];<span class="comment">// me.name =&gt; &quot;pingan&quot;</span></span><br></pre></td></tr></table></figure>
<p>括号表示法中，必须是字符串。    </p>
<p>我们常常这么设置对象的属性：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> me = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&#x27;pingan&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 点表示法</span></span><br><span class="line">me.name = <span class="string">&quot;leo&quot;</span>;   <span class="comment">// me =&gt; &#123;name: &quot;leo&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 括号表示法</span></span><br><span class="line">me[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;leo&quot;</span>;<span class="comment">// me =&gt; &#123;name: &quot;leo&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="2-简单的面向对象介绍"><a href="#2-简单的面向对象介绍" class="headerlink" title="2.简单的面向对象介绍"></a>2.简单的面向对象介绍</h1><p>这里简单介绍下JavaScrip的面向对象编程OOP。   </p>
<blockquote>
<p>面向对象编程（Object Oriented Programming，OOP，面向对象程序设计）是一种计算机编程架构。OOP 的一条基本原则是计算机程序是由单个能够起到子程序作用的单元或对象组合而成。  —— 百度百科</p>
</blockquote>
<p><img src="http://images.pingan8787.com/OOP1.png" alt="OOP">   </p>
<p>我们这里定义一个简单的对象模型，比如我，我的身上可能有很多信息（姓名，年龄，身高等等），这时候我们可以将这些信息抽取出来，像这样：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = &#123;</span><br><span class="line">    <span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>  : <span class="number">26</span>,</span><br><span class="line">    <span class="attr">height</span> : <span class="number">180</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样我们就将我的信息抽取成一个JS的对象了，但是这样有个局限性，这样定义的话，一次只能定义一个人，如果这时候，有一百个人，那么我们就需要定义一百个这样的对象，显然这是不可取的。<br>所以，这里就引入一个重要的函数——<strong>构造函数</strong>，<strong>将相同的特性封装成通用的对象</strong>，实现定义一次，其他地方都可以使用，这也是OOP的核心思想：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传入 name 参数使得可以定义任何人作为对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> me = &#123;&#125;;</span><br><span class="line">    me.name = name;</span><br><span class="line">    me.doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(me.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> me;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建一个函数“<code>Person</code>”，只要传入不同的<code>name</code>即可得到不同的对象：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = Person(<span class="string">&quot;leo&quot;</span>);</span><br><span class="line">leo.name;    <span class="comment">// &quot;leo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pingan = Person(<span class="string">&quot;pingan&quot;</span>);</span><br><span class="line">pingan.name; <span class="comment">// &quot;pingan&quot;</span></span><br></pre></td></tr></table></figure>
<p>但是似乎<code>Person</code>对象的定义，显得不够精简，因为还要定义一个<strong>空对象</strong>来接收各个属性和方法，幸好JavaScrip在构造函数中提供一个便捷的方法，我们将代码改造下：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于<code>this</code>关键词，即无论是该对象的哪个实例被构造函数创建，它的<code>name</code>属性都是参数<code>name</code>的值，<code>doSomething</code>方法中使用的也是参数<code>name</code>。简单理解就是用<code>this</code>指代了<code>Person</code>。   </p>
<p><strong>构造函数通常首字母大写，用于区分普通函数。</strong>    </p>
<p>接下来，通过<code>new</code>关键词，使用前面创建的构造函数（使用构造函数也叫实例化）：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="keyword">new</span> Person(<span class="string">&quot;leo&quot;</span>);</span><br><span class="line">leo.name;    <span class="comment">// &quot;leo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pingan = <span class="keyword">new</span> Person(<span class="string">&quot;pingan&quot;</span>);</span><br><span class="line">pingan.name; <span class="comment">// &quot;pingan&quot;</span></span><br></pre></td></tr></table></figure>
<p>然后一个简单的构造函数就写好了，通常在开发的时候，可能会有很多的参数：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params">name, age, height, weight</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age + <span class="string">&#x27;岁&#x27;</span>;</span><br><span class="line">    <span class="built_in">this</span>.HeightAndWeight = &#123;</span><br><span class="line">        height,</span><br><span class="line">        weight</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.doSomething = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>: height:<span class="subst">$&#123;<span class="built_in">this</span>.HeightAndWeight.height&#125;</span>m, </span></span><br><span class="line"><span class="string">            weight:<span class="subst">$&#123;<span class="built_in">this</span>.HeightAndWeight.weight&#125;</span>Kg!!`</span></span><br><span class="line">        );</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> leo = <span class="keyword">new</span> Man(<span class="string">&quot;leo&quot;</span>,<span class="number">25</span>,<span class="number">1.8</span>,<span class="number">68</span>);</span><br><span class="line">leo.doSomething();  <span class="comment">// leo: height:1.8m, weight:68Kg!!</span></span><br></pre></td></tr></table></figure>

<h1 id="3-JS中的原型"><a href="#3-JS中的原型" class="headerlink" title="3.JS中的原型"></a>3.JS中的原型</h1><h2 id="3-1理解原型"><a href="#3-1理解原型" class="headerlink" title="3.1理解原型"></a>3.1理解原型</h2><p>这里需要先了解一下<code>Object</code>和<code>Function</code>,这两个函数都是JS的自带函数，<code>Object</code>继承自己，<code>Function</code>继承自己，相互继承对方，即<code>Object</code>和<code>Function</code>既是函数也是对象。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>Object</code> 是 <code>Function</code>的实例，而<code>Function</code>是它自己的实例。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span>.prototype); <span class="comment">// ƒ () &#123; [native code] &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype);  <span class="comment">// Object</span></span><br></pre></td></tr></table></figure>
<p>另外，只有通过<code>Function</code>创建的函数都是函数对象，其他都是普通对象（通常由<code>Object</code>创建）：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">typeof</span> f1 <span class="comment">//&quot;function&quot;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> f1();</span><br><span class="line"><span class="keyword">typeof</span> o1 <span class="comment">//&quot;object&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> o2 = &#123;&#125;;</span><br><span class="line"><span class="keyword">typeof</span> o2 <span class="comment">//&quot;object&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>理论知识：</strong>   </p>
<p>JavaScript 常被描述为一种基于原型的语言 (prototype-based language)——每个对象拥有一个<strong>原型对象</strong>，对象以其原型为模板、从原型继承方法和属性。<br>原型对象也可能拥有原型，并从中继承方法和属性，一层一层、以此类推。这种关系常被称为<strong>原型链</strong> (prototype chain)，它解释了为何一个对象会拥有定义在其他对象中的属性和方法。<br>准确地说，这些属性和方法定义在Object的构造器函数(constructor functions)之上的<code>prototype</code>属性上，而非对象实例本身。   </p>
<p><strong>个人理解：</strong>  </p>
<ul>
<li>JS中所有的函数对象，都有一个<code>prototype</code>属性，对应当前对象的原型，但普通对象没有，而<code>prototype</code>属性下还有一个<code>constructor</code>，指向这个函数。   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;&#125;;</span><br><span class="line">p.prototype;         <span class="comment">// undefined</span></span><br><span class="line">p <span class="keyword">instanceof</span> <span class="built_in">Object</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>)</span>&#123;&#125;; </span><br><span class="line">f.prototype;         <span class="comment">// object &#123;constructor: ƒ&#125;</span></span><br><span class="line">f === f.prototype.constructor;           <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span> === <span class="built_in">Object</span>.prototype.constructor; <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
<li>JS中所有的对象，都有一个<code>_proto_</code>属性，指向<strong>实例对象的构造函数原型</strong>（由于<code>_proto_</code>是个非标准属性，因此只有<strong>ff</strong>和<strong>chrome</strong>两个浏览器支持，标准方法是<code>Object.getPrototypeOf()</code>）。   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(); </span><br><span class="line">p._proto === Person.prototype;  <span class="comment">//true</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>修改原型：</strong><br>经常我们也需要对原型进行修改：  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 添加一个getName方法</span></span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;名字：&quot;</span> + <span class="built_in">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(<span class="string">&quot;leo&quot;</span>); </span><br><span class="line">p.getName();   <span class="comment">// &quot;名字：leo&quot;</span></span><br></pre></td></tr></table></figure>

<p>这里也说明了原型进行继承，<code>p</code>继承<code>Person</code>原型中新增的函数属性<code>getName</code>。</p>
<h2 id="3-2原型链"><a href="#3-2原型链" class="headerlink" title="3.2原型链"></a>3.2原型链</h2><p><strong>概念：</strong><br>javascript中，每个对象都会在内部生成一个 <code>proto</code> 属性，当我们访问一个对象属性时，如果这个对象不存在就回去 <code>proto</code> 指向的对象里面找，一层一层找下去，，知道找到为止，如果到了原型链顶端，还没找到，则返回<code>undefined</code>，这就是javascript原型链的概念。</p>
<p><img src="http://images.pingan8787.com/%E5%8E%9F%E5%9E%8B%E9%93%BE.jpg" alt="原型链："></p>
<p><strong>总结：</strong>  </p>
<ul>
<li>除了<code>Object</code>的<code>prototype</code>的原型是<code>null</code>，所有对象和原型都有自己的原型，对象的原型指向原型对象。   </li>
<li>JS中所有的东西都是对象,所有的东西都由<code>Object</code>衍生而来, 即所有东西原型链的终点指向null。   </li>
</ul>
<p><strong>更加详细的介绍，可以查看下面参考文章。</strong></p>
<hr>
<h1 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h1><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects">1.MDN JavaScript 对象入门</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/123976.htm">2.基于js中的原型</a></p>
<p><strong>本部分内容到这结束</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#110;&#x67;&#97;&#110;&#x38;&#55;&#x38;&#x37;&#x40;&#x71;&#x71;&#x2e;&#x63;&#111;&#x6d;">&#112;&#105;&#110;&#x67;&#97;&#110;&#x38;&#55;&#x38;&#x37;&#x40;&#x71;&#x71;&#x2e;&#x63;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/14/131-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9115-JS%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D/" data-id="ckts3ejss00204d9keqlia1bt" data-title="131-【JavaScript】【重温基础】15.JS对象介绍" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-130-【总结】2019全年计划" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/12/130-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%912019%E5%85%A8%E5%B9%B4%E8%AE%A1%E5%88%92/" class="article-date">
  <time class="dt-published" datetime="2019-01-12T14:37:02.000Z" itemprop="datePublished">2019-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/12/130-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%912019%E5%85%A8%E5%B9%B4%E8%AE%A1%E5%88%92/">130-【总结】2019全年计划</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#x6e;&#x67;&#x61;&#x6e;&#x38;&#55;&#x38;&#x37;&#64;&#113;&#113;&#x2e;&#x63;&#111;&#109;">&#x70;&#105;&#x6e;&#x67;&#x61;&#x6e;&#x38;&#55;&#x38;&#x37;&#64;&#113;&#113;&#x2e;&#x63;&#111;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p>我相信每个人都是幸运，而且聪明。<br>厚积才能薄发，基础牢固才能做好。<br>做出改变，做好调整，接受挑战，对自己有好处。<br>自律很重要。    </p>
</blockquote>
<p>以上是摘自我的《2018-全年计划》(这里就不放地址了)   </p>
<p>也许还有一句，我比较喜欢的：你在成就公司，公司也在成就你   </p>
<p>2019年对我来说，应该会变得更加理性，为人处世，日常生活，今年剩下的12个月（到2020年春节前），计划依旧分三方面：<code>工作</code>、<code>学习</code>和<code>生活</code>。   </p>
<h1 id="1、工作"><a href="#1、工作" class="headerlink" title="1、工作"></a>1、工作</h1><p>今年我会坚持在现在公司沉淀自己，完善自己，也多为公司出力。对于现在公司，我挺满意，产品也好，技术氛围也好，学习氛围还有同事间的氛围，我觉得都很符合我的理想工作环境。而且公司给我们提供很多很棒的资源，如<strong>技术分享会</strong>，<strong>书籍借阅</strong>，<strong>设备支持</strong>，<strong>实践机会</strong>等等，所以今年要利用好这些呢。<br>今年呢，工作上有这样的安排：   </p>
<ol>
<li>跟着公司项目的脚步，学习和开发，另外在需求提交之前，一定要做好UI稿<strong>核对</strong>，原型逻辑<strong>核对</strong>等，减少BUG。   </li>
<li>与小伙伴们分享自己的<strong>知识总结</strong>和<strong>技术分享</strong>，锻炼自己，思路和思维。   </li>
<li>向公司老大前辈们学习，对于一些<strong>问题的处理方式</strong>，和<strong>管理团队的方式</strong>等。   </li>
<li>努力尝试能为公司写一些工具，<strong>简化工作流程</strong>，或者<strong>提高工作效率</strong>等。  </li>
<li>多<strong>使用公司产品</strong>，<strong>参与产品运营</strong>，发现问题，提出改善意见等。  </li>
<li>研究一套项目基础架构（如公司现在这一套<code>flutter</code>的架构）。     </li>
</ol>
<p>这一年工作上，会有更多的挑战，已经能感受到了，还是必须要相信自己，踩坑填坑踩坑填坑…，增长经验沉淀技术咯。   </p>
<h1 id="2-学习"><a href="#2-学习" class="headerlink" title="2.学习"></a>2.学习</h1><p>经过这两年的程序员学习和工作生涯，也算是找到一套自己的学习方法，也是挺适合自己，相信今年的学习之路，效率和质量会高一些。<br>今年的话，学习的内容会更加集中，而不会想去年那样涉及那么多方面：   </p>
<h2 id="2-1学习内容"><a href="#2-1学习内容" class="headerlink" title="2.1学习内容"></a>2.1学习内容</h2><p><strong>前端知识（核心）</strong>：   </p>
<ol>
<li>前端基础：基础依然非常重要，今年需要更深入研究<code>JavaScript原理层面</code>（如引擎原理，工作原理等），还有CSS的一些不太常用的知识，另外ES规范还需复习，特别是如<code>Proxy</code>/<code>Set</code>和<code>Map</code>这类用的比较少的，但是用起来效率又特别高的这类知识。   </li>
<li>前端框架：<code>Angular6</code>（也有可能升级到7）这个必须学会，而且能用在工作中使用，也需要针对一些知识点去研究原理（这方面可以多跟宝哥还有其他人学习），其他框架，就不需要太去研究，现在觉得学好一个框架，研究清楚原理，其他都会是一样的。   </li>
<li>前端趋势：把握和跟进前端的发展趋势，新技术，新工具等，学着了解未来的变化。    </li>
</ol>
<p><strong>后端知识</strong>：  </p>
<ol>
<li>服务端开发：今年需要把<code>Nodejs</code>用于工作中了，开发一些工具，提高公司的开发效率，还是使用<code>Express</code>和<code>Koa</code>，重点朝<code>Koa</code>方向。   </li>
<li>数据库开发：搭配服务端开发，使用<code>Mongodb</code>和它延伸出来的<code>Mongoose</code>进行实际应用。   </li>
</ol>
<p><strong>混合开发</strong>：  </p>
<ol>
<li>APP开发：熟练mac环境开发，学习<code>flutter</code>，并且开始使用到公司的一些模块上面（看老大安排），毕竟这个技术很棒，今年自己也要自己开发一个App（demo会是现在在开始的TIMI，正式的后面再规划），<code>RN</code>和<code>Weex</code>今年不会花时间去研究，除非公司业务需要。   </li>
</ol>
<p><strong>博客</strong>：  </p>
<ol>
<li><p>个人博客：内容改版，新增栏目（待定），“作品”这个栏目内容要充实上去，同步自己在其他平台推送的文章。今年希望将【原创文章】突破到60篇（目前17篇）。   </p>
</li>
<li><p>Cute-JavaScrip：需要添加功能，访问量统计（博客也需要，使用百度流量统计），另外【JS基础系列】【面试题系列】必须完成，有空也需要改一改之前的文章。   </p>
</li>
<li><p>github：开源新项目，目前暂定2个（Flutter的两个），将学习过程中生产的一些笔记和代码，整理后也放到github上。另外【每日文章】继续维护，坚持第三年。    </p>
</li>
<li><p>掘金/思否/CSDN/简书：各个平台同步自己的原创文章，首发掘金，另外掘金今年加油<strong>粉丝突破5000</strong>，<strong>点赞突破1W</strong>（虽然不太看重这些）。   </p>
</li>
<li><p>公众号：继续维护，每日一篇，不做宣传，不去吸粉，只想积累，也许某一天，一个幸运的粉丝发现了它，希望能让他有种如获至宝的感觉。截至今天已经发了第106期   </p>
</li>
</ol>
<p><strong>机器学习</strong>：  </p>
<ol>
<li>深度学习：<code>tensorflow.js</code>有必要尝试下，毕竟对图像识别还是挺有兴趣的呢。    </li>
</ol>
<p><strong>技术书籍</strong>：  </p>
<ol>
<li>CSS：《CSS世界》（喜欢）。    </li>
<li>JS：《你不知道的JavaScript》上中下，也是加强基础和原理理解。     </li>
<li>算法：《算法图解》和《学习JavaScript数据结构与算法》（这本之前看过，但没看完），主要还是要多刷题，好的算法能提高代码质量和效率。<br>书太多，要取舍，研究好几本就好。   </li>
<li>架构：《前端技术架构》这本需要结合自己工作再去看。   </li>
</ol>
<p><strong>非技术书籍</strong>：  </p>
<ol>
<li>《地球上最后的夜晚》和《南方高速》，尝试着去理解作者想表达的思想和道理。   </li>
</ol>
<h2 id="2-2小结"><a href="#2-2小结" class="headerlink" title="2.2小结"></a>2.2小结</h2><p>这学习计划，看上去真的多，但是在我看来，这些都是必须学的。<br>所以，这当做是一整年的计划，我还需要拆分到具体的时间上面，做安排。<br>坚持！<br>自律！   </p>
<h1 id="3-生活"><a href="#3-生活" class="headerlink" title="3.生活"></a>3.生活</h1><p>生活，我向往简单，人和事。<br>新公司加班的现象比较常见，但是也是给我提供很多的学习机会。<br>这一年的生活，应该是健康，且有更多幸福感的。   </p>
<p><strong>日常生活</strong>：  </p>
<ol>
<li>业余生活：少熬夜（必须少熬夜），多锻炼（早操和睡前锻炼要坚持），坚持能自己做饭尽量自己做饭（早餐不吃外面），学习做饭做菜（找老妈讨教，换宿舍以后），毕竟我有做饭神器——小米电饭煲和小米电磁炉，研究下健康食谱。   </li>
<li>住宿条件：换个宿舍，不用多么高档，安静舒适，适合自己或者和未来女票。   </li>
<li>旅游：出去旅游一次，国内外都行（现在护照港澳通行证都有），需要旅游一次放松也开阔下视野。   </li>
</ol>
<p><strong>家庭生活</strong>：   </p>
<ol>
<li>未来的她：还需要好好加油，一起加油，一起做一件事的感觉会非常好。   </li>
<li>母亲：为母亲分担更多的压力，每个月多汇钱给母亲，帮忙开个店铺给母亲做，照顾好母亲。   </li>
<li>哥哥姐姐：常回家看看，多跟他们交流，今年找个项目再和哥哥一起做，亲兄弟团结。另外哥哥今年结婚，我要给他包个很大的红包。   </li>
</ol>
<p>2019全年规划基本如此，不论多与少，需要分配好，偶尔迷茫的时候，会给我带来动力。和去年一样，加油让自己24小时过程26小时。   </p>
<p>沉淀自己，自律生活，为人和善，为公司，为家庭，也为自己。   </p>
<p>leo 2019.01.12</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/12/130-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%912019%E5%85%A8%E5%B9%B4%E8%AE%A1%E5%88%92/" data-id="ckts3ejsr001x4d9kh1k4gm23" data-title="130-【总结】2019全年计划" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-129-【JavaScript】canvas转图片格式并下载" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/09/129-%E3%80%90JavaScript%E3%80%91canvas%E8%BD%AC%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E5%B9%B6%E4%B8%8B%E8%BD%BD/" class="article-date">
  <time class="dt-published" datetime="2019-01-09T13:29:04.000Z" itemprop="datePublished">2019-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/09/129-%E3%80%90JavaScript%E3%80%91canvas%E8%BD%AC%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E5%B9%B6%E4%B8%8B%E8%BD%BD/">129-【JavaScript】canvas转图片格式并下载</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#x6e;&#x67;&#97;&#110;&#x38;&#55;&#56;&#x37;&#64;&#113;&#x71;&#x2e;&#99;&#x6f;&#x6d;">&#x70;&#105;&#x6e;&#x67;&#97;&#110;&#x38;&#55;&#56;&#x37;&#64;&#113;&#x71;&#x2e;&#99;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas转img并下载<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> arr = [</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">200</span>,<span class="number">200</span>],[<span class="number">0</span>,<span class="number">400</span>]],<span class="attr">color</span>:<span class="string">&quot;red&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">0</span>,<span class="number">0</span>],[<span class="number">400</span>,<span class="number">0</span>],[<span class="number">200</span>,<span class="number">200</span>]],<span class="attr">color</span>:<span class="string">&quot;orange&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">0</span>,<span class="number">400</span>],[<span class="number">100</span>,<span class="number">300</span>],[<span class="number">200</span>,<span class="number">400</span>]],<span class="attr">color</span>:<span class="string">&quot;yellow&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">100</span>,<span class="number">300</span>],[<span class="number">200</span>,<span class="number">200</span>],[<span class="number">300</span>,<span class="number">300</span>],[<span class="number">200</span>,<span class="number">400</span>]],<span class="attr">color</span>:<span class="string">&quot;green&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">300</span>,<span class="number">100</span>],[<span class="number">200</span>,<span class="number">200</span>],[<span class="number">300</span>,<span class="number">300</span>]],<span class="attr">color</span>:<span class="string">&quot;blue&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">300</span>,<span class="number">100</span>],[<span class="number">400</span>,<span class="number">0</span>],[<span class="number">400</span>,<span class="number">200</span>],[<span class="number">300</span>,<span class="number">300</span>]],<span class="attr">color</span>:<span class="string">&quot;indigo&quot;</span>&#125;,</span></span><br><span class="line"><span class="javascript">        &#123;<span class="attr">locations</span>:[[<span class="number">200</span>,<span class="number">400</span>],[<span class="number">400</span>,<span class="number">400</span>],[<span class="number">400</span>,<span class="number">200</span>]],<span class="attr">color</span>:<span class="string">&quot;purple&quot;</span>&#125;</span></span><br><span class="line"><span class="javascript">    ];</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> oCanvas = <span class="built_in">document</span>.getElementById(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> ctx = oCanvas.getContext(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span></span><br><span class="line"><span class="javascript">        draw(arr[i],ctx);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">item,ctx</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        ctx.beginPath();</span></span><br><span class="line"><span class="javascript">        ctx.moveTo(item.locations[<span class="number">0</span>][<span class="number">0</span>],item.locations[<span class="number">0</span>][<span class="number">1</span>]);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;item.locations.length;i++)&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> x = item.locations[i][<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> y = item.locations[i][<span class="number">1</span>];</span></span><br><span class="line"><span class="javascript">            ctx.lineTo(x,y);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="number">1234567</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        ctx.closePath();</span></span><br><span class="line"><span class="javascript">        </span></span><br><span class="line"><span class="javascript">        ctx.fillStyle = item.color;</span></span><br><span class="line"><span class="javascript">        ctx.fill();</span></span><br><span class="line"><span class="javascript">        </span></span><br><span class="line"><span class="javascript">        ctx.strokeStyle = <span class="string">&quot;#000&quot;</span>;</span></span><br><span class="line"><span class="javascript">        ctx.lineWidth = <span class="number">2</span>;</span></span><br><span class="line"><span class="javascript">        ctx.stroke();</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> imgId = <span class="built_in">document</span>.getElementById(<span class="string">&quot;imgId&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;save&quot;</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        downLoad(saveAsPNG(canvas));</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 保存成png格式的图片</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">saveAsPNG</span>(<span class="params">canvas</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> canvas.toDataURL(<span class="string">&quot;image/png&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 保存成jpg格式的图片</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">saveAsJPG</span>(<span class="params">canvas</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> canvas.toDataURL(<span class="string">&quot;image/jpeg&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 保存成bmp格式的图片  目前浏览器支持性不好</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">saveAsBMP</span>(<span class="params">canvas</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> canvas.toDataURL(<span class="string">&quot;image/bmp&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="javascript">     * <span class="doctag">@author </span>web得胜</span></span></span><br><span class="line"><span class="comment"><span class="javascript">     * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>url 需要下载的文件地址</span></span></span><br><span class="line"><span class="comment"><span class="javascript">     * */</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">downLoad</span>(<span class="params">url</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> oA = <span class="built_in">document</span>.createElement(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="javascript">        oA.download = <span class="string">&#x27;&#x27;</span>;<span class="comment">// 设置下载的文件名，默认是&#x27;下载&#x27;</span></span></span><br><span class="line"><span class="javascript">        oA.href = url;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.body.appendChild(oA);</span></span><br><span class="line"><span class="javascript">        oA.click();</span></span><br><span class="line"><span class="javascript">        oA.remove(); <span class="comment">// 下载之后把创建的元素删除</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhaodesheng/p/9848496.html">阅读原文</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/09/129-%E3%80%90JavaScript%E3%80%91canvas%E8%BD%AC%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E5%B9%B6%E4%B8%8B%E8%BD%BD/" data-id="ckts3ejsp001t4d9kh27jarlc" data-title="129-【JavaScript】canvas转图片格式并下载" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/demo/" rel="tag">demo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-128-【JavaScript】【重温基础】14-元编程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/07/128-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9114-%E5%85%83%E7%BC%96%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2019-01-07T15:57:02.000Z" itemprop="datePublished">2019-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/07/128-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9114-%E5%85%83%E7%BC%96%E7%A8%8B/">128-【JavaScript】【重温基础】14.元编程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://images.pingan8787.com/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E5%B0%81%E9%9D%A2.png" alt="重温基础封面"></p>
<hr>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#x6e;&#103;&#97;&#x6e;&#56;&#55;&#56;&#x37;&#x40;&#113;&#113;&#x2e;&#x63;&#111;&#109;">&#x70;&#105;&#x6e;&#103;&#97;&#x6e;&#56;&#55;&#56;&#x37;&#x40;&#113;&#113;&#x2e;&#x63;&#111;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
</tbody></table>
<hr>
<p>本文是 <strong>重温基础</strong> 系列文章的第十四篇。<br><strong>这是第一个基础系列的最后一篇，后面会开始复习一些中级的知识了，欢迎持续关注呀</strong><br>接下来会统一整理到我的<a target="_blank" rel="noopener" href="http://js.pingan8787.com/">【Cute-JavaScript】</a>的<strong>JavaScript基础系列</strong>中。   </p>
<p>今日感受：独乐乐不如众乐乐。</p>
<p><strong>本章节复习的是JS中的元编程，涉及的更多的是ES6的新特性。</strong>    </p>
<h1 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h1><p>元编程，其实我是这么理解的：<strong>让代码自动写代码,可以更改源码底层的功能</strong>。<br>元，是指程序本身。<br>有理解不到位，还请指点，具体详细的介绍，可以查看<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%85%83%E7%BC%96%E7%A8%8B">维基百科 元编程</a> 。<br>从ES6开始，JavaScrip添加了对<code>Proxy</code>和<code>Reflect</code>对象的支持，允许我们连接并定义基本语言操作的自定义行为（如属性查找，赋值，枚举和函数调用等），从而实现JavaScrip的元级别编程。   </p>
<ul>
<li><code>Reflect</code>:  用于替换直接调用<code>Object</code>的方法，并不是一个函数对象，也没有<code>constructor</code>方法，所以不能用<code>new</code>操作符。   </li>
<li><code>Proxy</code>:  用于自定义对象的行为，如修改<code>set</code>和<code>get</code>方法，可以说是ES5中<code>Object.defineProperty()</code>方法的ES6升级版。   </li>
<li>两者联系：  API完全一致，但<code>Reflect</code>一般在<code>Proxy</code>需要处理默认行为的时候使用。   </li>
</ul>
<p><strong>参考资料</strong>：   </p>
<table>
<thead>
<tr>
<th>名称</th>
<th>地址</th>
</tr>
</thead>
<tbody><tr>
<td><code>Reflect</code></td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">MDN Reflect</a></td>
</tr>
<tr>
<td><code>Proxy</code></td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">MDN Proxy</a></td>
</tr>
<tr>
<td>元编程</td>
<td><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Meta_programming">MDN 元编程</a></td>
</tr>
</tbody></table>
<p><strong>本文主要从Proxy介绍，还会有几个案例，实际看下怎么使用。</strong>   </p>
<h1 id="2-Proxy介绍"><a href="#2-Proxy介绍" class="headerlink" title="2. Proxy介绍"></a>2. Proxy介绍</h1><p><code>proxy</code> 用于修改某些操作的<strong>默认行为</strong>，可以理解为一种拦截外界对目标对象访问的一种机制，从而对外界的访问进行过滤和修改，即代理某些操作，也称“<strong>代理器</strong>”。   </p>
<h2 id="2-1-基础使用"><a href="#2-1-基础使用" class="headerlink" title="2.1 基础使用"></a>2.1 基础使用</h2><p>基本语法：   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler);</span><br></pre></td></tr></table></figure>
<p><code>proxy</code>实例化需要传入两个参数，<code>target</code>参数表示所要拦截的目标对象，<code>handler</code>参数也是一个对象，用来定制拦截行为。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params">target, handler</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;leo&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">p.name; <span class="comment">// leo</span></span><br><span class="line">p.age;  <span class="comment">// leo</span></span><br><span class="line">p.abcd; <span class="comment">// leo</span></span><br></pre></td></tr></table></figure>
<p>上述<code>a</code>实例中，在第二个参数中定义了<code>get</code>方法，来拦截外界访问，并且<code>get</code>方法接收两个参数，分别是<strong>目标对象</strong>和<strong>所要访问的属性</strong>，所以不管外部访问对象中任何属性都会执行<code>get</code>方法返回<code>leo</code>。   </p>
<p><strong>注意</strong>：   </p>
<ul>
<li>只能使用<code>Proxy</code>实例的对象才能使用这些操作。  </li>
<li>如果<code>handler</code>没有设置拦截，则直接返回原对象。  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> handler = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, handler);</span><br><span class="line">p.a = <span class="string">&#x27;leo&#x27;</span>; </span><br><span class="line">target.a;  <span class="comment">// &#x27;leo&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>*同个拦截器函数，设置多个拦截操作**：  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">get</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;get方法&#x27;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">apply</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;apply方法&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
这里还有一个简单的案例：   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> handler = &#123;</span><br><span class="line">    <span class="attr">get</span> : <span class="function"><span class="keyword">function</span> (<span class="params">target, name</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name <span class="keyword">in</span> target ? target[name] : <span class="number">16</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span> (&#123;&#125;, handler);</span><br><span class="line">p.a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(p.a , p.b);</span><br><span class="line"><span class="comment">// 1   16</span></span><br></pre></td></tr></table></figure>
这里因为 <code>p.a = 1</code> 定义了<code>p</code>中的<code>a</code>属性，值为<code>1</code>，而没有定义<code>b</code>属性，所以<code>p.a</code>会得到<code>1</code>，而<code>p.b</code>会得到<code>undefined</code>从而使用<code>name in target ? target[name] : 16;</code>返回的默认值<code>16</code>；</li>
</ul>
<p><strong><code>Proxy</code>支持的13种拦截操作</strong>：<br>13种拦截操作的详细介绍：<a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/proxy">打开阮一峰老师的链接</a>。   </p>
<ul>
<li><p><code>get(target, propKey, receiver)</code>：<br>拦截对象属性的读取，比如proxy.foo和proxy[‘foo’]。</p>
</li>
<li><p><code>set(target, propKey, value, receiver)</code>：<br>拦截对象属性的设置，比如proxy.foo = v或proxy[‘foo’] = v，返回一个布尔值。</p>
</li>
<li><p><code>has(target, propKey)</code>：<br>拦截propKey in proxy的操作，返回一个布尔值。</p>
</li>
<li><p><code>deleteProperty(target, propKey)</code>：<br>拦截delete proxy[propKey]的操作，返回一个布尔值。</p>
</li>
<li><p><code>ownKeys(target)</code>：<br>拦截Object.getOwnPropertyNames(proxy)、Object.getOwnPropertySymbols(proxy)、Object.keys(proxy)、for…in循环，返回一个数组。该方法返回目标对象所有自身的属性的属性名，而Object.keys()的返回结果仅包括目标对象自身的可遍历属性。</p>
</li>
<li><p><code>getOwnPropertyDescriptor(target, propKey)</code>：<br>拦截Object.getOwnPropertyDescriptor(proxy, propKey)，返回属性的描述对象。</p>
</li>
<li><p><code>defineProperty(target, propKey, propDesc)</code>：<br>拦截Object.defineProperty(proxy, propKey, propDesc）、Object.defineProperties(proxy, propDescs)，返回一个布尔值。</p>
</li>
<li><p><code>preventExtensions(target)</code>：<br>拦截Object.preventExtensions(proxy)，返回一个布尔值。</p>
</li>
<li><p><code>getPrototypeOf(target)</code>：<br>拦截Object.getPrototypeOf(proxy)，返回一个对象。</p>
</li>
<li><p><code>isExtensible(target)</code>：<br>拦截Object.isExtensible(proxy)，返回一个布尔值。</p>
</li>
<li><p><code>setPrototypeOf(target, proto)</code>：<br>拦截Object.setPrototypeOf(proxy, proto)，返回一个布尔值。如果目标对象是函数，那么还有两种额外操作可以拦截。</p>
</li>
<li><p><code>apply(target, object, args)</code>：<br>拦截 Proxy 实例作为函数调用的操作，比如proxy(…args)、proxy.call(object, …args)、proxy.apply(…)。</p>
</li>
<li><p><code>construct(target, args)</code>：<br>拦截 Proxy 实例作为构造函数调用的操作，比如new proxy(…args)。</p>
</li>
</ul>
<h2 id="2-2-取消Proxy实例"><a href="#2-2-取消Proxy实例" class="headerlink" title="2.2 取消Proxy实例"></a>2.2 取消Proxy实例</h2><p>使用<code>Proxy.revocable</code>方法取消<code>Proxy</code>实例。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> b = &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params">target, name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[[&quot;</span> + name + <span class="string">&quot;]]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> revoke = <span class="built_in">Proxy</span>.revocable(a, b);</span><br><span class="line"><span class="keyword">let</span> proxy = revoke.proxy;</span><br><span class="line"></span><br><span class="line">proxy.age;           <span class="comment">// &quot;[[age]]&quot;</span></span><br><span class="line">revoke.revoke();</span><br><span class="line">proxy.age;           <span class="comment">// Uncaught TypeError: Cannot perform &#x27;get&#x27; on a proxy that has been revoked</span></span><br><span class="line"></span><br><span class="line">proxy.age = <span class="number">10</span>;      <span class="comment">// Uncaught TypeError: Cannot perform &#x27;set&#x27; on a proxy that has been revoked</span></span><br><span class="line"><span class="keyword">delete</span> proxy.age;    <span class="comment">// Uncaught TypeError: Cannot perform &#x27;deleteProperty&#x27; on a proxy that has been revoked</span></span><br><span class="line"><span class="keyword">typeof</span> proxy;        <span class="comment">// &quot;object&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-实现-Web服务的客户端"><a href="#2-3-实现-Web服务的客户端" class="headerlink" title="2.3 实现 Web服务的客户端"></a>2.3 实现 Web服务的客户端</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = createWebService(<span class="string">&#x27;http://le.com/data&#x27;</span>);</span><br><span class="line">service.employees().than(<span class="function"><span class="params">json</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> employees = <span class="built_in">JSON</span>.parse(json);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWebService</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">        get(target, propKey, receiver&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="function">() =&gt;</span> httpGet(url+<span class="string">&#x27;/&#x27;</span>+propKey);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="3-Proxy实践"><a href="#3-Proxy实践" class="headerlink" title="3. Proxy实践"></a>3. Proxy实践</h1><h2 id="3-1-数据拦截验证"><a href="#3-1-数据拦截验证" class="headerlink" title="3.1 数据拦截验证"></a>3.1 数据拦截验证</h2><p>通过<code>Proxy</code>代理对象的<code>set</code>和<code>get</code>方法来进行拦截数据，像<code>Vue</code>就是用数据拦截来实现数据绑定。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> handler = &#123;</span><br><span class="line">    <span class="comment">// 拦截并处理get方法</span></span><br><span class="line">    <span class="comment">// 可以理解为设置get方法返回的默认值</span></span><br><span class="line">    <span class="attr">get</span> : <span class="function"><span class="keyword">function</span> (<span class="params">target, key</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key <span class="keyword">in</span> target ? target[key] : <span class="number">30</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 拦截并处理set方法</span></span><br><span class="line">    <span class="comment">// 可以理解为设置set方法的默认行为</span></span><br><span class="line">    <span class="attr">set</span> : <span class="function"><span class="keyword">function</span> (<span class="params">target, key, value</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(key === <span class="string">&quot;age&quot;</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">Number</span>.isInteger(value))&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;age不是一个整数！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (value &gt; <span class="number">200</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;age不能大于200！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 保存默认行为</span></span><br><span class="line">        target[key] = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, handler);</span><br><span class="line">p.a = <span class="number">10</span>;         <span class="comment">// p.a   =&gt; 10</span></span><br><span class="line">p.b = <span class="literal">undefined</span>;  <span class="comment">// p.b   =&gt; undefined</span></span><br><span class="line">p.c;              <span class="comment">// 默认值 30</span></span><br><span class="line">p.age = <span class="number">100</span>;      <span class="comment">// p.age =&gt; 100</span></span><br><span class="line">p.age = <span class="number">300</span>;      <span class="comment">// Uncaught TypeError: age不能大于200！</span></span><br><span class="line">p.age = <span class="string">&quot;leo&quot;</span>;    <span class="comment">// Uncaught TypeError: age不是一个整数！</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2-函数节流"><a href="#3-2-函数节流" class="headerlink" title="3.2 函数节流"></a>3.2 函数节流</h2><p>通过拦截<code>handler.apply()</code>方法的调用，实现函数只能在1秒之后才能再次被调用，经常可以用在防止重复事件的触发。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="function">(<span class="params">fun, time</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 获取最后点击时间</span></span><br><span class="line">    <span class="keyword">let</span> last = <span class="built_in">Date</span>.now() - time;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span> (fun, &#123;</span><br><span class="line">        <span class="function"><span class="title">apply</span>(<span class="params">target, context, args</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">Date</span>.now() - last &gt;= time)&#123;</span><br><span class="line">                fun.bind(target)(args);</span><br><span class="line">                <span class="comment">// 重复设置当前时间</span></span><br><span class="line">                last = <span class="built_in">Date</span>.now();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;点击触发&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> time = <span class="number">1000</span>; <span class="comment">// 设置时间</span></span><br><span class="line"><span class="keyword">let</span> proxyObj = p(p1, time);</span><br><span class="line"><span class="comment">// 监听滚动事件</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, proxyObj);</span><br></pre></td></tr></table></figure>

<h2 id="3-3-实现单例模式"><a href="#3-3-实现单例模式" class="headerlink" title="3.3 实现单例模式"></a>3.3 实现单例模式</h2><p>通过拦截<code>construct</code>方法，让不同实例指向相同的<code>constructer</code>，实现单例模式。   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="function"><span class="keyword">function</span>(<span class="params">fun</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> instance;</span><br><span class="line">    <span class="keyword">let</span> handler = &#123;</span><br><span class="line">        <span class="comment">// 拦截construct方法</span></span><br><span class="line">        <span class="attr">construct</span>: <span class="function"><span class="keyword">function</span>(<span class="params">targer, args</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!instance)&#123;</span><br><span class="line">                instance = <span class="keyword">new</span> fun();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(fun, handler);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个construct案例</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cons</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.value = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> Cons();</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> Cons();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作</span></span><br><span class="line">p1.value = <span class="number">100</span>; </span><br><span class="line"><span class="comment">// p1.value =&gt; 100 , p2.value =&gt; 0</span></span><br><span class="line"><span class="comment">// 因为不是相同实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过Proxy实现单例</span></span><br><span class="line"><span class="keyword">let</span> singleton = p(Cons);</span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> singleton();</span><br><span class="line"><span class="keyword">let</span> p4 = <span class="keyword">new</span> singleton();</span><br><span class="line">p3.value = <span class="number">130</span>; </span><br><span class="line"><span class="comment">// p1.value =&gt; 130 , p2.value =&gt; 130</span></span><br><span class="line"><span class="comment">// 现在是相同实例</span></span><br></pre></td></tr></table></figure>


<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Meta_programming">1.MDN 元编程</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/buzhiqianduan/p/9687804.html">2. ES6中的元编程-Proxy &amp; Reflect</a><br><strong>本部分内容到这结束</strong></p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#x70;&#105;&#110;&#103;&#x61;&#110;&#x38;&#55;&#x38;&#55;&#64;&#x71;&#113;&#x2e;&#99;&#x6f;&#x6d;">&#x70;&#105;&#110;&#103;&#x61;&#110;&#x38;&#55;&#x38;&#55;&#64;&#x71;&#113;&#x2e;&#99;&#x6f;&#x6d;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>JS小册</td>
<td>js.pingan8787.com</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/07/128-%E3%80%90JavaScript%E3%80%91%E3%80%90%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80%E3%80%9114-%E5%85%83%E7%BC%96%E7%A8%8B/" data-id="ckts3ejsp001r4d9kb6z8d2ek" data-title="128-【JavaScript】【重温基础】14.元编程" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/9/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/11/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E5%8A%A8%E7%94%BB/" rel="tag">CSS动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6-ES7-ES8/" rel="tag">ES6/ES7/ES8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eslint/" rel="tag">Eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/" rel="tag">GraphQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5/" rel="tag">H5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" rel="tag">HTTP协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hybrid/" rel="tag">Hybrid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/" rel="tag">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Numpy/" rel="tag">Numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tensorflow/" rel="tag">Tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TyeScript/" rel="tag">TyeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/" rel="tag">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/demo/" rel="tag">demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" rel="tag">全栈开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" rel="tag">前端探索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" rel="tag">前端知乎系列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" rel="tag">常用技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" rel="tag">微前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" rel="tag">源码精读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%83%AD%E9%97%A8/" rel="tag">热门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" rel="tag">生活杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" rel="tag">网络请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 11.88px;">Angular</a> <a href="/tags/CSS/" style="font-size: 18.13px;">CSS</a> <a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 12.5px;">CSS动画</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/ES6-ES7-ES8/" style="font-size: 10.63px;">ES6/ES7/ES8</a> <a href="/tags/Eslint/" style="font-size: 10px;">Eslint</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/H5/" style="font-size: 10px;">H5</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 11.88px;">HTTP</a> <a href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" style="font-size: 11.25px;">HTTP协议</a> <a href="/tags/Hybrid/" style="font-size: 10.63px;">Hybrid</a> <a href="/tags/JavaScript/" style="font-size: 19.38px;">JavaScript</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Nodejs/" style="font-size: 11.25px;">Nodejs</a> <a href="/tags/Numpy/" style="font-size: 10.63px;">Numpy</a> <a href="/tags/Python/" style="font-size: 17.5px;">Python</a> <a href="/tags/React/" style="font-size: 12.5px;">React</a> <a href="/tags/Tensorflow/" style="font-size: 10.63px;">Tensorflow</a> <a href="/tags/TyeScript/" style="font-size: 10px;">TyeScript</a> <a href="/tags/TypeScript/" style="font-size: 11.25px;">TypeScript</a> <a href="/tags/Vuejs/" style="font-size: 14.38px;">Vuejs</a> <a href="/tags/WebSocket/" style="font-size: 10px;">WebSocket</a> <a href="/tags/Webpack/" style="font-size: 15.63px;">Webpack</a> <a href="/tags/demo/" style="font-size: 10.63px;">demo</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">中间件</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 16.25px;">人工智能</a> <a href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" style="font-size: 11.25px;">全栈开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 20px;">前端开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" style="font-size: 11.25px;">前端探索</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" style="font-size: 10.63px;">前端知乎系列</a> <a href="/tags/%E5%8E%9F%E5%88%9B/" style="font-size: 18.75px;">原创</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" style="font-size: 10.63px;">常用技术</a> <a href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">微前端</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 13.75px;">总结</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 10.63px;">构建工具</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10.63px;">正则表达式</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 10px;">源码</a> <a href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" style="font-size: 10px;">源码精读</a> <a href="/tags/%E7%83%AD%E9%97%A8/" style="font-size: 10px;">热门</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" style="font-size: 10px;">生活杂记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13.13px;">算法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 10px;">编译原理</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" style="font-size: 10px;">网络请求</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 14.38px;">读书笔记</a> <a href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" style="font-size: 16.88px;">重温基础</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 10px;">面试题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/28/227-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%9C%A8%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8SVG%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87/">227-【总结】如何优雅的在微信小程序使用SVG字体图标</a>
          </li>
        
          <li>
            <a href="/2021/07/28/226-%E3%80%90HTTP%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%AE%A1%E7%90%86HTTP%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9F/">226-【HTTP】如何优雅的管理HTTP请求和响应拦截器？</a>
          </li>
        
          <li>
            <a href="/2021/07/28/225-%E3%80%90Vue%E3%80%91%E4%BB%8E%E6%89%8B%E5%86%99Vue3%E7%9A%84Reactivity%E5%BC%80%E5%A7%8B%E6%B7%B1%E5%85%A5Vue3%E6%BA%90%E7%A0%81/">225-【Vue】从手写Vue3的Reactivity开始深入Vue3源码</a>
          </li>
        
          <li>
            <a href="/2021/05/30/224-%E3%80%90Chrome%E3%80%915%E4%B8%AAChrome%E8%B0%83%E8%AF%95%E6%B7%B7%E5%90%88%E5%BA%94%E7%94%A8%E7%9A%84%E6%8A%80%E5%B7%A7/">224-【Chrome】5个Chrome调试混合应用的技巧</a>
          </li>
        
          <li>
            <a href="/2021/03/19/223-%E3%80%90%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2%E3%80%91%E6%8E%A2%E7%B4%A2Snabbdom%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/">223-【前端探索】探索Snabbdom模块系统原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
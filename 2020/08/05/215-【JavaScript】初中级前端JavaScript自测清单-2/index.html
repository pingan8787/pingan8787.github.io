<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>215-【JavaScript】初中级前端JavaScript自测清单-2 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="前言在《初中级前端 JavaScript 自测清单 - 1》部分中，和大家简单过了一遍 JavaScript 基础知识，没看过的朋友可以回顾一下😁 本系列文章是我在我们团队内部的“现代 JavaScript 突击队”，第一期学习内容为《现代 JavaScript 教程》系列的第二部分输出内容，希望这份自测清单，能够帮助大家巩固知识，温故知新。 本部分内容，以 JavaScript 对象为主，大致">
<meta property="og:type" content="article">
<meta property="og:title" content="215-【JavaScript】初中级前端JavaScript自测清单-2">
<meta property="og:url" content="http://example.com/2020/08/05/215-%E3%80%90JavaScript%E3%80%91%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AFJavaScript%E8%87%AA%E6%B5%8B%E6%B8%85%E5%8D%95-2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言在《初中级前端 JavaScript 自测清单 - 1》部分中，和大家简单过了一遍 JavaScript 基础知识，没看过的朋友可以回顾一下😁 本系列文章是我在我们团队内部的“现代 JavaScript 突击队”，第一期学习内容为《现代 JavaScript 教程》系列的第二部分输出内容，希望这份自测清单，能够帮助大家巩固知识，温故知新。 本部分内容，以 JavaScript 对象为主，大致">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://images.pingan8787.com/JavaScript-Base/section2/xmind.png">
<meta property="og:image" content="http://images.pingan8787.com/JavaScript-Base/section2/object-copy.png">
<meta property="og:image" content="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-1.jpg">
<meta property="og:image" content="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-2.jpg">
<meta property="og:image" content="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-3.jpg">
<meta property="og:image" content="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-4.jpg">
<meta property="og:image" content="http://images.pingan8787.com/2019_07_12guild_page.png">
<meta property="article:published_time" content="2020-08-05T13:56:55.000Z">
<meta property="article:modified_time" content="2021-09-20T03:31:47.657Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="前端开发">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="原创">
<meta property="article:tag" content="读书笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://images.pingan8787.com/JavaScript-Base/section2/xmind.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-215-【JavaScript】初中级前端JavaScript自测清单-2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/05/215-%E3%80%90JavaScript%E3%80%91%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AFJavaScript%E8%87%AA%E6%B5%8B%E6%B8%85%E5%8D%95-2/" class="article-date">
  <time class="dt-published" datetime="2020-08-05T13:56:55.000Z" itemprop="datePublished">2020-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      215-【JavaScript】初中级前端JavaScript自测清单-2
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在<a target="_blank" rel="noopener" href="https://juejin.im/post/6846687584710557710">《初中级前端 JavaScript 自测清单 - 1》</a>部分中，和大家简单过了一遍 JavaScript 基础知识，没看过的朋友可以回顾一下😁</p>
<p>本系列文章是我在我们团队内部的“<strong>现代 JavaScript 突击队</strong>”，第一期学习内容为<a target="_blank" rel="noopener" href="https://zh.javascript.info/">《现代 JavaScript 教程》</a>系列的<strong>第二部分</strong>输出内容，希望这份自测清单，能够帮助大家巩固知识，温故知新。</p>
<p>本部分内容，以 <strong>JavaScript 对象</strong>为主，大致包括以下内容：<br><img src="http://images.pingan8787.com/JavaScript-Base/section2/xmind.png" alt="初中级前端 JavaScript 自测清单 2.png"></p>
<h1 id="一、对象"><a href="#一、对象" class="headerlink" title="一、对象"></a>一、对象</h1><p>JavaScript 有八种数据额类型，有七种原始类型，它们值只包含一种类型（字符串，数字或其他），而对象是用来<strong>保存键值对和更复杂实体。</strong><br>我们可以通过使用带有可选<strong>属性列表</strong>的花括号 <code>**&#123;...&#125;**</code> 来创建对象，一个属性就是一个键值对 <code>&#123;&quot;key&quot; : &quot;value&quot;&#125;</code> ，其中键（ <code>key</code> ）是一个字符串（或称属性名），值（ <code>value</code> ）可以是任何类型。</p>
<h2 id="1-创建对象"><a href="#1-创建对象" class="headerlink" title="1. 创建对象"></a>1. 创建对象</h2><p>我们可以使用 2 种方式来创建一个新对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 通过“构造函数”创建</span></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 通过“字面量”创建</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="2-对象文本和属性"><a href="#2-对象文本和属性" class="headerlink" title="2. 对象文本和属性"></a>2. 对象文本和属性</h2><p>创建对象时，可以初始化对象的一些属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>  : <span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后可以对该对象进行属性对<strong>增删改查</strong>操作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 增加属性</span></span><br><span class="line">user.addr = <span class="string">&quot;China&quot;</span>;</span><br><span class="line"><span class="comment">// user =&gt; &#123;name: &quot;leo&quot;, age: 18, addr: &quot;China&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除属性</span></span><br><span class="line"><span class="keyword">delete</span> user.addr</span><br><span class="line"><span class="comment">// user =&gt; &#123;name: &quot;leo&quot;, age: 18&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改属性</span></span><br><span class="line">user.age  = <span class="number">20</span>;</span><br><span class="line"><span class="comment">// user =&gt; &#123;name: &quot;leo&quot;, age: 20&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找属性</span></span><br><span class="line">user.age;</span><br><span class="line"><span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<h2 id="3-方括号的使用"><a href="#3-方括号的使用" class="headerlink" title="3. 方括号的使用"></a>3. 方括号的使用</h2><p>当然对象的键（ <code>key</code> ）也可以是多词属性，但必须加引号，使用的时候，必须使用方括号（ <code>[]</code> ）读取：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="string">&quot;my interest&quot;</span> : [<span class="string">&quot;coding&quot;</span>, <span class="string">&quot;football&quot;</span>, <span class="string">&quot;cycling&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">user[<span class="string">&quot;my interest&quot;</span>]; <span class="comment">// [&quot;coding&quot;, &quot;football&quot;, &quot;cycling&quot;]</span></span><br><span class="line"><span class="keyword">delete</span> user[<span class="string">&quot;my interest&quot;</span>];</span><br></pre></td></tr></table></figure>

<p>我们也可以在方括号中使用变量，来获取属性值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>  : <span class="number">18</span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ok</span></span><br><span class="line">user[key]; <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">user[key] = <span class="string">&quot;pingan&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line">user.key; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="4-计算属性"><a href="#4-计算属性" class="headerlink" title="4. 计算属性"></a>4. 计算属性</h2><p>创建对象时，可以在对象字面量中使用方括号，即 <strong>计算属性</strong> ：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> inputKey = prompt(<span class="string">&quot;请输入key&quot;</span>, <span class="string">&quot;age&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	[key] : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">  [inputKey] : <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 当用户在 prompt 上输入 &quot;age&quot; 时，user 变成下面样子：</span></span><br><span class="line"><span class="comment">// &#123;name: &quot;leo&quot;, age: 18&#125;</span></span><br></pre></td></tr></table></figure>
<p>当然，计算属性也可以是表达式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	[<span class="string">&quot;my_&quot;</span> + key] : <span class="string">&quot;leo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">user[<span class="string">&quot;my_&quot;</span> + key]; <span class="comment">// &quot;leo&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-属性名简写"><a href="#5-属性名简写" class="headerlink" title="5. 属性名简写"></a>5. 属性名简写</h2><p>实际开发中，可以将相同的属性名和属性值简写成更短的语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原本书写方式</span></span><br><span class="line"><span class="keyword">let</span> getUser = <span class="function"><span class="keyword">function</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		<span class="attr">name</span>: name,</span><br><span class="line">    <span class="attr">age</span>: age</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写方式</span></span><br><span class="line"><span class="keyword">let</span> getUser = <span class="function"><span class="keyword">function</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		name,</span><br><span class="line">    age</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以混用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原本书写方式</span></span><br><span class="line"><span class="keyword">let</span> getUser = <span class="function"><span class="keyword">function</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		<span class="attr">name</span>: name,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写方式</span></span><br><span class="line"><span class="keyword">let</span> getUser = <span class="function"><span class="keyword">function</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		name,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-对象属性存在性检测"><a href="#6-对象属性存在性检测" class="headerlink" title="6. 对象属性存在性检测"></a>6. 对象属性存在性检测</h2><h3 id="6-1-使用-in-关键字"><a href="#6-1-使用-in-关键字" class="headerlink" title="6.1 使用 in 关键字"></a>6.1 使用 in 关键字</h3><p>该方法可以判断<strong>对象的自有属性和继承来的属性</strong>是否存在。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>&#125;;</span><br><span class="line"><span class="string">&quot;name&quot;</span> <span class="keyword">in</span> user;            <span class="comment">//true，自有属性存在</span></span><br><span class="line"><span class="string">&quot;age&quot;</span>  <span class="keyword">in</span> user;            <span class="comment">//false</span></span><br><span class="line"><span class="string">&quot;toString&quot;</span> <span class="keyword">in</span> user;     <span class="comment">//true，是一个继承属性</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2使用对象的-hasOwnProperty-方法。"><a href="#6-2使用对象的-hasOwnProperty-方法。" class="headerlink" title="6.2使用对象的 hasOwnProperty() 方法。"></a>6.2使用对象的 hasOwnProperty() 方法。</h3><p>该方法只能判断<strong>自有属性</strong>是否存在，对于<strong>继承属性</strong>会返回 <code>false</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>&#125;;</span><br><span class="line">user.hasOwnProperty(<span class="string">&quot;name&quot;</span>);       <span class="comment">//true，自有属性中有 name</span></span><br><span class="line">user.hasOwnProperty(<span class="string">&quot;age&quot;</span>);        <span class="comment">//false，自有属性中不存在 age</span></span><br><span class="line">user.hasOwnProperty(<span class="string">&quot;toString&quot;</span>);   <span class="comment">//false，这是一个继承属性，但不是自有属性</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-用-undefined-判断"><a href="#6-3-用-undefined-判断" class="headerlink" title="6.3 用 undefined 判断"></a>6.3 用 undefined 判断</h3><p>该方法可以判断对象的<strong>自有属性和继承属性</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>&#125;;</span><br><span class="line">user.name !== <span class="literal">undefined</span>;        <span class="comment">// true</span></span><br><span class="line">user.age  !== <span class="literal">undefined</span>;        <span class="comment">// false</span></span><br><span class="line">user.toString !== <span class="literal">undefined</span>     <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>该方法存在一个问题，如果属性的值就是 <code>undefined</code>  的话，该方法不能返回想要的结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="literal">undefined</span>&#125;;</span><br><span class="line">user.name !== <span class="literal">undefined</span>;        <span class="comment">// false，属性存在，但值是undefined</span></span><br><span class="line">user.age  !== <span class="literal">undefined</span>;        <span class="comment">// false</span></span><br><span class="line">user.toString !== <span class="literal">undefined</span>;    <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="6-4-在条件语句中直接判断"><a href="#6-4-在条件语句中直接判断" class="headerlink" title="6.4 在条件语句中直接判断"></a>6.4 在条件语句中直接判断</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line"><span class="keyword">if</span>(user.name) user.name = <span class="string">&quot;pingan&quot;</span>;</span><br><span class="line"><span class="comment">//如果 name 是 undefine, null, false, &quot; &quot;, 0 或 NaN,它将保持不变</span></span><br><span class="line"></span><br><span class="line">user; <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="7-对象循环遍历"><a href="#7-对象循环遍历" class="headerlink" title="7. 对象循环遍历"></a>7. 对象循环遍历</h2><p>当我们需要遍历对象中每一个属性，可以使用 <code>for...in</code> 语句来实现</p>
<h3 id="7-1-for…in-循环"><a href="#7-1-for…in-循环" class="headerlink" title="7.1 for…in 循环"></a>7.1 for…in 循环</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a> 语句以任意顺序遍历一个对象的除 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol"><code>Symbol</code></a> 以外的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties">可枚举</a>属性。<br><strong>注意</strong> ： <code>for...in</code> 不应该应用在一个数组，其中索引顺序很重要。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&quot;leo&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>  : <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> user)&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(k, user[k]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// name leo</span></span><br><span class="line"><span class="comment">// age 18</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-ES7-新增方法"><a href="#7-2-ES7-新增方法" class="headerlink" title="7.2 ES7 新增方法"></a>7.2 ES7 新增方法</h3><p>ES7中新增加的 <code>Object.values()</code>和<code>Object.entries()</code>与之前的<code>Object.keys()</code>类似，返回数组类型。</p>
<h4 id="1-Object-keys"><a href="#1-Object-keys" class="headerlink" title="1. Object.keys()"></a>1. Object.keys()</h4><p>返回一个数组，成员是参数对象自身的（不含继承的）所有<strong>可遍历属性</strong>的健名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(user); <span class="comment">// [&quot;name&quot;, &quot;age&quot;]</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Object-values"><a href="#2-Object-values" class="headerlink" title="2. Object.values()"></a>2. Object.values()</h4><p>返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历属性的键值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.values(user); <span class="comment">// [&quot;leo&quot;, 18]</span></span><br></pre></td></tr></table></figure>

<p>如果参数不是对象，则返回空数组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object.values(10);   // []</span><br><span class="line">Object.values(true); // []</span><br></pre></td></tr></table></figure>

<h4 id="3-Object-entries"><a href="#3-Object-entries" class="headerlink" title="3. Object.entries()"></a>3. Object.entries()</h4><p>返回一个数组，成员是参数对象自身的（不含继承的）所有<strong>可遍历属性</strong>的键值对数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.entries(user);</span><br><span class="line"><span class="comment">// [[&quot;name&quot;,&quot;leo&quot;],[&quot;age&quot;,18]]</span></span><br></pre></td></tr></table></figure>

<p>手动实现<code>Object.entries()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Generator函数实现：  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">entries</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj))&#123;</span><br><span class="line">        <span class="keyword">yield</span> [k ,obj[k]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 非Generator函数实现：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entries</span> (<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj))&#123;</span><br><span class="line">        arr.push([k, obj[k]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-Object-getOwnPropertyNames-Obj"><a href="#4-Object-getOwnPropertyNames-Obj" class="headerlink" title="4. Object.getOwnPropertyNames(Obj)"></a>4. Object.getOwnPropertyNames(Obj)</h4><p>该方法返回一个数组，它包含了对象 <code>Obj</code> 所有拥有的属性（<strong>无论是否可枚举</strong>）的名称。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(user);</span><br><span class="line"><span class="comment">// [&quot;name&quot;, &quot;age&quot;]</span></span><br></pre></td></tr></table></figure>

<h1 id="二、对象拷贝"><a href="#二、对象拷贝" class="headerlink" title="二、对象拷贝"></a>二、对象拷贝</h1><p>参考文章<a target="_blank" rel="noopener" href="https://juejin.im/post/5d235d1ef265da1b855c7b5d">《搞不懂JS中赋值·浅拷贝·深拷贝的请看这里》</a></p>
<h2 id="1-赋值操作"><a href="#1-赋值操作" class="headerlink" title="1. 赋值操作"></a>1. 赋值操作</h2><p>首先回顾下基本数据类型和引用数据类型：</p>
<ul>
<li>基本类型</li>
</ul>
<p>概念：基本类型值在内存中占据固定大小，保存在<code>栈内存</code>中（不包含<code>闭包</code>中的变量）。<br>常见包括：undefined,null,Boolean,String,Number,Symbol</p>
<ul>
<li>引用类型</li>
</ul>
<p>概念：引用类型的值是对象，保存在<code>堆内存</code>中。而栈内存存储的是对象的变量标识符以及对象在堆内存中的存储地址(引用)，引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。<br>常见包括：Object,Array,Date,Function,RegExp等</p>
<h3 id="1-1-基本数据类型赋值"><a href="#1-1-基本数据类型赋值" class="headerlink" title="1.1 基本数据类型赋值"></a>1.1 基本数据类型赋值</h3><p>在栈内存中的数据发生数据变化的时候，系统会自动为新的变量分配一个新的之值在栈内存中，两个变量相互独立，互不影响的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user  = <span class="string">&quot;leo&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> user1 = user;</span><br><span class="line">user1 = <span class="string">&quot;pingan&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(user);  <span class="comment">// &quot;leo&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(user1); <span class="comment">// &quot;pingan&quot; </span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-引用数据类型赋值"><a href="#1-2-引用数据类型赋值" class="headerlink" title="1.2 引用数据类型赋值"></a>1.2 引用数据类型赋值</h3><p>在 JavaScript 中，变量不存储对象本身，而是存储其“内存中的地址”，换句话说就是存储对其的“引用”。<br>如下面 <code>leo</code>  变量只是保存对<code>user</code> 对象对应引用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> leo  = user;</span><br></pre></td></tr></table></figure>
<p>其他变量也可以引用 <code>user</code> 对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo1 = user;</span><br><span class="line"><span class="keyword">let</span> leo2 = user;</span><br></pre></td></tr></table></figure>
<p>但是由于变量保存的是引用，所以当我们修改变量 <code>leo</code> \ <code>leo1</code> \ <code>leo2</code> 这些值时，<strong>也会改动到引用对象</strong> <code>user</code> ，但当 <code>user</code> 修改，则其他引用该对象的变量，值都会发生变化：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">leo.name = <span class="string">&quot;pingan&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo);   <span class="comment">// &#123;name: &quot;pingan&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(leo1);  <span class="comment">// &#123;name: &quot;pingan&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(leo2);  <span class="comment">// &#123;name: &quot;pingan&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(user);  <span class="comment">// &#123;name: &quot;pingan&quot;, age: 18&#125;</span></span><br><span class="line"></span><br><span class="line">user.name = <span class="string">&quot;pingan8787&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo);   <span class="comment">// &#123;name: &quot;pingan8787&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(leo1);  <span class="comment">// &#123;name: &quot;pingan8787&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(leo2);  <span class="comment">// &#123;name: &quot;pingan8787&quot;, age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(user);  <span class="comment">// &#123;name: &quot;pingan8787&quot;, age: 18&#125;</span></span><br></pre></td></tr></table></figure>
<p>这个过程中涉及变量地址指针指向问题，这里暂时不展开讨论，有兴趣的朋友可以网上查阅相关资料。</p>
<h2 id="2-对象比较"><a href="#2-对象比较" class="headerlink" title="2. 对象比较"></a>2. 对象比较</h2><p>当两个变量引用同一个对象时，它们无论是 <code>==</code> 还是 <code>===</code> 都会返回 <code>true</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> leo  = user;</span><br><span class="line"><span class="keyword">let</span> leo1 = user;</span><br><span class="line">leo ==  leo1;   <span class="comment">// true</span></span><br><span class="line">leo === leo1;   <span class="comment">// true</span></span><br><span class="line">leo ==  user;   <span class="comment">// true</span></span><br><span class="line">leo === user;   <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>但如果两个变量是空对象 <code>&#123;&#125;</code> ，则不相等：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo1 = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo2 = &#123;&#125;;</span><br><span class="line">leo1 ==  leo2;  <span class="comment">// false</span></span><br><span class="line">leo1 === leo2;  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h2 id="3-浅拷贝"><a href="#3-浅拷贝" class="headerlink" title="3. 浅拷贝"></a>3. 浅拷贝</h2><h3 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1 概念"></a>3.1 概念</h3><p>概念：<strong>新的对象复制已有对象中非对象属性的值和对象属性的引用</strong>。也可以理解为：<strong>一个新的对象直接拷贝已存在的对象的对象属性的引用</strong>，即浅拷贝。</p>
<p>浅拷贝<strong>只对第一层属性进行了拷贝</strong>，当第一层的属性值是基本数据类型时，新的对象和原对象互不影响，但是如果第一层的属性值是复杂数据类型，那么新对象和原对象的属性值其指向的是同一块内存地址。</p>
<p>通过示例代码演示没有使用浅拷贝场景：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例1 对象原始拷贝</span></span><br><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">skill</span>: &#123; <span class="attr">JavaScript</span>: <span class="number">90</span>, <span class="attr">CSS</span>: <span class="number">80</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo = user;</span><br><span class="line">leo.name = <span class="string">&quot;leo1&quot;</span>;</span><br><span class="line">leo.skill.CSS = <span class="number">90</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo.name);      <span class="comment">// &quot;leo1&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(user.name);     <span class="comment">// &quot;leo1&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(leo.skill.CSS); <span class="comment">// 90</span></span><br><span class="line"><span class="built_in">console</span>.log(user.skill.CSS);<span class="comment">// 90</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例2 数组原始拷贝</span></span><br><span class="line"><span class="keyword">let</span> user = [<span class="string">&quot;leo&quot;</span>, <span class="string">&quot;pingan&quot;</span>, &#123;<span class="attr">name</span>: <span class="string">&quot;pingan8787&quot;</span>&#125;];</span><br><span class="line"><span class="keyword">let</span> leo  = user;</span><br><span class="line">leo[<span class="number">0</span>] = <span class="string">&quot;pingan888&quot;</span>;</span><br><span class="line">leo[<span class="number">2</span>][<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;pingan999&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo[<span class="number">0</span>]);          <span class="comment">// &quot;pingan888&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(user[<span class="number">0</span>]);         <span class="comment">// &quot;pingan888&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(leo[<span class="number">2</span>][<span class="string">&quot;name&quot;</span>]);  <span class="comment">// &quot;pingan999&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(user[<span class="number">2</span>][<span class="string">&quot;name&quot;</span>]); <span class="comment">// &quot;pingan999&quot;</span></span><br></pre></td></tr></table></figure>
<p>从上面示例代码可以看出：<br>由于对象被直接拷贝，相当于拷贝 <strong>引用数据类型</strong> ，所以在新对象修改任何值时，都会改动到源数据。</p>
<p>接下来实现浅拷贝，对比以下。</p>
<h3 id="3-2-实现浅拷贝"><a href="#3-2-实现浅拷贝" class="headerlink" title="3.2 实现浅拷贝"></a>3.2 实现浅拷贝</h3><h4 id="1-Object-assign"><a href="#1-Object-assign" class="headerlink" title="1. Object.assign()"></a>1. Object.assign()</h4><p>语法： <code>Object.assign(target, ...sources)</code><br>ES6中拷贝对象的方法，接受的第一个参数是拷贝的目标target，剩下的参数是拷贝的源对象sources（可以是多个）。<br>详细介绍，可以阅读文档<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">《MDN Object.assign》</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例1 对象浅拷贝</span></span><br><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">skill</span>: &#123; <span class="attr">JavaScript</span>: <span class="number">90</span>, <span class="attr">CSS</span>: <span class="number">80</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Object</span>.assign(&#123;&#125;, user);</span><br><span class="line">leo.name = <span class="string">&quot;leo1&quot;</span>;</span><br><span class="line">leo.skill.CSS = <span class="number">90</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo.name);      <span class="comment">// &quot;leo1&quot; ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(user.name);     <span class="comment">// &quot;leo&quot;  ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(leo.skill.CSS); <span class="comment">// 90</span></span><br><span class="line"><span class="built_in">console</span>.log(user.skill.CSS);<span class="comment">// 90</span></span><br></pre></td></tr></table></figure>
<p>从打印结果可以看出，浅拷贝只是在根属性(对象的第一层级)创建了一个新的对象，但是对于属性的值是对象的话只会拷贝一份相同的内存地址。</p>
<p><code>Object.assign()</code> 使用注意：</p>
<ul>
<li>只拷贝源对象的自身属性（不拷贝继承属性）；</li>
<li>不会拷贝对象不可枚举的属性；</li>
<li>属性名为<code>Symbol</code> 值的属性，可以被Object.assign拷贝；</li>
<li><code>undefined</code>和<code>null</code>无法转成对象，它们不能作为<code>Object.assign</code>参数，但是可以作为源对象。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(<span class="literal">undefined</span>); <span class="comment">// 报错</span></span><br><span class="line"><span class="built_in">Object</span>.assign(<span class="literal">null</span>);      <span class="comment">// 报错</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, <span class="literal">undefined</span>); <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, <span class="literal">null</span>);      <span class="comment">// &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(user, <span class="literal">undefined</span>) === user; <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.assign(user, <span class="literal">null</span>)      === user; <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-Array-prototype-slice"><a href="#2-Array-prototype-slice" class="headerlink" title="2. Array.prototype.slice()"></a>2. Array.prototype.slice()</h4><p>语法： <code>arr.slice([begin[, end]])</code><br><code>slice()</code> 方法返回一个新的数组对象，这一对象是一个由 <code>begin</code> 和 <code>end</code> 决定的原数组的浅拷贝（包括 <code>begin</code>，不包括<code>end</code>）。原始数组不会被改变。<br>详细介绍，可以阅读文档<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice">《MDN Array slice》</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例 数组深拷贝</span></span><br><span class="line"><span class="keyword">let</span> user = [<span class="string">&quot;leo&quot;</span>, <span class="string">&quot;pingan&quot;</span>, &#123;<span class="attr">name</span>: <span class="string">&quot;pingan8787&quot;</span>&#125;];</span><br><span class="line"><span class="keyword">let</span> leo  = <span class="built_in">Array</span>.prototype.slice.call(user);</span><br><span class="line">leo[<span class="number">0</span>] = <span class="string">&quot;pingan888&quot;</span>;</span><br><span class="line">leo[<span class="number">2</span>][<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;pingan999&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo[<span class="number">0</span>]);          <span class="comment">// &quot;pingan888&quot;  ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(user[<span class="number">0</span>]);         <span class="comment">// &quot;leo&quot;        ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(leo[<span class="number">2</span>][<span class="string">&quot;name&quot;</span>]);  <span class="comment">// &quot;pingan999&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(user[<span class="number">2</span>][<span class="string">&quot;name&quot;</span>]); <span class="comment">// &quot;pingan999&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Array-prototype-concat"><a href="#3-Array-prototype-concat" class="headerlink" title="3. Array.prototype.concat()"></a>3. Array.prototype.concat()</h4><p>语法： <code>var new_array = old_array.concat(value1[, value2[, ...[, valueN]]])</code><br><code>concat()</code> 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组。<br>详细介绍，可以阅读文档<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat">《MDN Array concat》</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user  = [&#123;<span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>&#125;,   &#123;<span class="attr">age</span>: <span class="number">18</span>&#125;];</span><br><span class="line"><span class="keyword">let</span> user1 = [&#123;<span class="attr">age</span>: <span class="number">20</span>&#125;,&#123;<span class="attr">addr</span>: <span class="string">&quot;fujian&quot;</span>&#125;];</span><br><span class="line"><span class="keyword">let</span> user2 = user.concat(user1);</span><br><span class="line">user1[<span class="number">0</span>][<span class="string">&quot;age&quot;</span>] = <span class="number">25</span>;</span><br><span class="line"><span class="built_in">console</span>.log(user);  <span class="comment">// [&#123;&quot;name&quot;:&quot;leo&quot;&#125;,&#123;&quot;age&quot;:18&#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(user1); <span class="comment">// [&#123;&quot;age&quot;:25&#125;,&#123;&quot;addr&quot;:&quot;fujian&quot;&#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(user2); <span class="comment">// [&#123;&quot;name&quot;:&quot;leo&quot;&#125;,&#123;&quot;age&quot;:18&#125;,&#123;&quot;age&quot;:25&#125;,&#123;&quot;addr&quot;:&quot;fujian&quot;&#125;]</span></span><br></pre></td></tr></table></figure>
<p><code>Array.prototype.concat</code> 也是一个浅拷贝，只是在根属性(对象的第一层级)创建了一个新的对象，但是对于属性的值是对象的话只会拷贝一份相同的内存地址。</p>
<h4 id="4-拓展运算符（…）"><a href="#4-拓展运算符（…）" class="headerlink" title="4. 拓展运算符（…）"></a>4. 拓展运算符（…）</h4><p>语法： <code>var cloneObj = &#123; ...obj &#125;;</code><br>扩展运算符也是浅拷贝，对于值是对象的属性无法完全拷贝成2个不同对象，但是如果属性都是基本类型的值的话，使用扩展运算符也是优势方便的地方。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">skill</span>: &#123; <span class="attr">JavaScript</span>: <span class="number">90</span>, <span class="attr">CSS</span>: <span class="number">80</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo = &#123;...user&#125;;</span><br><span class="line">leo.name = <span class="string">&quot;leo1&quot;</span>;</span><br><span class="line">leo.skill.CSS = <span class="number">90</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo.name);      <span class="comment">// &quot;leo1&quot; ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(user.name);     <span class="comment">// &quot;leo&quot;  ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(leo.skill.CSS); <span class="comment">// 90</span></span><br><span class="line"><span class="built_in">console</span>.log(user.skill.CSS);<span class="comment">// 90</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-手写浅拷贝"><a href="#3-3-手写浅拷贝" class="headerlink" title="3.3 手写浅拷贝"></a>3.3 手写浅拷贝</h3><p>实现原理：新的对象复制已有对象中非对象属性的值和对象属性的<strong>引用</strong>,也就是说对象属性并不复制到内存。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneShallow</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> target = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(source, key)) &#123;</span><br><span class="line">            target[key] = source[key];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>for in</strong></li>
</ul>
<p>for…in语句以任意顺序遍历一个对象自有的、继承的、<code>可枚举的</code>、非Symbol的属性。对于每个不同的属性，语句都会被执行。</p>
<ul>
<li><strong>hasOwnProperty</strong></li>
</ul>
<p>该函数返回值为布尔值，所有继承了 Object 的对象都会继承到 <code>hasOwnProperty</code> 方法，和 <code>in</code> 运算符不同，该函数会忽略掉那些从原型链上继承到的属性和自身属性。<br>语法：<code>obj.hasOwnProperty(prop)</code><br><code>prop</code> 是要检测的属性<strong>字符串名称</strong>或者<code>Symbol</code>。</p>
<h2 id="4-深拷贝"><a href="#4-深拷贝" class="headerlink" title="4. 深拷贝"></a>4. 深拷贝</h2><h3 id="4-1-概念"><a href="#4-1-概念" class="headerlink" title="4.1 概念"></a>4.1 概念</h3><p>复制变量值，对于引用数据，则递归至基本类型后，再复制。深拷贝后的对象<strong>与原来的对象完全隔离</strong>，互不影响，对一个对象的修改并不会影响另一个对象。</p>
<h3 id="4-2-实现深拷贝"><a href="#4-2-实现深拷贝" class="headerlink" title="4.2 实现深拷贝"></a>4.2 实现深拷贝</h3><h4 id="1-JSON-parse-JSON-stringify"><a href="#1-JSON-parse-JSON-stringify" class="headerlink" title="1. JSON.parse(JSON.stringify())"></a>1. JSON.parse(JSON.stringify())</h4><p>其原理是把一个对象序列化成为一个JSON字符串，将对象的内容转换成字符串的形式再保存在磁盘上，再用<code>JSON.parse()</code> 反序列化将JSON字符串变成一个新的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>, <span class="attr">skill</span>: &#123; <span class="attr">JavaScript</span>: <span class="number">90</span>, <span class="attr">CSS</span>: <span class="number">80</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(user));</span><br><span class="line">leo.name = <span class="string">&quot;leo1&quot;</span>;</span><br><span class="line">leo.skill.CSS = <span class="number">90</span>;</span><br><span class="line"><span class="built_in">console</span>.log(leo.name);      <span class="comment">// &quot;leo1&quot; ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(user.name);     <span class="comment">// &quot;leo&quot;  ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(leo.skill.CSS); <span class="comment">// 90 ⚠️ 差异！</span></span><br><span class="line"><span class="built_in">console</span>.log(user.skill.CSS);<span class="comment">// 80 ⚠️ 差异！</span></span><br></pre></td></tr></table></figure>
<p><code>JSON.stringify()</code> 使用注意：</p>
<ul>
<li>拷贝的对象的值中如果有函数， <code>undefined</code> ， <code>symbol</code> 则经过 <code>JSON.stringify()</code> `序列化后的JSON字符串中这个键值对会消失；</li>
<li>无法拷贝不可枚举的属性，无法拷贝对象的原型链；</li>
<li>拷贝 <code>Date</code> 引用类型会变成字符串；</li>
<li>拷贝 <code>RegExp</code> 引用类型会变成空对象；</li>
<li>对象中含有 <code>NaN</code> 、 <code>Infinity</code> 和 <code>-Infinity</code> ，则序列化的结果会变成 <code>null</code> ；</li>
<li>无法拷贝对象的循环应用(即 <code>obj[key] = obj</code> )。</li>
</ul>
<h4 id="2-第三方库"><a href="#2-第三方库" class="headerlink" title="2. 第三方库"></a>2. 第三方库</h4><h3 id="4-3-手写深拷贝"><a href="#4-3-手写深拷贝" class="headerlink" title="4.3 手写深拷贝"></a>4.3 手写深拷贝</h3><p>核心思想是<strong>递归</strong>，遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝。 实现代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isObject = <span class="function"><span class="params">obj</span> =&gt;</span> <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj != <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneDeep</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!isObject(source)) <span class="keyword">return</span> source; <span class="comment">// 非对象返回自身</span></span><br><span class="line">    <span class="keyword">const</span> target = <span class="built_in">Array</span>.isArray(source) ? [] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.hasOwnProperty.call(source, key)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isObject(source[key])) &#123;</span><br><span class="line">                target[key] = cloneDeep(source[key]); <span class="comment">// 注意这里</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                target[key] = source[key];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该方法缺陷： 遇到循环引用，会陷入一个循环的递归过程，从而导致爆栈。<br>其他写法，可以阅读<a target="_blank" rel="noopener" href="https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1">《如何写出一个惊艳面试官的深拷贝?》</a> 。</p>
<h2 id="5-小结"><a href="#5-小结" class="headerlink" title="5. 小结"></a>5. 小结</h2><p><strong>浅拷贝</strong>：将对象的每个属性进行依次复制，但是当对象的属性值是引用类型时，实质复制的是其引用，当引用指向的值改变时也会跟着变化。</p>
<p><strong>深拷贝</strong>：复制变量值，对于引用数据，则递归至基本类型后，再复制。深拷贝后的对象<strong>与原来的对象完全隔离</strong>，互不影响，对一个对象的修改并不会影响另一个对象。</p>
<p><strong>深拷贝和浅拷贝是针对复杂数据类型来说的，浅拷贝只拷贝一层，而深拷贝是层层拷贝。</strong><br><img src="http://images.pingan8787.com/JavaScript-Base/section2/object-copy.png" alt="深拷贝和浅拷贝"></p>
<h1 id="三、垃圾回收机制（GC）"><a href="#三、垃圾回收机制（GC）" class="headerlink" title="三、垃圾回收机制（GC）"></a>三、垃圾回收机制（GC）</h1><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6_(%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%B8)">垃圾回收（Garbage Collection，缩写为GC）</a>是一种自动的存储器管理机制。当某个程序占用的一部分内存空间不再被这个程序访问时，这个程序会借助垃圾回收算法向操作系统归还这部分内存空间。垃圾回收器可以减轻程序员的负担，也减少程序中的错误。垃圾回收最早起源于LISP语言。<br>目前许多语言如Smalltalk、Java、C#和D语言都支持垃圾回收器，我们熟知的 JavaScript 具有自动垃圾回收机制。</p>
<p><strong>在 JavaScript 中，原始类型的数据被分配到栈空间中，引用类型的数据会被分配到堆空间中。</strong></p>
<h2 id="1-栈空间中的垃圾回收"><a href="#1-栈空间中的垃圾回收" class="headerlink" title="1. 栈空间中的垃圾回收"></a>1. 栈空间中的垃圾回收</h2><p>当函数 <code>showName</code> 调用完成后，通过下移 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/esp/35173">ESP（Extended Stack Pointer）</a>指针，来销毁 <code>showName</code> 函数，之后调用其他函数时，将覆盖掉旧内存，存放另一个函数的执行上下文，实现垃圾回收。<br><img src="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-1.jpg"><br>图片来自《浏览器工作原理与实践》</p>
<h2 id="2-堆空间中的垃圾回收"><a href="#2-堆空间中的垃圾回收" class="headerlink" title="2. 堆空间中的垃圾回收"></a>2. 堆空间中的垃圾回收</h2><p>堆中数据垃圾回收策略的基础是：<a target="_blank" rel="noopener" href="https://plumbr.io/handbook/garbage-collection-in-java/generational-hypothesis"><strong>代际假说</strong>（The Generational Hypothesis）</a>。即：</p>
<ol>
<li>大部分对象在内存中存在时间极短，很多对象很快就不可访问。</li>
<li>不死的对象将活得更久。</li>
</ol>
<p>这两个特点不仅仅适用于 JavaScript，同样适用于大多数的动态语言，如 Java、Python 等。<br>V8 引擎将堆空间分为<strong>新生代</strong>（存放生存<strong>时间短</strong>的对象）和<strong>老生代</strong>（存放生存<strong>时间长</strong>的对象）两个区域，并使用不同的垃圾回收器。</p>
<ul>
<li>副垃圾回收器，主要负责新生代的垃圾回收。</li>
<li>主垃圾回收器，主要负责老生代的垃圾回收。</li>
</ul>
<p>不管是哪种垃圾回收器，都使用相同垃圾回收流程：<strong>标记活动对象和非活动对象，回收非活动对象的内存，最后内存整理。</strong><br>**</p>
<h3 id="1-1-副垃圾回收器"><a href="#1-1-副垃圾回收器" class="headerlink" title="1.1 副垃圾回收器"></a>1.1 副垃圾回收器</h3><p>使用 Scavenge 算法处理，将新生代空间对半分为两个区域，一个对象区域，一个空闲区域。<br><img src="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-2.jpg"><br>图片来自《浏览器工作原理与实践》</p>
<p>执行流程：</p>
<ul>
<li>新对象存在在<strong>对象区域</strong>，当对象区域将要写满时，执行一次垃圾回收；</li>
<li>垃圾回收过程中，首先对对象区域中的垃圾做标记，然后副垃圾回收器将存活的对象复制并有序排列到空闲区域，相当于完成内存整理。</li>
<li>复制完成后，将对象区域和空闲区域翻转，完成垃圾回收操作，这也让新生代中两块区域无限重复使用。</li>
</ul>
<p>当然，这也存在一些问题：若复制操作的数据较大则影响清理效率。<br>JavaScript 引擎的解决方式是：将新生代区域设置得比较小，并采用对象晋升策略（经过两次回收仍存活的对象，会被移动到老生区），避免因为新生代区域较小引起存活对象装满整个区域的问题。</p>
<h3 id="1-2-主垃圾回收器"><a href="#1-2-主垃圾回收器" class="headerlink" title="1.2 主垃圾回收器"></a>1.2 主垃圾回收器</h3><p>分为：<strong>标记 - 清除（Mark-Sweep）算法</strong>，和<strong>标记 - 整理（Mark-Compact）算法</strong>。</p>
<p><strong>a)标记 - 清除（Mark-Sweep）算法</strong><br><strong>过程：</strong></p>
<ul>
<li>标记过程：从一组根元素开始遍历整个元素，能到达的元素为活动对象，反之为垃圾数据；</li>
<li>清除过程：清理被标记的数据，并产生大量碎片内存。（缺点：导致大对象无法分配到足够的连续内存）</li>
</ul>
<p><img src="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-3.jpg"><br>图片来自《浏览器工作原理与实践》</p>
<p><strong>b)标记 - 整理（Mark-Compact）算法</strong><br><strong>过程：</strong></p>
<ul>
<li>标记过程：从一组根元素开始遍历整个元素，能到达的元素为活动对象，反之为垃圾数据；</li>
<li>整理过程：将所有存活的对象，向一段移动，然后清除端边界以外的内容。</li>
</ul>
<p><img src="hhttp://images.pingan8787.com/JavaScript-Base/section2/v8-4.jpg"><br>图片来自《浏览器工作原理与实践》</p>
<h2 id="3-拓展阅读"><a href="#3-拓展阅读" class="headerlink" title="3. 拓展阅读"></a>3. 拓展阅读</h2><p>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/justloveyou_/article/details/71216049">《图解Java 垃圾回收机制》</a><br>2.<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management">《MDN 内存管理》</a></p>
<h1 id="四、对象方法和-this"><a href="#四、对象方法和-this" class="headerlink" title="四、对象方法和 this"></a>四、对象方法和 this</h1><h2 id="1-对象方法"><a href="#1-对象方法" class="headerlink" title="1. 对象方法"></a>1. 对象方法</h2><p>具体介绍可阅读 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Method_definitions">《MDN 方法的定义》</a> 。<br>将作为对象属性的方法称为“对象方法”，如下面 <code>user</code> 对象的 <code>say</code> 方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">&quot;hello!&quot;</span>)&#125;;</span><br><span class="line"></span><br><span class="line">user.say = say;  <span class="comment">// 赋值到对象上</span></span><br><span class="line">user.say(); <span class="comment">// &quot;hello!&quot;</span></span><br></pre></td></tr></table></figure>
<p>也可以使用更加简洁的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">say</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 简写为</span></span><br><span class="line">	say ()&#123;<span class="built_in">console</span>.log(<span class="string">&quot;hello!&quot;</span>)&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ES8 async 方法</span></span><br><span class="line">	<span class="keyword">async</span> say ()&#123;<span class="regexp">/.../</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line">user.say();</span><br></pre></td></tr></table></figure>
<p>当然对象方法的名称，还支持计算的属性名称作为方法名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hello = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	[<span class="string">&#x27;say&#x27;</span> + hello]()&#123;<span class="built_in">console</span>.log(<span class="string">&quot;hello!&quot;</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line">user[<span class="string">&#x27;say&#x27;</span> + hello](); <span class="comment">// &quot;hello!&quot;</span></span><br></pre></td></tr></table></figure>


<p>另外需要注意的是：所有方法定义不是构造函数，如果您尝试实例化它们，将抛出<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="function"><span class="title">say</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> user.say; <span class="comment">// TypeError: user.say is not a constructor</span></span><br></pre></td></tr></table></figure>

<h2 id="2-this"><a href="#2-this" class="headerlink" title="2. this"></a>2. this</h2><h3 id="2-1-this-简介"><a href="#2-1-this-简介" class="headerlink" title="2.1 this 简介"></a>2.1 this 简介</h3><p>当对象方法需要使用对象中的属性，可以使用 <code>this</code> 关键字：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user.say(); <span class="comment">// &quot;hello leo&quot;</span></span><br></pre></td></tr></table></figure>
<p>当代码 <code>user.say()</code> 执行过程中， <code>this</code> 指的是 <code>user</code> 对象。当然也可以直接使用变量名 <code>user</code> 来引用 <code>say()</code> 方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;user.name&#125;</span>`</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user.say(); <span class="comment">// &quot;hello leo&quot;</span></span><br></pre></td></tr></table></figure>
<p>但是这样并不安全，因为 <code>user</code> 对象可能赋值给另外一个变量，并且将其他值赋值给 <code>user</code> 对象，就可能导致报错：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">say</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;user.name&#125;</span>`</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> leo = user;</span><br><span class="line">user = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">leo.say(); <span class="comment">// Uncaught TypeError: Cannot read property &#x27;name&#x27; of null</span></span><br></pre></td></tr></table></figure>
<p>但将  <code>user.name</code>  改成 <code>this.name</code> 代码便正常运行。</p>
<h3 id="2-2-this-取值"><a href="#2-2-this-取值" class="headerlink" title="2.2 this 取值"></a>2.2 this 取值</h3><p><code>this</code> 的值是在 <strong>代码运行时计算出来</strong> 的，它的值取决于代码上下文：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;leo&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> admin = &#123;<span class="attr">name</span>: <span class="string">&quot;pingan&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">user.fun = say;</span><br><span class="line">admin.fun = say;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数内部 this 是指“点符号前面”的对象</span></span><br><span class="line">user.fun();     <span class="comment">// &quot;hello leo&quot;</span></span><br><span class="line">admin.fun();    <span class="comment">// &quot;hello pingan&quot;</span></span><br><span class="line">admin[<span class="string">&#x27;fun&#x27;</span>](); <span class="comment">// &quot;hello pingan&quot;</span></span><br></pre></td></tr></table></figure>
<p>规则：如果 <code>obj.fun()</code> 被调用，则 <code>this</code> 在 <code>fun</code> 函数调用期间是 <code>obj</code> ，所以上面的 <code>this</code> 先是 <code>user</code> ，然后是 <code>admin</code> 。</p>
<p>但是在全局环境中，无论是否开启严格模式， <code>this</code> 都指向全局对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span> == <span class="built_in">window</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">this</span>.b = <span class="number">10</span>;</span><br><span class="line">a === <span class="built_in">this</span>.b; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-箭头函数没有自己的-this"><a href="#2-3-箭头函数没有自己的-this" class="headerlink" title="2.3 箭头函数没有自己的 this"></a>2.3 箭头函数没有自己的 this</h3><p>箭头函数比较特别，没有自己的 <code>this</code> ，如果有引用 <code>this</code> 的话，则指向外部正常函数，下面例子中， <code>this</code> 指向 <code>user.say()</code> 方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">	<span class="attr">name</span> : <span class="string">&#x27;leo&#x27;</span>,</span><br><span class="line">  <span class="attr">say</span> : <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">hello</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">let</span> fun = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`hello <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    fun();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">user.say();   <span class="comment">// hello      =&gt; say() 外部函数是 window</span></span><br><span class="line">user.hello(); <span class="comment">// hello leo  =&gt; fun() 外部函数是 hello</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-call-apply-bind"><a href="#2-4-call-apply-bind" class="headerlink" title="2.4 call / apply / bind"></a>2.4 call / apply / bind</h3><p>详细可以阅读<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1479810">《js基础-关于call,apply,bind的一切》</a> 。<br>当我们想把 <code>this</code> 值绑定到另一个环境中，就可以使用 <code>call</code> / <code>apply</code> / <code>bind</code> 方法实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;leo&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;pingan&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// this 的值取决于函数调用方式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun();           <span class="comment">// &quot;pingan&quot;</span></span><br><span class="line">fun.call(user);  <span class="comment">// &quot;leo&quot;</span></span><br><span class="line">fun.apply(user); <span class="comment">// &quot;leo&quot;</span></span><br></pre></td></tr></table></figure>
<p>注意：这里的 <code>var name = &#39;pingan&#39;;</code> 需要使用 <code>var</code> 来声明，使用 <code>let</code> 的话， <code>window</code> 上将没有 <code>name</code> 变量。</p>
<p>三者语法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fun.call(thisArg, param1, param2, ...)</span><br><span class="line">fun.apply(thisArg, [param1,param2,...])</span><br><span class="line">fun.bind(thisArg, param1, param2, ...)</span><br></pre></td></tr></table></figure>

<h1 id="五、构造函数和-new-运算符"><a href="#五、构造函数和-new-运算符" class="headerlink" title="五、构造函数和 new 运算符"></a>五、构造函数和 new 运算符</h1><h2 id="1-构造函数"><a href="#1-构造函数" class="headerlink" title="1. 构造函数"></a>1. 构造函数</h2><p>构造函数的作用在于 <strong>实现可重用的对象创建代码</strong> 。<br>通常，对于构造函数有两个约定：</p>
<ul>
<li>命名时首字母大写；</li>
<li>只能使用 <code>new</code> 运算符执行。</li>
</ul>
<p><strong><code>new</code> 运算符</strong>创建一个用户定义的对象类型的实例或具有构造函数的内置对象的实例。<br>语法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title">constructor</span>[(<span class="params">[<span class="built_in">arguments</span>]</span>)]</span><br></pre></td></tr></table></figure>
<p>参数如下：</p>
<ul>
<li><code>constructor</code>一个指定对象实例的类型的类或函数。</li>
<li><code>arguments</code>一个用于被 <code>constructor</code> 调用的参数列表。</li>
</ul>
<h2 id="2-简单示例"><a href="#2-简单示例" class="headerlink" title="2. 简单示例"></a>2. 简单示例</h2><p>举个简单示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.isAdmin = <span class="literal">false</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> leo = <span class="keyword">new</span> User(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(leo.name, leo.isAdmin); <span class="comment">// &quot;leo&quot; false</span></span><br></pre></td></tr></table></figure>

<h2 id="3-new-运算符操作过程"><a href="#3-new-运算符操作过程" class="headerlink" title="3. new 运算符操作过程"></a>3. new 运算符操作过程</h2><p>当一个函数被使用 <code>new</code> 运算符执行时，它按照以下步骤：</p>
<ol>
<li>一个新的空对象被创建并分配给 <code>this</code>。</li>
<li>函数体执行。通常它会修改 <code>this</code>，为其添加新的属性。</li>
<li>返回 <code>this</code> 的值。</li>
</ol>
<p>以前面 <code>User</code> 方法为例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// this = &#123;&#125;;（隐式创建）</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加属性到 this</span></span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.isAdmin = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// return this;（隐式返回）</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> leo = <span class="keyword">new</span> User(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(leo.name, leo.isAdmin); <span class="comment">// &quot;leo&quot; false</span></span><br></pre></td></tr></table></figure>

<p>当我们执行 <code>new User(&#39;leo&#39;)</code> 时，发生以下事情：</p>
<ol>
<li>一个继承自 <code>User.prototype</code> 的新对象被创建；</li>
<li>使用指定参数调用构造函数 <code>User</code> ，并将 <code>this</code> 绑定到新创建的对象；</li>
<li>由构造函数返回的对象就是 <code>new</code> 表达式的结果。如果构造函数没有显式返回一个对象，则使用步骤1创建的对象。</li>
</ol>
<p><strong>需要注意</strong>：</p>
<ol>
<li><p>一般情况下，构造函数不返回值，但是开发者可以选择主动返回对象，来覆盖正常的对象创建步骤；</p>
</li>
<li><p><code>new User</code> 等同于 <code>new User()</code> ，只是没有指定参数列表，即 <code>User</code> 不带参数的情况；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> User; <span class="comment">// &lt;-- 没有参数</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> User();</span><br></pre></td></tr></table></figure></li>
<li><p>任何函数都可以作为构造器，即都可以使用 <code>new</code> 运算符运行。</p>
</li>
</ol>
<h2 id="4-构造函数中的方法"><a href="#4-构造函数中的方法" class="headerlink" title="4. 构造函数中的方法"></a>4. 构造函数中的方法</h2><p>在构造函数中，也可以将方法绑定到 <code>this</code> 上：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.isAdmin = <span class="literal">false</span>; </span><br><span class="line">	<span class="built_in">this</span>.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&quot;hello &quot;</span> + <span class="built_in">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> leo = <span class="keyword">new</span> User(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(leo.name, leo.isAdmin); <span class="comment">// &quot;leo&quot; false</span></span><br><span class="line">leo.sayHello(); <span class="comment">// &quot;hello leo&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="六、可选链-“-”"><a href="#六、可选链-“-”" class="headerlink" title="六、可选链 “?.”"></a>六、可选链 “?.”</h1><p>详细介绍可以查看 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/%E5%8F%AF%E9%80%89%E9%93%BE">《MDN 可选链操作符》</a> 。</p>
<h2 id="1-背景介绍"><a href="#1-背景介绍" class="headerlink" title="1. 背景介绍"></a>1. 背景介绍</h2><p>在实际开发中，常常出现下面几种报错情况：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 对象中不存在指定属性</span></span><br><span class="line"><span class="keyword">const</span> leo = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(leo.name.toString()); </span><br><span class="line"><span class="comment">// Uncaught TypeError: Cannot read property &#x27;toString&#x27; of undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用不存在的 DOM 节点属性</span></span><br><span class="line"><span class="keyword">const</span> dom = <span class="built_in">document</span>.getElementById(<span class="string">&quot;dom&quot;</span>).innerHTML; </span><br><span class="line"><span class="comment">// Uncaught TypeError: Cannot read property &#x27;innerHTML&#x27; of null</span></span><br></pre></td></tr></table></figure>
<p>在可选链 <code>?.</code> 出现之前，我们会使用短路操作 <code>&amp;&amp;</code> 运算符来解决该问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> leo = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(leo &amp;&amp; leo.name &amp;&amp; leo.name.toString()); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>这种写法的缺点就是 <strong>太麻烦了</strong> 。</p>
<h2 id="2-可选链介绍"><a href="#2-可选链介绍" class="headerlink" title="2. 可选链介绍"></a>2. 可选链介绍</h2><p>可选链 <code>?.</code> 是一种 <strong>访问嵌套对象属性的防错误方法</strong> 。即使中间的属性不存在，也不会出现错误。<br>如果可选链 <code>?.</code> 前面部分是 <code>undefined</code> 或者 <code>null</code>，它会停止运算并返回 <code>undefined</code>。</p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj?.prop</span><br><span class="line">obj?.[expr]</span><br><span class="line">arr?.[index]</span><br><span class="line">func?.(args)</span><br></pre></td></tr></table></figure>
<p>**<br><strong>我们改造前面示例代码：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 对象中不存在指定属性</span></span><br><span class="line"><span class="keyword">const</span> leo = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(leo?.name?.toString()); </span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用不存在的 DOM 节点属性</span></span><br><span class="line"><span class="keyword">const</span> dom = <span class="built_in">document</span>?.getElementById(<span class="string">&quot;dom&quot;</span>)?.innerHTML; </span><br><span class="line"><span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="3-使用注意"><a href="#3-使用注意" class="headerlink" title="3. 使用注意"></a>3. 使用注意</h2><p>可选链虽然好用，但需要注意以下几点：</p>
<ol>
<li><strong>不能过度使用可选链</strong>；</li>
</ol>
<p>我们应该只将 <code>?.</code> 使用在一些属性或方法可以不存在的地方，以上面示例代码为例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> leo = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(leo.name?.toString()); </span><br></pre></td></tr></table></figure>
<p>这样写会更好，因为 <code>leo</code> 对象是必须存在，而 <code>name</code> 属性则可能不存在。</p>
<ol start="2">
<li><strong>可选链 <code>?.</code> 之前的变量必须已声明</strong>；</li>
</ol>
<p>在可选链 <code>?.</code> 之前的变量必须使用 <code>let/const/var</code> 声明，否则会报错：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">leo?.name;</span><br><span class="line"><span class="comment">// Uncaught ReferenceError: leo is not defined</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p><strong>可选链不能用于赋值</strong> ；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> object = &#123;&#125;;</span><br><span class="line">object?.property = <span class="number">1</span>; </span><br><span class="line"><span class="comment">// Uncaught SyntaxError: Invalid left-hand side in assignment</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>可选链访问数组元素的方法</strong> ；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayItem = arr?.[<span class="number">42</span>];</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-其他情况：-和"><a href="#4-其他情况：-和" class="headerlink" title="4. 其他情况：?.() 和 ?.[]"></a>4. 其他情况：?.() 和 ?.[]</h2><p>需要说明的是 <code>?.</code> 是一个特殊的语法结构，而不是一个运算符，它还可以与其 <code>()</code> 和 <code>[]</code> 一起使用：</p>
<h3 id="4-1-可选链与函数调用"><a href="#4-1-可选链与函数调用" class="headerlink" title="4.1 可选链与函数调用 ?.()"></a>4.1 可选链与函数调用 ?.()</h3><p><code>?.()</code> 用于调用一个可能不存在的函数，比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user1 = &#123;</span><br><span class="line">  <span class="function"><span class="title">admin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;I am admin&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user2 = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">user1.admin?.(); <span class="comment">// I am admin</span></span><br><span class="line">user2.admin?.();</span><br></pre></td></tr></table></figure>
<p><code>?.()</code> 会检查它左边的部分：如果 admin 函数存在，那么就调用运行它（对于 <code>user1</code>）。否则（对于 <code>user2</code>）运算停止，没有错误。</p>
<h3 id="4-2-可选链和表达式"><a href="#4-2-可选链和表达式" class="headerlink" title="4.2 可选链和表达式 ?.[]"></a>4.2 可选链和表达式 ?.[]</h3><p><code>?.[]</code> 允许从一个可能不存在的对象上安全地读取属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user1 = &#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="string">&quot;John&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user2 = <span class="literal">null</span>; <span class="comment">// 假设，我们不能授权此用户</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;firstName&quot;</span>;</span><br><span class="line"></span><br><span class="line">alert( user1?.[key] ); <span class="comment">// John</span></span><br><span class="line">alert( user2?.[key] ); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">alert( user1?.[key]?.something?.not?.existing); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="5-可选链-语法总结"><a href="#5-可选链-语法总结" class="headerlink" title="5. 可选链 ?. 语法总结"></a>5. 可选链 <code>?.</code> 语法总结</h2><p>可选链 <code>?.</code> 语法有三种形式：</p>
<ol>
<li><code>obj?.prop</code> —— 如果 <code>obj</code> 存在则返回 <code>obj.prop</code>，否则返回 <code>undefined</code>。</li>
<li><code>obj?.[prop]</code> —— 如果 <code>obj</code> 存在则返回 <code>obj[prop]</code>，否则返回 <code>undefined</code>。</li>
<li><code>obj?.method()</code> —— 如果 <code>obj</code> 存在则调用 <code>obj.method()</code>，否则返回 <code>undefined</code>。</li>
</ol>
<p>正如我们所看到的，这些语法形式用起来都很简单直接。<code>?.</code> 检查左边部分是否为 <code>null/undefined</code>，如果不是则继续运算。<br><code>?.</code> 链使我们能够安全地访问嵌套属性。</p>
<h1 id="七、Symbol"><a href="#七、Symbol" class="headerlink" title="七、Symbol"></a>七、Symbol</h1><p>规范规定，JavaScript 中对象的属性只能为 <strong>字符串类型</strong> 或者 <strong>Symbol类型</strong> ，毕竟我们也只见过这两种类型。</p>
<h2 id="1-概念介绍"><a href="#1-概念介绍" class="headerlink" title="1. 概念介绍"></a>1. 概念介绍</h2><p>ES6引入<code>Symbol</code>作为一种新的<strong>原始数据类型</strong>，表示<strong>独一无二</strong>的值，主要是为了<strong>防止属性名冲突</strong>。<br>ES6之后，JavaScript一共有其中数据类型：<code>Symbol</code>、<code>undefined</code>、<code>null</code>、<code>Boolean</code>、<code>String</code>、<code>Number</code>、<code>Object</code>。<br><strong>简单使用</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">typeof</span> leo; <span class="comment">// &quot;symbol&quot;</span></span><br></pre></td></tr></table></figure>
<p>Symbol 支持传入参数作为 Symbol 名，方便代码调试：<br>**</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&quot;leo&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="2-注意事项"><a href="#2-注意事项" class="headerlink" title="2. 注意事项**"></a>2. 注意事项**</h2><ul>
<li><code>Symbol</code>函数不能用<code>new</code>，会报错。</li>
</ul>
<p>由于<code>Symbol</code>是一个原始类型，不是对象，所以不能添加属性，它是类似于字符串的数据类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="keyword">new</span> <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="comment">// Uncaught TypeError: Symbol is not leo constructor</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>Symbol</code>都是不相等的，<strong>即使参数相同</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 没有参数</span></span><br><span class="line"><span class="keyword">let</span> leo1 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> leo2 = <span class="built_in">Symbol</span>();</span><br><span class="line">leo1 === leo2; <span class="comment">// false </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 有参数</span></span><br><span class="line"><span class="keyword">let</span> leo1 = <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> leo2 = <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line">leo1 === leo2; <span class="comment">// false</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>Symbol</code>不能与其他类型的值计算，会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">leo + <span class="string">&quot; world!&quot;</span>;  <span class="comment">// 报错</span></span><br><span class="line"><span class="string">`<span class="subst">$&#123;leo&#125;</span> world!`</span>;  <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>Symbol</code> 不能自动转换为字符串，只能显式转换。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">alert(leo); </span><br><span class="line"><span class="comment">// Uncaught TypeError: Cannot convert a Symbol value to a string</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>(leo);    <span class="comment">// &quot;Symbol(hello)&quot;</span></span><br><span class="line">leo.toString(); <span class="comment">// &quot;Symbol(hello)&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>Symbol</code> 可以转换为布尔值，但不能转为数值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="built_in">Boolean</span>(a1);</span><br><span class="line">!a1;        <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>(a1); <span class="comment">// TypeError</span></span><br><span class="line">a1 + <span class="number">1</span> ;    <span class="comment">// TypeError</span></span><br></pre></td></tr></table></figure></li>
<li><p><code>Symbol</code> 属性不参与 <code>for...in/of</code> 循环。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> id = <span class="built_in">Symbol</span>(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Leo&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">30</span>,</span><br><span class="line">  [id]: <span class="number">123</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> user) <span class="built_in">console</span>.log(key); <span class="comment">// name, age (no symbols)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 Symbol 任务直接访问</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">&quot;Direct: &quot;</span> + user[id] );</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-字面量中使用-Symbol-作为属性名"><a href="#3-字面量中使用-Symbol-作为属性名" class="headerlink" title="3. 字面量中使用 Symbol 作为属性名"></a>3. 字面量中使用 Symbol 作为属性名</h2><p>在对象字面量中使用 <code>Symbol</code> 作为属性名时，需要使用 <strong>方括号</strong> （ <code>[]</code> ），如 <code>[leo]: &quot;leo&quot;</code> 。<br>好处：防止同名属性，还有防止键被改写或覆盖。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="comment">// 写法1</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line">user[leo] = <span class="string">&#x27;leo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法2</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">    [leo] : <span class="string">&#x27;leo&#x27;</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法3</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(user, leo, &#123;<span class="attr">value</span> : <span class="string">&#x27;leo&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3种写法 结果相同</span></span><br><span class="line">user[leo]; <span class="comment">// &#x27;leo&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>需要注意</strong> ：Symbol作为对象属性名时，不能用点运算符，并且必须放在方括号内。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line"><span class="comment">// 不能用点运算</span></span><br><span class="line">user.leo = <span class="string">&#x27;leo&#x27;</span>;</span><br><span class="line">user[leo] ; <span class="comment">// undefined</span></span><br><span class="line">user[<span class="string">&#x27;leo&#x27;</span>] ; <span class="comment">// &#x27;leo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 必须放在方括号内</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">    [leo] : <span class="function"><span class="keyword">function</span> (<span class="params">text</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">user[leo](<span class="string">&#x27;leo&#x27;</span>); <span class="comment">// &#x27;leo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面等价于 更简洁</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">    [leo](text)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>常常还用于创建一组常量，保证所有值不相等</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line">user.list = &#123;</span><br><span class="line">    <span class="attr">AAA</span>: <span class="built_in">Symbol</span>(<span class="string">&#x27;Leo&#x27;</span>),</span><br><span class="line">    <span class="attr">BBB</span>: <span class="built_in">Symbol</span>(<span class="string">&#x27;Robin&#x27;</span>),</span><br><span class="line">    <span class="attr">CCC</span>: <span class="built_in">Symbol</span>(<span class="string">&#x27;Pingan&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-应用：消除魔术字符串"><a href="#4-应用：消除魔术字符串" class="headerlink" title="4. 应用：消除魔术字符串"></a>4. 应用：消除魔术字符串</h2><p><strong>魔术字符串</strong>：指代码中多次出现，强耦合的字符串或数值，应该避免，而使用含义清晰的变量代替。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(name == <span class="string">&#x27;leo&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fun(<span class="string">&#x27;leo&#x27;</span>);   <span class="comment">// &#x27;hello&#x27; 为魔术字符串</span></span><br></pre></td></tr></table></figure>

<p>常使用变量，消除魔术字符串：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;leo&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(name == obj.name)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fun(obj.name); <span class="comment">// &#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure>

<p>使用<code>Symbol</code>消除强耦合，使得不需关系具体的值:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">Symbol</span>()</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(name == obj.name)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fun(obj.name); <span class="comment">// &#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-属性名遍历"><a href="#5-属性名遍历" class="headerlink" title="5. 属性名遍历"></a>5. 属性名遍历</h2><p>Symbol作为属性名遍历，不出现在<code>for...in</code>、<code>for...of</code>循环，也不被<code>Object.keys()</code>、<code>Object.getOwnPropertyNames()</code>、<code>JSON.stringify()</code>返回。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>), robin = <span class="built_in">Symbol</span>(<span class="string">&#x27;robin&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">    [leo]:<span class="string">&#x27;18&#x27;</span>, [robin]:<span class="string">&#x27;28&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">of</span> <span class="built_in">Object</span>.values(user))&#123;<span class="built_in">console</span>.log(k)&#125;</span><br><span class="line"><span class="comment">// 无输出</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(user, leo, &#123;<span class="attr">value</span>: <span class="string">&#x27;hi&#x27;</span>&#125;);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> user)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k); <span class="comment">// 无输出</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(user);   <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(user); <span class="comment">// [Symbol(leo)]</span></span><br></pre></td></tr></table></figure>
<p><code>Object.getOwnPropertySymbols</code>方法返回一个数组，包含当前对象所有用做属性名的Symbol值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> pingan = <span class="built_in">Symbol</span>(<span class="string">&#x27;pingan&#x27;</span>);</span><br><span class="line">user[leo] = <span class="string">&#x27;hi leo&#x27;</span>;</span><br><span class="line">user[pingan] = <span class="string">&#x27;hi pingan&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.getOwnPropertySymbols(user);</span><br><span class="line">obj; <span class="comment">//  [Symbol(leo), Symbol(pingan)]</span></span><br></pre></td></tr></table></figure>

<p>另外可以使用<code>Reflect.ownKeys</code>方法可以返回所有类型的键名，包括常规键名和 Symbol 键名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>)]: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">age</span> : <span class="number">2</span>, </span><br><span class="line">    <span class="attr">address</span> : <span class="number">3</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.ownKeys(user); <span class="comment">// [&#x27;age&#x27;, &#x27;address&#x27;,Symbol(&#x27;leo&#x27;)]</span></span><br></pre></td></tr></table></figure>

<p>由于Symbol值作为名称的属性不被常规方法遍历获取，因此常用于定义对象的一些非私有，且内部使用的方法。</p>
<h2 id="6-Symbol-for-、Symbol-keyFor"><a href="#6-Symbol-for-、Symbol-keyFor" class="headerlink" title="6. Symbol.for()、Symbol.keyFor()"></a>6. Symbol.for()、Symbol.keyFor()</h2><h3 id="6-1-Symbol-for"><a href="#6-1-Symbol-for" class="headerlink" title="6.1 Symbol.for()"></a>6.1 Symbol.for()</h3><p><strong>用于重复使用一个Symbol值</strong>，接收一个<strong>字符串</strong>作为参数，若存在用此参数作为名称的Symbol值，返回这个Symbol，否则新建并返回以这个参数为名称的Symbol值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> pingan = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;pingan&#x27;</span>);</span><br><span class="line">leo === pingan;  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><code>Symbol()</code> 和 <code>Symbol.for()</code>区别：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>.for(<span class="string">&#x27;leo&#x27;</span>) === <span class="built_in">Symbol</span>.for(<span class="string">&#x27;leo&#x27;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>) === <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>);         <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2-Symbol-keyFor"><a href="#6-2-Symbol-keyFor" class="headerlink" title="6.2 Symbol.keyFor()"></a>6.2 Symbol.keyFor()</h3><p><strong>用于返回一个已使用的Symbol类型的key</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="built_in">Symbol</span>.keyFor(leo);   <span class="comment">//  &#x27;leo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> leo = <span class="built_in">Symbol</span>(<span class="string">&#x27;leo&#x27;</span>);</span><br><span class="line"><span class="built_in">Symbol</span>.keyFor(leo);   <span class="comment">//  undefined</span></span><br></pre></td></tr></table></figure>

<h2 id="7-内置的Symbol值"><a href="#7-内置的Symbol值" class="headerlink" title="7. 内置的Symbol值"></a>7. 内置的Symbol值</h2><p>ES6提供11个内置的Symbol值，指向语言内部使用的方法：</p>
<h3 id="7-1-Symbol-hasInstance"><a href="#7-1-Symbol-hasInstance" class="headerlink" title="7.1 Symbol.hasInstance"></a>7.1 Symbol.hasInstance</h3><p>当其他对象使用<code>instanceof</code>运算符，判断是否为该对象的实例时，会调用这个方法。比如，<code>foo instanceof Foo</code>在语言内部，实际调用的是<code>Foo[Symbol.hasInstance](foo)</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> </span>&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.hasInstance](a)&#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="keyword">instanceof</span> <span class="built_in">Array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="keyword">instanceof</span> <span class="keyword">new</span> P(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>P是一个类，new P()会返回一个实例，该实例的<code>Symbol.hasInstance</code>方法，会在进行<code>instanceof</code>运算时自动调用，判断左侧的运算子是否为<code>Array</code>的实例。</p>
<h3 id="7-2-Symbol-isConcatSpreadable"><a href="#7-2-Symbol-isConcatSpreadable" class="headerlink" title="7.2 Symbol.isConcatSpreadable"></a>7.2 Symbol.isConcatSpreadable</h3><p>值为布尔值，表示该对象用于<code>Array.prototype.concat()</code>时，是否可以展开。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>];</span><br><span class="line">[<span class="string">&#x27;cc&#x27;</span>,<span class="string">&#x27;dd&#x27;</span>].concat(a, <span class="string">&#x27;ee&#x27;</span>); </span><br><span class="line"><span class="comment">// [&#x27;cc&#x27;, &#x27;dd&#x27;, &#x27;aa&#x27;, &#x27;bb&#x27;, &#x27;ee&#x27;]</span></span><br><span class="line">a[<span class="built_in">Symbol</span>.isConcatSpreadable]; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">let</span> b = [<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>]; </span><br><span class="line">b[<span class="built_in">Symbol</span>.isConcatSpreadable] = <span class="literal">false</span>; </span><br><span class="line">[<span class="string">&#x27;cc&#x27;</span>,<span class="string">&#x27;dd&#x27;</span>].concat(b, <span class="string">&#x27;ee&#x27;</span>); </span><br><span class="line"><span class="comment">// [&#x27;cc&#x27;, &#x27;dd&#x27;,[ &#x27;aa&#x27;, &#x27;bb&#x27;], &#x27;ee&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-Symbol-species"><a href="#7-3-Symbol-species" class="headerlink" title="7.3 Symbol.species"></a>7.3 Symbol.species</h3><p>指向一个构造函数，在创建衍生对象时会使用，使用时需要用<code>get</code>取值器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> get [<span class="built_in">Symbol</span>.species]()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解决下面问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 问题：  b应该是 Array 的实例，实际上是 P 的实例</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> <span class="keyword">extends</span> <span class="title">Array</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> P(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">let</span> b = a.map(<span class="function"><span class="params">x</span> =&gt;</span> x);</span><br><span class="line">b <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></span><br><span class="line">b <span class="keyword">instanceof</span> P; <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 解决：  通过使用 Symbol.species</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> get [<span class="built_in">Symbol</span>.species]() &#123; <span class="keyword">return</span> <span class="built_in">Array</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> P();</span><br><span class="line"><span class="keyword">let</span> b = a.map(<span class="function"><span class="params">x</span> =&gt;</span> x);</span><br><span class="line">b <span class="keyword">instanceof</span> P;     <span class="comment">// false</span></span><br><span class="line">b <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="7-4-Symbol-match"><a href="#7-4-Symbol-match" class="headerlink" title="7.4 Symbol.match"></a>7.4 Symbol.match</h3><p>当执行<code>str.match(myObject)</code>，传入的属性存在时会调用，并返回该方法的返回值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> </span>&#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.match](string)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;hello world&#x27;</span>.indexOf(string);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&#x27;h&#x27;</span>.match(<span class="keyword">new</span> P());   <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h3 id="7-5-Symbol-replace"><a href="#7-5-Symbol-replace" class="headerlink" title="7.5 Symbol.replace"></a>7.5 Symbol.replace</h3><p>当该对象被<code>String.prototype.replace</code>方法调用时，会返回该方法的返回值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line">a[<span class="built_in">Symbol</span>.replace] = <span class="function">(<span class="params">...s</span>) =&gt;</span> <span class="built_in">console</span>.log(s);</span><br><span class="line"><span class="string">&#x27;Hello&#x27;</span>.replace(a , <span class="string">&#x27;World&#x27;</span>) <span class="comment">// [&quot;Hello&quot;, &quot;World&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="7-6-Symbol-hasInstance"><a href="#7-6-Symbol-hasInstance" class="headerlink" title="7.6 Symbol.hasInstance"></a>7.6 Symbol.hasInstance</h3><p>当该对象被<code>String.prototype.search</code>方法调用时，会返回该方法的返回值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="built_in">Symbol</span>.search](s)&#123;</span><br><span class="line">        <span class="keyword">return</span> s.indexOf(<span class="built_in">this</span>.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&#x27;hileo&#x27;</span>.search(<span class="keyword">new</span> P(<span class="string">&#x27;leo&#x27;</span>)); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="7-7-Symbol-split"><a href="#7-7-Symbol-split" class="headerlink" title="7.7 Symbol.split"></a>7.7 Symbol.split</h3><p>当该对象被<code>String.prototype.split</code>方法调用时，会返回该方法的返回值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重新定义了字符串对象的split方法的行为</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="built_in">Symbol</span>.split](s) &#123;</span><br><span class="line">        <span class="keyword">let</span> i = s.indexOf(<span class="built_in">this</span>.val);</span><br><span class="line">        <span class="keyword">if</span>(i == -<span class="number">1</span>) <span class="keyword">return</span> s;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            s.substr(<span class="number">0</span>, i),</span><br><span class="line">            s.substr(i + <span class="built_in">this</span>.val.length)</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&#x27;helloworld&#x27;</span>.split(<span class="keyword">new</span> P(<span class="string">&#x27;hello&#x27;</span>)); <span class="comment">// [&quot;hello&quot;, &quot;&quot;]</span></span><br><span class="line"><span class="string">&#x27;helloworld&#x27;</span>.split(<span class="keyword">new</span> P(<span class="string">&#x27;world&#x27;</span>)); <span class="comment">// [&quot;&quot;, &quot;world&quot;] </span></span><br><span class="line"><span class="string">&#x27;helloworld&#x27;</span>.split(<span class="keyword">new</span> P(<span class="string">&#x27;leo&#x27;</span>));   <span class="comment">// &quot;helloworld&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-8-Symbol-iterator"><a href="#7-8-Symbol-iterator" class="headerlink" title="7.8 Symbol.iterator"></a>7.8 Symbol.iterator</h3><p>对象进行<code>for...of</code>循环时，会调用<code>Symbol.iterator</code>方法，返回该对象的默认遍历器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">P</span> </span>&#123;</span><br><span class="line">    *[<span class="built_in">Symbol</span>.interator]() &#123;</span><br><span class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">this</span>[i] !== <span class="literal">undefined</span> ) &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="built_in">this</span>[i];</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> P();</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span> a)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-9-Symbol-toPrimitive"><a href="#7-9-Symbol-toPrimitive" class="headerlink" title="7.9.Symbol.toPrimitive"></a>7.9.Symbol.toPrimitive</h3><p>该对象被转为原始类型的值时，会调用这个方法，返回该对象对应的原始类型值。调用时，需要接收一个字符串参数，表示当前运算模式，运算模式有：</p>
<ul>
<li>Number : 此时需要转换成数值</li>
<li>String : 此时需要转换成字符串</li>
<li>Default : 此时可以转换成数值或字符串<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive](hint) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (hint) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;number&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;string&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;str&#x27;</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;default&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;default&#x27;</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">2</span> * obj <span class="comment">// 246</span></span><br><span class="line"><span class="number">3</span> + obj <span class="comment">// &#x27;3default&#x27;</span></span><br><span class="line">obj == <span class="string">&#x27;default&#x27;</span> <span class="comment">// true</span></span><br><span class="line"><span class="built_in">String</span>(obj) <span class="comment">// &#x27;str&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-10-Symbol-toStringTag"><a href="#7-10-Symbol-toStringTag" class="headerlink" title="7.10 Symbol.toStringTag"></a>7.10 Symbol.toStringTag</h3><p>在该对象上面调用<code>Object.prototype.toString</code>方法时，如果这个属性存在，它的返回值会出现在<code>toString</code>方法返回的字符串之中，表示对象的类型。也就是说，这个属性可以用来定制<code>[object Object</code>]或<code>[object Array]</code>中<code>object</code>后面的那个字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例一</span></span><br><span class="line">(&#123;[<span class="built_in">Symbol</span>.toStringTag]: <span class="string">&#x27;Foo&#x27;</span>&#125;.toString())</span><br><span class="line"><span class="comment">// &quot;[object Foo]&quot;</span></span><br><span class="line"><span class="comment">// 例二</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Collection</span> </span>&#123;</span><br><span class="line">  get [<span class="built_in">Symbol</span>.toStringTag]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> x = <span class="keyword">new</span> Collection();</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(x) <span class="comment">// &quot;[object xxx]&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-11-Symbol-unscopables"><a href="#7-11-Symbol-unscopables" class="headerlink" title="7.11 Symbol.unscopables"></a>7.11 Symbol.unscopables</h3><p>该对象指定了使用with关键字时，哪些属性会被with环境排除。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 没有 unscopables 时</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">2</span>; &#125;;</span><br><span class="line"><span class="keyword">with</span> (MyClass.prototype) &#123;</span><br><span class="line">  foo(); <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有 unscopables 时</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">  get [<span class="built_in">Symbol</span>.unscopables]() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">foo</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">2</span>; &#125;;</span><br><span class="line"><span class="keyword">with</span> (MyClass.prototype) &#123;</span><br><span class="line">  foo(); <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码通过指定<code>Symbol.unscopables</code>属性，使得<code>with</code>语法块不会在当前作用域寻找<code>foo</code>属性，即<code>foo</code>将指向外层作用域的变量。</p>
<h1 id="八、原始值转换"><a href="#八、原始值转换" class="headerlink" title="八、原始值转换"></a>八、原始值转换</h1><p>前面复习到字符串、数值、布尔值等的转换，但是没有讲到对象的转换规则，这部分就一起看看：。<br>需要记住几个规则：</p>
<ol>
<li>所有对象在布尔上下文中都为 <code>true</code> ，并且不存在转换为布尔值的操作，只有字符串和数值转换有。</li>
<li>数值转换发生在对象相减或应用数学函数时。如 <code>Date</code> 对象可以相减，如 <code>date1 - date2</code> 结果为两个时间的差值。</li>
<li>在字符串转换，通常出现在如 <code>alert(obj)</code> 这种形式。</li>
</ol>
<p>当然我们可以使用特殊的对象方法，对字符串和数值转换进行微调。下面介绍三个类型（hint）转换情况：</p>
<h2 id="1-object-to-string"><a href="#1-object-to-string" class="headerlink" title="1. object to string"></a>1. object to string</h2><p>对象到字符串的转换，当我们对期望一个字符串的对象执行操作时，如 “alert”：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出</span></span><br><span class="line">alert(obj);</span><br><span class="line"><span class="comment">// 将对象作为属性键</span></span><br><span class="line">anotherObj[obj] = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<h2 id="2-object-to-number"><a href="#2-object-to-number" class="headerlink" title="2. object to number"></a>2. object to number</h2><p>对象到数字的转换，例如当我们进行数学运算时：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显式转换</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="built_in">Number</span>(obj);</span><br><span class="line"><span class="comment">// 数学运算（除了二进制加法）</span></span><br><span class="line"><span class="keyword">let</span> n = +obj; <span class="comment">// 一元加法</span></span><br><span class="line"><span class="keyword">let</span> delta = date1 - date2;</span><br><span class="line"><span class="comment">// 小于/大于的比较</span></span><br><span class="line"><span class="keyword">let</span> greater = user1 &gt; user2;</span><br></pre></td></tr></table></figure>

<h2 id="3-object-to-default"><a href="#3-object-to-default" class="headerlink" title="3. object to default"></a>3. object to default</h2><p>少数情况下，<strong>当运算符“不确定”期望值类型时</strong>。<br>例如，二进制加法 <code>+</code> 可用于字符串（连接），也可以用于数字（相加），所以字符串和数字这两种类型都可以。因此，当二元加法得到对象类型的参数时，它将依据 <code>&quot;default&quot;</code> 来对其进行转换。<br>此外，如果对象被用于与字符串、数字或 symbol 进行 <code>==</code> 比较，这时到底应该进行哪种转换也不是很明确，因此使用 <code>&quot;default&quot;</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二元加法使用默认 hint</span></span><br><span class="line"><span class="keyword">let</span> total = obj1 + obj2;</span><br><span class="line"><span class="comment">// obj == number 使用默认 hint</span></span><br><span class="line"><span class="keyword">if</span> (user == <span class="number">1</span>) &#123; ... &#125;;</span><br></pre></td></tr></table></figure>

<h2 id="4-类型转换算法"><a href="#4-类型转换算法" class="headerlink" title="4. 类型转换算法"></a>4. 类型转换算法</h2><p><strong>为了进行转换，JavaScript 尝试查找并调用三个对象方法：</strong></p>
<ol>
<li>调用 <code>obj[Symbol.toPrimitive](hint)</code> —— 带有 symbol 键 <code>Symbol.toPrimitive</code>（系统 symbol）的方法，如果这个方法存在的话，</li>
<li>否则，如果 hint 是 <code>&quot;string&quot;</code> —— 尝试 <code>obj.toString()</code> 和 <code>obj.valueOf()</code>，无论哪个存在。</li>
<li>否则，如果 hint 是 <code>&quot;number&quot;</code> 或 <code>&quot;default&quot;</code> —— 尝试 <code>obj.valueOf()</code> 和 <code>obj.toString()</code>，无论哪个存在。</li>
</ol>
<h2 id="5-Symbol-toPrimitive"><a href="#5-Symbol-toPrimitive" class="headerlink" title="5. Symbol.toPrimitive"></a>5. Symbol.toPrimitive</h2><p>详细介绍可阅读<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive">《MDN | Symbol.toPrimitive》</a> 。<br><code>Symbol.toPrimitive</code> 是一个内置的 Symbol 值，它是作为对象的函数值属性存在的，当一个对象转换为对应的原始值时，会调用此函数。<br>简单示例介绍：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Leo&quot;</span>,</span><br><span class="line">  <span class="attr">money</span>: <span class="number">9999</span>,</span><br><span class="line"></span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive](hint) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hint: <span class="subst">$&#123;hint&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> hint == <span class="string">&quot;string&quot;</span> ? <span class="string">`&#123;name: &quot;<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>&quot;&#125;`</span> : <span class="built_in">this</span>.money;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(user);     <span class="comment">// 控制台：hint: string 弹框：&#123;name: &quot;John&quot;&#125;</span></span><br><span class="line">alert(+user);    <span class="comment">// 控制台：hint: number 弹框：9999</span></span><br><span class="line">alert(user + <span class="number">1</span>); <span class="comment">// 控制台：hint: default 弹框：10000</span></span><br></pre></td></tr></table></figure>

<h2 id="6-toString-valueOf"><a href="#6-toString-valueOf" class="headerlink" title="6. toString/valueOf"></a>6. toString/valueOf</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString"><code>toString</code></a> / <code>valueOf</code> 是两个比较早期的实现转换的方法。当没有 <code>Symbol.toPrimitive</code> ，那么 JavaScript 将尝试找到它们，并且按照下面的顺序进行尝试：</p>
<ul>
<li>对于 “string” hint，<code>toString -&gt; valueOf</code>。</li>
<li>其他情况，<code>valueOf -&gt; toString</code>。</li>
</ul>
<p>这两个方法必须返回一个原始值。如果 <code>toString</code> 或 <code>valueOf</code> 返回了一个对象，那么返回值会被忽略。默认情况下，普通对象具有 <code>toString</code> 和 <code>valueOf</code> 方法：</p>
<ul>
<li><code>toString</code> 方法返回一个字符串 <code>&quot;[object Object]&quot;</code>。</li>
<li><code>valueOf</code> 方法返回对象自身。</li>
</ul>
<p>简单示例介绍：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;<span class="attr">name</span>: <span class="string">&quot;Leo&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">alert(user); <span class="comment">// [object Object]</span></span><br><span class="line">alert(user.valueOf() === user); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>我们也可以结合 <code>toString</code> / <code>valueOf</code>  实现前面第 5 点介绍的 <code>user</code> 对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Leo&quot;</span>,</span><br><span class="line">  <span class="attr">money</span>: <span class="number">9999</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对于 hint=&quot;string&quot;</span></span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&#123;name: &quot;<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>&quot;&#125;`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对于 hint=&quot;number&quot; 或 &quot;default&quot;</span></span><br><span class="line">  <span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.money;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">alert(user);     <span class="comment">// 控制台：hint: string 弹框：&#123;name: &quot;John&quot;&#125;</span></span><br><span class="line">alert(+user);    <span class="comment">// 控制台：hint: number 弹框：9999</span></span><br><span class="line">alert(user + <span class="number">1</span>); <span class="comment">// 控制台：hint: default 弹框：10000</span></span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本文作为《初中级前端 JavaScript 自测清单》第二部分，介绍的内容以 JavaScript 对象为主，其中有让我眼前一亮的知识点，如 <code>Symbol.toPrimitive</code> 方法。我也希望这个清单能帮助大家自测自己的 JavaScript 水平并查缺补漏，温故知新。</p>
<table>
<thead>
<tr>
<th>Author</th>
<th>王平安</th>
</tr>
</thead>
<tbody><tr>
<td>E-mail</td>
<td><a href="mailto:&#112;&#105;&#110;&#103;&#x61;&#110;&#x38;&#55;&#x38;&#55;&#64;&#x71;&#113;&#46;&#x63;&#111;&#109;">&#112;&#105;&#110;&#103;&#x61;&#110;&#x38;&#55;&#x38;&#55;&#64;&#x71;&#113;&#46;&#x63;&#111;&#109;</a></td>
</tr>
<tr>
<td>博  客</td>
<td><a target="_blank" rel="noopener" href="http://www.pingan8787.com/">www.pingan8787.com</a></td>
</tr>
<tr>
<td>微  信</td>
<td>pingan8787</td>
</tr>
<tr>
<td>每日文章推荐</td>
<td><a target="_blank" rel="noopener" href="https://github.com/pingan8787/Leo_Reading/issues">https://github.com/pingan8787/Leo_Reading/issues</a></td>
</tr>
<tr>
<td>ES小册</td>
<td>js.pingan8787.com</td>
</tr>
<tr>
<td>语雀知识库</td>
<td><a target="_blank" rel="noopener" href="https://www.yuque.com/wangpingan/cute-frontend">Cute-FrontEnd</a></td>
</tr>
</tbody></table>
<p><img src="http://images.pingan8787.com/2019_07_12guild_page.png" alt="bg">  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/08/05/215-%E3%80%90JavaScript%E3%80%91%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AFJavaScript%E8%87%AA%E6%B5%8B%E6%B8%85%E5%8D%95-2/" data-id="ckts3ejzw00rm4d9kapxvdaso" data-title="215-【JavaScript】初中级前端JavaScript自测清单-2" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/22/216-%E3%80%90JavaScript%E3%80%91%E5%89%8D%E7%AB%AF%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%A4%84%E7%90%86%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          216-【JavaScript】前端如何优雅处理类数组对象
        
      </div>
    </a>
  
  
    <a href="/2020/08/05/214-%E3%80%90React%E3%80%91React%E4%B8%8E%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E9%82%A3%E4%BA%9B%E5%B9%B4/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">214-【React】React与前端开发的那些年</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/" rel="tag">Angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E5%8A%A8%E7%94%BB/" rel="tag">CSS动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6-ES7-ES8/" rel="tag">ES6/ES7/ES8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eslint/" rel="tag">Eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/" rel="tag">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GraphQL/" rel="tag">GraphQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H5/" rel="tag">H5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" rel="tag">HTTP协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hybrid/" rel="tag">Hybrid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/" rel="tag">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Numpy/" rel="tag">Numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tensorflow/" rel="tag">Tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TyeScript/" rel="tag">TyeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuejs/" rel="tag">Vuejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/" rel="tag">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/demo/" rel="tag">demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" rel="tag">全栈开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag">前端开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" rel="tag">前端探索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" rel="tag">前端知乎系列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag">原创</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" rel="tag">常用技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" rel="tag">微前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" rel="tag">构建工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" rel="tag">源码精读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%83%AD%E9%97%A8/" rel="tag">热门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" rel="tag">生活杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" rel="tag">网络请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="tag">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" rel="tag">重温基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 11.88px;">Angular</a> <a href="/tags/CSS/" style="font-size: 18.13px;">CSS</a> <a href="/tags/CSS%E5%8A%A8%E7%94%BB/" style="font-size: 12.5px;">CSS动画</a> <a href="/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/tags/ES6-ES7-ES8/" style="font-size: 10.63px;">ES6/ES7/ES8</a> <a href="/tags/Eslint/" style="font-size: 10px;">Eslint</a> <a href="/tags/Express/" style="font-size: 10px;">Express</a> <a href="/tags/GraphQL/" style="font-size: 10px;">GraphQL</a> <a href="/tags/H5/" style="font-size: 10px;">H5</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 11.88px;">HTTP</a> <a href="/tags/HTTP%E5%8D%8F%E8%AE%AE/" style="font-size: 11.25px;">HTTP协议</a> <a href="/tags/Hybrid/" style="font-size: 10.63px;">Hybrid</a> <a href="/tags/JavaScript/" style="font-size: 19.38px;">JavaScript</a> <a href="/tags/NPM/" style="font-size: 10px;">NPM</a> <a href="/tags/Nodejs/" style="font-size: 11.25px;">Nodejs</a> <a href="/tags/Numpy/" style="font-size: 10.63px;">Numpy</a> <a href="/tags/Python/" style="font-size: 17.5px;">Python</a> <a href="/tags/React/" style="font-size: 12.5px;">React</a> <a href="/tags/Tensorflow/" style="font-size: 10.63px;">Tensorflow</a> <a href="/tags/TyeScript/" style="font-size: 10px;">TyeScript</a> <a href="/tags/TypeScript/" style="font-size: 11.25px;">TypeScript</a> <a href="/tags/Vuejs/" style="font-size: 14.38px;">Vuejs</a> <a href="/tags/WebSocket/" style="font-size: 10px;">WebSocket</a> <a href="/tags/Webpack/" style="font-size: 15.63px;">Webpack</a> <a href="/tags/demo/" style="font-size: 10.63px;">demo</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">中间件</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 16.25px;">人工智能</a> <a href="/tags/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91/" style="font-size: 11.25px;">全栈开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 20px;">前端开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2/" style="font-size: 11.25px;">前端探索</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E7%9F%A5%E4%B9%8E%E7%B3%BB%E5%88%97/" style="font-size: 10.63px;">前端知乎系列</a> <a href="/tags/%E5%8E%9F%E5%88%9B/" style="font-size: 18.75px;">原创</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF/" style="font-size: 10.63px;">常用技术</a> <a href="/tags/%E5%BE%AE%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">微前端</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 13.75px;">总结</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 10.63px;">构建工具</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10.63px;">正则表达式</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 10px;">源码</a> <a href="/tags/%E6%BA%90%E7%A0%81%E7%B2%BE%E8%AF%BB/" style="font-size: 10px;">源码精读</a> <a href="/tags/%E7%83%AD%E9%97%A8/" style="font-size: 10px;">热门</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%9D%82%E8%AE%B0/" style="font-size: 10px;">生活杂记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13.13px;">算法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 10px;">编译原理</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" style="font-size: 10px;">网络请求</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 14.38px;">读书笔记</a> <a href="/tags/%E9%87%8D%E6%B8%A9%E5%9F%BA%E7%A1%80/" style="font-size: 16.88px;">重温基础</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 10px;">面试题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/28/227-%E3%80%90%E6%80%BB%E7%BB%93%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%9C%A8%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8SVG%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87/">227-【总结】如何优雅的在微信小程序使用SVG字体图标</a>
          </li>
        
          <li>
            <a href="/2021/07/28/226-%E3%80%90HTTP%E3%80%91%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%AE%A1%E7%90%86HTTP%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8%EF%BC%9F/">226-【HTTP】如何优雅的管理HTTP请求和响应拦截器？</a>
          </li>
        
          <li>
            <a href="/2021/07/28/225-%E3%80%90Vue%E3%80%91%E4%BB%8E%E6%89%8B%E5%86%99Vue3%E7%9A%84Reactivity%E5%BC%80%E5%A7%8B%E6%B7%B1%E5%85%A5Vue3%E6%BA%90%E7%A0%81/">225-【Vue】从手写Vue3的Reactivity开始深入Vue3源码</a>
          </li>
        
          <li>
            <a href="/2021/05/30/224-%E3%80%90Chrome%E3%80%915%E4%B8%AAChrome%E8%B0%83%E8%AF%95%E6%B7%B7%E5%90%88%E5%BA%94%E7%94%A8%E7%9A%84%E6%8A%80%E5%B7%A7/">224-【Chrome】5个Chrome调试混合应用的技巧</a>
          </li>
        
          <li>
            <a href="/2021/03/19/223-%E3%80%90%E5%89%8D%E7%AB%AF%E6%8E%A2%E7%B4%A2%E3%80%91%E6%8E%A2%E7%B4%A2Snabbdom%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/">223-【前端探索】探索Snabbdom模块系统原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>